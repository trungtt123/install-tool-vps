LavaPack.loadBundle([[10,{"../../../shared/constants/metametrics":4057,"../../../shared/modules/hexstring-utils":4089,"@metamask/base-controller":1058,"@metamask/controller-utils":1063,"@metamask/message-manager":1319,"@metamask/utils":1769,buffer:2430,events:2838,loglevel:3416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n=d(e("events")),i=d(e("loglevel")),s=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const m=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=m;class g extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:r}){super({metadata:f,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"hub",void 0),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this.hub=new n.default,this._decryptMessageManager=new s.DecryptMessageManager(undefined,undefined,undefined,["decrypted"]),this._decryptMessageManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._decryptMessageManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e)})),this._subscribeToMessageState(this._decryptMessageManager,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw i.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],i=this._migrateMessage(n);t[r]=i}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||a.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:a.ApprovalType.EthDecrypt},!0)}catch(e){i.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){i.default.info("Error rejecting request to approval controller",e)}}}r.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[100,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:9,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=9;try{const e=function(e){const t=(0,n.merge)({},e,{CurrencyController:{currentCurrency:e.currentFiat||e.fiatCurrency||"USD",conversionRate:e.conversionRate,conversionDate:e.conversionDate}});return delete t.currentFiat,delete t.fiatCurrency,delete t.conversionRate,delete t.conversionDate,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #9${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/009.js"}],[1e3,{immer:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1001,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1002,{"./BaseController":999,"./BaseControllerV2":1e3,"./ControllerMessenger":1001},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/address-book-controller>@metamask/base-controller",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1003,{"./types":1007},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP=r.ApprovalType=r.ORIGIN_METAMASK=r.OPENSEA_TEST_API_URL=r.OPENSEA_API_URL=r.OPENSEA_PROXY_URL=r.BUILT_IN_NETWORKS=r.TESTNET_TICKER_SYMBOLS=r.ASSET_TYPES=r.GWEI=r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=r.ERC1155_METADATA_URI_INTERFACE_ID=r.ERC1155_INTERFACE_ID=r.ERC721_ENUMERABLE_INTERFACE_ID=r.ERC721_METADATA_INTERFACE_ID=r.ERC721_INTERFACE_ID=r.ERC20=r.ERC1155=r.ERC721=r.MAX_SAFE_CHAIN_ID=r.GANACHE_CHAIN_ID=r.IPFS_DEFAULT_GATEWAY_URL=r.FALL_BACK_VS_CURRENCY=r.RPC=void 0;const n=e("./types");r.RPC="rpc",r.FALL_BACK_VS_CURRENCY="ETH",r.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",r.GANACHE_CHAIN_ID="0x539",r.MAX_SAFE_CHAIN_ID=0xfffffffffffec,r.ERC721="ERC721",r.ERC1155="ERC1155",r.ERC20="ERC20",r.ERC721_INTERFACE_ID="0x80ac58cd",r.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",r.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",r.ERC1155_INTERFACE_ID="0xd9b67a26",r.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",r.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",r.GWEI="gwei",r.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},r.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH"},r.BUILT_IN_NETWORKS={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:n.NetworksTicker.goerli,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:n.NetworksTicker.sepolia,rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:n.NetworksTicker.mainnet,rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:n.NetworksTicker["linea-goerli"],rpcPrefs:{blockExplorerUrl:"https://explorer.goerli.linea.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:n.NetworksTicker["linea-mainnet"],rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:undefined,blockExplorerUrl:undefined,rpcPrefs:undefined}},r.OPENSEA_PROXY_URL="https://proxy.metafi.codefi.network/opensea/v1/api/v1",r.OPENSEA_API_URL="https://api.opensea.io/api/v1",r.OPENSEA_TEST_API_URL="https://testnets-api.opensea.io/api/v1",r.ORIGIN_METAMASK="metamask",function(e){e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSign="eth_sign",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset"}(r.ApprovalType||(r.ApprovalType={})),r.NETWORK_ID_TO_ETHERS_NETWORK_NAME_MAP={[n.NetworkId.goerli]:n.NetworkType.goerli,[n.NetworkId.sepolia]:n.NetworkType.sepolia,[n.NetworkId.mainnet]:n.NetworkType.mainnet,[n.NetworkId["linea-goerli"]]:n.NetworkType["linea-goerli"],[n.NetworkId["linea-mainnet"]]:n.NetworkType["linea-mainnet"]}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/constants.js"}],[1004,{"./constants":1003,"./siwe":1006,"./types":1007,"./util":1008},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./constants"),r),i(e("./util"),r),i(e("./types"),r),i(e("./siwe"),r)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/index.js"}],[1005,{"@metamask/utils":1017},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("controller-utils")}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/logger.js"}],[1006,{"./logger":1005,"@spruceid/siwe-parser":1959,buffer:2430,"ethereumjs-util":2798},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.detectSIWE=r.isValidSIWEOrigin=r.parseDomainParts=void 0;const n=e("@spruceid/siwe-parser"),i=e("ethereumjs-util"),s=e("./logger"),o=(0,s.createModuleLogger)(s.projectLogger,"detect-siwe");function a(e){try{const n="string"!=typeof(r=e)?r:(0,i.isHexPrefixed)(r)?r.slice(2):r,s=t.from(n,"hex");return 32===s.length?e:s.toString("utf8")}catch(t){return o(t),e}var r}const c={"http:":"80","https:":"443"};r.parseDomainParts=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);r.isValidSIWEOrigin=e=>{var t;try{const{origin:n,siwe:i}=e;if(!n||!(null===(t=null==i?void 0:i.parsedMessage)||void 0===t?void 0:t.domain))return!1;const s=new URL(n),o=(0,r.parseDomainParts)(i.parsedMessage.domain,s.protocol);return 0===o.hostname.localeCompare(s.hostname,undefined,{sensitivity:"accent"})&&(""!==o.port&&o.port!==s.port?""===s.port&&o.port===c[s.protocol]:""===o.username||o.username===s.username)}catch(e){return o(e),!1}};r.detectSIWE=e=>{try{const{data:t}=e,r=a(t);return{isSIWEMessage:!0,parsedMessage:new n.ParsedMessage(r)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/siwe.js"}],[1007,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.NetworksTicker=r.NetworkId=r.ChainId=r.BuiltInNetworkName=r.isNetworkType=r.NetworkType=r.InfuraNetworkType=void 0,r.InfuraNetworkType={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-mainnet":"linea-mainnet"},r.NetworkType=Object.assign(Object.assign({},r.InfuraNetworkType),{rpc:"rpc"}),r.isNetworkType=function(e){return Object.values(r.NetworkType).includes(e)},function(e){e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaMainnet="linea-mainnet",e.Aurora="aurora"}(n=r.BuiltInNetworkName||(r.BuiltInNetworkName={})),r.ChainId={[n.Mainnet]:"0x1",[n.Goerli]:"0x5",[n.Sepolia]:"0xaa36a7",[n.Aurora]:"0x4e454152",[n.LineaGoerli]:"0xe704",[n.LineaMainnet]:"0xe708"},r.NetworkId={[r.InfuraNetworkType.mainnet]:"1",[r.InfuraNetworkType.goerli]:"5",[r.InfuraNetworkType.sepolia]:"11155111",[r.InfuraNetworkType["linea-goerli"]]:"59140",[r.InfuraNetworkType["linea-mainnet"]]:"59144"},function(e){e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc=""}(r.NetworksTicker||(r.NetworksTicker={}))}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/types.js"}],[1008,{"./constants":1003,"@metamask/utils":1017,buffer:2430,"eth-ens-namehash":2711,"ethereumjs-util":2798,"ethjs-unit":2836,"fast-deep-equal":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.isValidJson=r.isNonEmptyArray=r.isPlainObject=r.convertHexToDecimal=r.query=r.normalizeEnsName=r.timeoutFetch=r.fetchWithErrorHandling=r.handleFetch=r.successfulFetch=r.isSmartContractCode=r.isValidHexAddress=r.toChecksumHexAddress=r.safelyExecuteWithTimeout=r.safelyExecute=r.toHex=r.fromHex=r.hexToText=r.hexToBN=r.getBuyURL=r.weiHexToGweiDec=r.gweiDecToWEIBN=r.fractionBN=r.BNToHex=r.isSafeChainId=void 0;const s=e("@metamask/utils"),o=i(e("eth-ens-namehash")),a=e("ethereumjs-util"),c=e("ethjs-unit"),u=i(e("fast-deep-equal")),l=e("./constants"),d=new Error("timeout");function h(e){return e?new a.BN((0,a.stripHexPrefix)(e),16):new a.BN(0)}function f(e,t){return n(this,void 0,void 0,(function*(){const r=yield fetch(e,t);if(!r.ok)throw new Error(`Fetch failed with status '${r.status}' for request '${e}'`);return r}))}function p(e,t){return n(this,void 0,void 0,(function*(){const r=yield f(e,t);return yield r.json()}))}r.isSafeChainId=function(e){if(!(0,a.isHexString)(e))return!1;const t=Number.parseInt(e);return Number.isSafeInteger(t)&&t>0&&t<=l.MAX_SAFE_CHAIN_ID},r.BNToHex=function(e){return(0,a.addHexPrefix)(e.toString(16))},r.fractionBN=function(e,t,r){const n=new a.BN(t),i=new a.BN(r);return e.mul(n).div(i)},r.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new a.BN(0);const t=e.toString().split("."),r=t[0]||"0";let n=t[1]||"";if(!n)return(0,c.toWei)(r,"gwei");if(n.length<=9)return(0,c.toWei)(`${r}.${n}`,"gwei");const i=n.slice(9)[0];n=n.slice(0,9);let s=(0,c.toWei)(`${r}.${n}`,"gwei");return Number(i)>=5&&(s=s.add(new a.BN(1))),s},r.weiHexToGweiDec=function(e){const t=new a.BN((0,a.stripHexPrefix)(e),16);return(0,c.fromWei)(t,"gwei").toString(10)},r.getBuyURL=function(e="1",t,r=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${r}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return undefined}},r.hexToBN=h,r.hexToText=function(e){try{const r=(0,a.stripHexPrefix)(e);return t.from(r,"hex").toString("utf8")}catch(t){return e}},r.fromHex=function(e){return a.BN.isBN(e)?e:new a.BN(h(e).toString(10))},r.toHex=function(e){return"string"==typeof e&&(0,s.isStrictHexString)(e)?e:`0x${a.BN.isBN(e)?e.toString(16):new a.BN(e.toString(),10).toString(16)}`},r.safelyExecute=function(e,t=!1){return n(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),undefined}}))},r.safelyExecuteWithTimeout=function(e,t=!1,r=500){return n(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}catch(e){return t&&console.error(e),undefined}}))},r.toChecksumHexAddress=function(e){const t=(0,a.addHexPrefix)(e);return(0,a.isHexString)(t)?(0,a.toChecksumAddress)(t):t},r.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const r=t?(0,a.addHexPrefix)(e):e;return!!(0,a.isHexString)(r)&&(0,a.isValidAddress)(r)},r.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},r.successfulFetch=f,r.handleFetch=p,r.fetchWithErrorHandling=function({url:e,options:t,timeout:r,errorCodesToCatch:i}){return n(this,void 0,void 0,(function*(){let n;try{n=r?Promise.race([yield p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))]):yield p(e,t)}catch(e){!function(e,t=[]){var r;if(!e)return;const n=t.some((t=>{var r;return null===(r=e.message)||void 0===r?void 0:r.includes(`Fetch failed with status '${t}'`)}));if(!(e instanceof Error&&(n||(null===(r=e.message)||void 0===r?void 0:r.includes("Failed to fetch"))||e===d)))throw e;console.error(e)}(e,i)}return n}))},r.timeoutFetch=function(e,t,r=500){return n(this,void 0,void 0,(function*(){return Promise.race([f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),r)))])}))},r.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=o.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},r.query=function(e,t,r=[]){return new Promise(((n,i)=>{const s=(e,t)=>{e?i(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...r,s):e.sendAsync({method:t,params:r},s)}))};r.convertHexToDecimal=(e="0x0")=>(0,a.isHexString)(e)?parseInt(e,16):Number(e)?Number(e):0,r.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isValidJson=function(e){try{return(0,u.default)(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/dist/util.js"}],[1009,{superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function i(e,t){return r=e,Boolean("string"==typeof r?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var r}class s extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=s,r.assert=function(e,t="Assertion failed.",r=s){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=s){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/assert.js"}],[101,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:10,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=10;try{const e=function(e){const t=(0,n.merge)({},e,{ShapeShiftController:{shapeShiftTxList:e.shapeShiftTxList||[]}});return delete t.shapeShiftTxList,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #10${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/010.js"}],[1010,{"./assert":1009,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),i=e("./assert");r.base64=(e,t={})=>{const r=t.paddingRequired??!1,s=t.characterSet??"base64";let o,a;return"base64"===s?o=String.raw`[A-Za-z0-9+\/]`:((0,i.assert)("base64url"===s),o=String.raw`[-_A-Za-z0-9]`),a=r?new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,n.pattern)(e,a)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/base64.js"}],[1011,{"./assert":1009,"./hex":1016,buffer:2430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function d(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function h(e){l(e);const t=d(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),r=t.length%2==0?t:`0${t}`,n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){const t=r.charCodeAt(2*e),i=r.charCodeAt(2*e+1),c=t-(t<o?s:a),u=i-(i<o?s:a);n[e]=16*c+u}return n}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=d,r.bytesToBigInt=h,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=h(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=y(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/bytes.js"}],[1012,{"./base64":1010,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),i=e("./base64");r.ChecksumStruct=(0,n.size)((0,i.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/checksum.js"}],[1013,{"./assert":1009,"./bytes":1011,"./hex":1016,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),i=e("./assert"),s=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),s.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),s.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,i.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.js"}],[1014,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),s(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){i.set(this,void 0),s(this,i,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,i,"f").size}[(i=new WeakMap,Symbol.iterator)](){return o(this,i,"f")[Symbol.iterator]()}entries(){return o(this,i,"f").entries()}forEach(e,t){return o(this,i,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}has(e){return o(this,i,"f").has(e)}keys(){return o(this,i,"f").keys()}values(){return o(this,i,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.js"}],[1015,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.js"}],[1016,{"./assert":1009,"./bytes":1011,"@noble/hashes/sha3":1805,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.isValidChecksumAddress=r.getChecksumAddress=r.isValidHexAddress=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.HexChecksumAddressStruct=r.HexAddressStruct=r.StrictHexStruct=r.HexStruct=void 0;const n=e("@noble/hashes/sha3"),i=e("superstruct"),s=e("./assert"),o=e("./bytes");function a(e){return(0,i.is)(e,r.HexStruct)}function c(e){return(0,i.is)(e,r.StrictHexStruct)}function u(e){(0,s.assert)((0,i.is)(e,r.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),a=d((0,o.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const r=a[t];return(0,s.assert)((0,i.is)(r,(0,i.string)()),"Hash shorter than address."),parseInt(r,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,i.is)(e,r.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}r.HexStruct=(0,i.pattern)((0,i.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,i.pattern)((0,i.string)(),/^0x[0-9a-f]+$/iu),r.HexAddressStruct=(0,i.pattern)((0,i.string)(),/^0x[0-9a-f]{40}$/u),r.HexChecksumAddressStruct=(0,i.pattern)((0,i.string)(),/^0x[0-9a-fA-F]{40}$/u),r.isHexString=a,r.isStrictHexString=c,r.assertIsHexString=function(e){(0,s.assert)(a(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,s.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},r.isValidHexAddress=function(e){return(0,i.is)(e,r.HexAddressStruct)||l(e)},r.getChecksumAddress=u,r.isValidChecksumAddress=l,r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=d}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.js"}],[1017,{"./assert":1009,"./base64":1010,"./bytes":1011,"./checksum":1012,"./coercers":1013,"./collections":1014,"./encryption-types":1015,"./hex":1016,"./json":1018,"./keyring":1019,"./logging":1020,"./misc":1021,"./number":1022,"./opaque":1023,"./time":1024,"./transaction-types":1025,"./versions":1026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./assert"),r),i(e("./base64"),r),i(e("./bytes"),r),i(e("./checksum"),r),i(e("./coercers"),r),i(e("./collections"),r),i(e("./encryption-types"),r),i(e("./hex"),r),i(e("./json"),r),i(e("./keyring"),r),i(e("./logging"),r),i(e("./misc"),r),i(e("./number"),r),i(e("./opaque"),r),i(e("./time"),r),i(e("./transaction-types"),r),i(e("./versions"),r)}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.js"}],[1018,{"./assert":1009,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.getSafeJson=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),i=e("./assert");function s(e){return(0,n.create)(e,r.JsonStruct)}r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.coerce)(r.UnsafeJsonStruct,(0,n.any)(),(e=>((0,i.assertStruct)(e,r.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),r.isValidJson=function(e){try{return s(e),!0}catch{return!1}},r.getSafeJson=s,r.getJsonSize=function(e){(0,i.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,i.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,i.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,i.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,i.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,i.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.js"}],[1019,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.js"}],[102,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:11,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=11;try{const e=function(e){const t=e;return delete t.TOSHash,delete t.isDisclaimerConfirmed,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #11${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/011.js"}],[1020,{debug:2654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const i=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return i.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.js"}],[1021,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(r.ESCAPE_CHARACTERS_REGEXP)??[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.js"}],[1022,{"./assert":1009,"./hex":1016},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),i=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,i.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,i.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,i.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,i.assertIsHexString)(e),BigInt((0,i.add0x)(e)))}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.js"}],[1023,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.js"}],[1024,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.js"}],[1025,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.js"}],[1026,{"./assert":1009,semver:3863,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),i=e("superstruct"),s=e("./assert");r.VersionStruct=(0,i.refine)((0,i.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,i.refine)((0,i.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,i.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,i.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,s.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,s.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/address-book-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/address-book-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.js"}],[1027,{"@metamask/base-controller":1058},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.AnnouncementController=void 0;const o=e("@metamask/base-controller"),a={announcements:{}},c={announcements:{persist:!0,anonymous:!0}};class u extends o.BaseController{constructor({messenger:e,state:t,allAnnouncements:r}){const o=Object.assign(Object.assign({},a),t);super({messenger:e,metadata:c,name:"AnnouncementController",state:o}),n.add(this),s(this,n,"m",i).call(this,r)}updateViewed(e){this.update((({announcements:t})=>{for(const r of Object.keys(e).map(Number))t[r].isShown=e[r]}))}}r.AnnouncementController=u,n=new WeakSet,i=function(e){this.update((t=>{Object.values(e).forEach((e=>{var r;t.announcements[e.id]=null!==(r=t.announcements[e.id])&&void 0!==r?r:Object.assign(Object.assign({},e),{isShown:!1})}))}))}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.js"}],[1028,{"./AnnouncementController":1027},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./AnnouncementController"),r)}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.js"}],[1029,{"./errors":1030,"@metamask/base-controller":1058,"@metamask/rpc-errors":1479,nanoid:1032},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p,m=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},g=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.ApprovalController=r.APPROVAL_TYPE_RESULT_SUCCESS=r.APPROVAL_TYPE_RESULT_ERROR=r.ORIGIN_METAMASK=void 0;const w=e("@metamask/base-controller"),b=e("@metamask/rpc-errors"),v=e("nanoid"),k=e("./errors");r.ORIGIN_METAMASK="metamask",r.APPROVAL_TYPE_RESULT_ERROR="result_error",r.APPROVAL_TYPE_RESULT_SUCCESS="result_success";const _="ApprovalController",S={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1},approvalFlows:{persist:!1,anonymous:!1}};class T extends w.BaseController{constructor({messenger:e,showApprovalRequest:t,state:r={},typesExcludedFromRateLimiting:c=[]}){super({name:_,metadata:S,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0,approvalFlows:[]}),r)}),n.add(this),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),g(this,i,new Map,"f"),g(this,s,new Map,"f"),g(this,o,t,"f"),g(this,a,c,"f"),this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${_}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${_}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${_}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${_}:rejectRequest`,this.reject.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateRequestState`,this.updateRequestState.bind(this)),this.messagingSystem.registerActionHandler(`${_}:startFlow`,this.startFlow.bind(this)),this.messagingSystem.registerActionHandler(`${_}:endFlow`,this.endFlow.bind(this)),this.messagingSystem.registerActionHandler(`${_}:setFlowLoadingText`,this.setFlowLoadingText.bind(this)),this.messagingSystem.registerActionHandler(`${_}:showSuccess`,this.success.bind(this)),this.messagingSystem.registerActionHandler(`${_}:showError`,this.error.bind(this))}addAndShowApprovalRequest(e){const t=y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult);return y(this,o,"f").call(this),t}add(e){return y(this,n,"m",c).call(this,e.origin,e.type,e.id,e.requestData,e.requestState,e.expectsResult)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:n}=e;if(r&&n)return(null===(t=y(this,s,"f").get(r))||void 0===t?void 0:t.get(n))||0;if(r)return Array.from((y(this,s,"f").get(r)||new Map).values()).reduce(((e,t)=>e+t),0);let i=0;for(const e of Object.values(this.state.pendingApprovals))e.type===n&&(i+=1);return i}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:r,origin:n,type:o}=e;if(r){if("string"!=typeof r)throw new Error("May not specify non-string id.");return y(this,i,"f").has(r)}if(o&&"string"!=typeof o)throw new Error("May not specify non-string type.");if(n){if("string"!=typeof n)throw new Error("May not specify non-string origin.");return o?Boolean(null===(t=y(this,s,"f").get(n))||void 0===t?void 0:t.get(o)):y(this,s,"f").has(n)}if(o){for(const e of Object.values(this.state.pendingApprovals))if(e.type===o)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t,r){const i=this.get(e),s=y(this,n,"m",f).call(this,e);return new Promise(((n,o)=>{const a={success:e=>n({value:e}),error:o};if((null==r?void 0:r.waitForResult)&&!i.expectsResult)return void o(new k.ApprovalRequestNoResultSupportError(e));const c=(null==r?void 0:r.waitForResult)?a:undefined,u=i.expectsResult?{value:t,resultCallbacks:c}:t;s.resolve(u),(null==r?void 0:r.waitForResult)||n({value:undefined})}))}reject(e,t){y(this,n,"m",f).call(this,e).reject(t)}clear(e){for(const t of y(this,i,"f").keys())this.reject(t,e);y(this,s,"f").clear(),this.update((e=>{e.pendingApprovals={},e.pendingApprovalCount=0}))}updateRequestState(e){if(!this.state.pendingApprovals[e.id])throw new k.ApprovalRequestNotFoundError(e.id);this.update((t=>{t.pendingApprovals[e.id].requestState=e.requestState}))}startFlow(e={}){var t,r;const n=null!==(t=e.id)&&void 0!==t?t:(0,v.nanoid)(),i=null!==(r=e.loadingText)&&void 0!==r?r:null;return this.update((e=>{e.approvalFlows.push({id:n,loadingText:i})})),!1!==e.show&&y(this,o,"f").call(this),{id:n,loadingText:i}}endFlow({id:e}){if(!this.state.approvalFlows.length)throw new k.NoApprovalFlowsError;if(e!==this.state.approvalFlows.slice(-1)[0].id)throw new k.EndInvalidFlowError(e,this.state.approvalFlows.map((e=>e.id)));this.update((e=>{e.approvalFlows.pop()}))}setFlowLoadingText({id:e,loadingText:t}){const r=this.state.approvalFlows.findIndex((t=>t.id===e));if(-1===r)throw new k.MissingApprovalFlowError(e);this.update((e=>{e.approvalFlows[r].loadingText=t}))}success(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_SUCCESS,e,{message:e.message,header:e.header,title:e.title,icon:e.icon}),{}}))}error(e={}){return m(this,void 0,void 0,(function*(){return yield y(this,n,"m",p).call(this,r.APPROVAL_TYPE_RESULT_ERROR,e,{error:e.error,header:e.header,title:e.title,icon:e.icon}),{}}))}}r.ApprovalController=T,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=function(e,t,r=(0,v.nanoid)(),s,o,c){if(y(this,n,"m",u).call(this,r,e,t,s,o),!y(this,a,"f").includes(t)&&this.has({origin:e,type:t}))throw b.rpcErrors.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((a,u)=>{y(this,i,"f").set(r,{resolve:a,reject:u}),y(this,n,"m",l).call(this,e,t),y(this,n,"m",d).call(this,r,e,t,s,o,c)}))},u=function(e,t,r,n,s){let o=null;if(e&&"string"==typeof e?y(this,i,"f").has(e)?o=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?r&&"string"==typeof r?n&&("object"!=typeof n||Array.isArray(n))?o="Request data must be a plain object if specified.":s&&("object"!=typeof s||Array.isArray(s))&&(o="Request state must be a plain object if specified."):o="Must specify non-empty string type.":o="Must specify non-empty string origin.":o="Must specify non-empty string id.",o)throw b.rpcErrors.internal(o)},l=function(e,t){let r=y(this,s,"f").get(e);r||(r=new Map,y(this,s,"f").set(e,r));const n=r.get(t)||0;r.set(t,n+1)},d=function(e,t,r,n,i,s){const o={id:e,origin:t,type:r,time:Date.now(),requestData:n||null,requestState:i||null,expectsResult:s||!1};this.update((t=>{t.pendingApprovals[e]=o,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},h=function(e){y(this,i,"f").delete(e);const{origin:t,type:r}=this.state.pendingApprovals[e],n=y(this,s,"f").get(t),o=this.getApprovalCount({origin:t}),a=n.get(r);1===o?y(this,s,"f").delete(t):n.set(r,a-1),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))},f=function(e){const t=y(this,i,"f").get(e);if(!t)throw new k.ApprovalRequestNotFoundError(e);return y(this,n,"m",h).call(this,e),t},p=function(e,t,n){return m(this,void 0,void 0,(function*(){try{yield this.addAndShowApprovalRequest({origin:r.ORIGIN_METAMASK,type:e,requestData:n})}catch(e){console.info("Failed to display result page",e)}finally{if(t.flowToEnd)try{this.endFlow({id:t.flowToEnd})}catch(e){console.info("Failed to end flow",{id:t.flowToEnd,error:e})}}}))},r.default=T}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/ApprovalController.js"}],[103,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:12,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=12;try{const e=function(e){const t=e;return t.NoticeController.noticesList.forEach((e=>{e.read&&(e.body="")})),t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #12${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/012.js"}],[1030,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingApprovalFlowError=r.EndInvalidFlowError=r.NoApprovalFlowsError=r.ApprovalRequestNoResultSupportError=r.ApprovalRequestNotFoundError=void 0;class n extends Error{constructor(e){super(`Approval request with id '${e}' not found.`)}}r.ApprovalRequestNotFoundError=n;class i extends Error{constructor(e){super(`Approval acceptance requested result but request with id '${e}' does not support it.`)}}r.ApprovalRequestNoResultSupportError=i;class s extends Error{constructor(){super("No approval flows found.")}}r.NoApprovalFlowsError=s;class o extends Error{constructor(e,t){super(`Attempted to end flow with id '${e}' which does not match current flow with id '${t.slice(-1)[0]}'. All Flows: ${t.join(", ")}`)}}r.EndInvalidFlowError=o;class a extends Error{constructor(e){super(`No approval flows found with id '${e}'.`)}}r.MissingApprovalFlowError=a}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/errors.js"}],[1031,{"./ApprovalController":1029,"./errors":1030},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./ApprovalController"),r),i(e("./errors"),r)}}},{package:"@metamask/approval-controller",file:"node_modules/@metamask/approval-controller/dist/index.js"}],[1032,{"./url-alphabet/index.cjs":1033},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let o="";for(;;){let t=r(i),a=i;for(;a--;)if(o+=e[t[a]&n]||"",o.length===s)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/index.browser.cjs"}],[1033,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/approval-controller>nanoid",file:"node_modules/@metamask/approval-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[104,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:13,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=13;try{const e=function(e){const t=e,{config:r}=t;r&&r.provider&&"testnet"===r.provider.type&&(t.config.provider.type="ropsten");return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #13${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/013.js"}],[105,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:14,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=14;try{const e=function(e){const t=e;return t.NetworkController={},t.NetworkController.provider=t.config.provider,delete t.config.provider,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #14${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/014.js"}],[1059,{"@metamask/utils":1769,buffer:2430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.isVaultUpdated=r.updateVaultWithDetail=r.updateVault=r.generateSalt=r.serializeBufferForStorage=r.serializeBufferFromStorage=r.keyFromPassword=r.exportKey=r.importKey=r.decryptWithKey=r.decryptWithDetail=r.decrypt=r.encryptWithKey=r.encryptWithDetail=r.encrypt=void 0;const n=e("@metamask/utils"),i="jwk",s="AES-GCM",o="utf-8",a={algorithm:"PBKDF2",params:{iterations:1e4}},c={algorithm:"PBKDF2",params:{iterations:9e5}};async function u(e,t,r,n=g(),i=c){const s=r||await m(e,n,!1,i),o=await d(s,t);return o.salt=n,JSON.stringify(o)}async function l(e,t,r=g(),n=c){const i=await m(e,r,!0,n),s=await p(i);return{vault:await u(e,t,i,r),exportedKeyString:s}}async function d(e,r){const n=JSON.stringify(r),i=t.from(n,o),a=global.crypto.getRandomValues(new Uint8Array(16)),c=b(e),u=await global.crypto.subtle.encrypt({name:s,iv:a},c,i),l=new Uint8Array(u),d=t.from(a).toString("base64"),h={data:t.from(l).toString("base64"),iv:d};return y(e)&&(h.keyMetadata=e.derivationOptions),h}async function h(e,t,r){const n=JSON.parse(t),{salt:i,keyMetadata:s}=n,o=b(r||await m(e,i,!1,s));return await f(o,n)}async function f(e,r){const n=t.from(r.data,"base64"),i=t.from(r.iv,"base64"),a=b(e);let c;try{const e=await crypto.subtle.decrypt({name:s,iv:i},a,n),r=new Uint8Array(e),u=t.from(r).toString(o);c=JSON.parse(u)}catch(e){throw new Error("Incorrect password")}return c}async function p(e){return y(e)?JSON.stringify({key:await window.crypto.subtle.exportKey(i,e.key),derivationOptions:e.derivationOptions}):JSON.stringify(await window.crypto.subtle.exportKey(i,e))}async function m(e,r,n=!1,i=a){const c=t.from(e,o),u=t.from(r,"base64"),l=await global.crypto.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),d=await global.crypto.subtle.deriveKey({name:"PBKDF2",salt:u,iterations:i.params.iterations,hash:"SHA-256"},l,{name:s,length:256},n,["encrypt","decrypt"]);return i?{key:d,derivationOptions:i}:d}function g(e=32){const t=new Uint8Array(e);global.crypto.getRandomValues(t);return btoa(String.fromCharCode.apply(null,t))}function y(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"key")&&(0,n.hasProperty)(e,"derivationOptions")&&e.key instanceof CryptoKey&&w(e.derivationOptions)}function w(e){return(0,n.isPlainObject)(e)&&(0,n.hasProperty)(e,"algorithm")&&(0,n.hasProperty)(e,"params")}function b(e){return y(e)?e.key:e}function v(e,t=c){const{keyMetadata:r}=JSON.parse(e);return w(r)&&r.algorithm===t.algorithm&&r.params.iterations===t.params.iterations}r.encrypt=u,r.encryptWithDetail=l,r.encryptWithKey=d,r.decrypt=h,r.decryptWithDetail=async function(e,t){const r=JSON.parse(t),{salt:n,keyMetadata:i}=r,s=await m(e,n,!0,i);return{exportedKeyString:await p(s),vault:await h(e,t,s),salt:n}},r.decryptWithKey=f,r.importKey=async function(e){const t=JSON.parse(e);return r=t,(0,n.isPlainObject)(r)&&(0,n.hasProperty)(r,"key")&&(0,n.hasProperty)(r,"derivationOptions")&&w(r.derivationOptions)?{key:await window.crypto.subtle.importKey(i,t.key,s,!0,["encrypt","decrypt"]),derivationOptions:t.derivationOptions}:await window.crypto.subtle.importKey(i,t,s,!0,["encrypt","decrypt"]);var r},r.exportKey=p,r.keyFromPassword=m,r.serializeBufferFromStorage=function(e){const t="0x"===e.slice(0,2)?e.slice(2):e,r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const n=t.substr(e,2);r[e/2]=parseInt(n,16)}return r},r.serializeBufferForStorage=function(e){let t="0x";return e.forEach((e=>{t+=function(e){let t=e.toString(16);for(;t.length<2;)t=`0${t}`;return t}(e)})),t},r.generateSalt=g,r.updateVault=async function(e,t,r=c){return v(e,r)?e:u(t,await h(t,e),undefined,undefined,r)},r.updateVaultWithDetail=async function(e,t,r=c){return v(e.vault,r)?e:l(t,await h(t,e.vault),undefined,r)},r.isVaultUpdated=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/browser-passworder",file:"node_modules/@metamask/browser-passworder/dist/index.js"}],[106,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:15,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=15;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=r;t.TransactionController.transactions=e.map((e=>e.err?("Gave up submitting tx."===e.err.message&&(e.status=n.TransactionStatus.failed),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #15${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/015.js"}],[1068,{"@ethereumjs/util":389,"@metamask/eth-sig-util":1102,"@metamask/scure-bip39":1482,"@metamask/scure-bip39/dist/wordlists/english":1483,"@metamask/utils":1769,buffer:2430,"ethereum-cryptography/hdkey":2765,"ethereum-cryptography/keccak":2766,"ethereum-cryptography/utils":2773},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){const{HDKey:n}=e("ethereum-cryptography/hdkey"),{keccak256:i}=e("ethereum-cryptography/keccak"),{bytesToHex:s}=e("ethereum-cryptography/utils"),{privateToPublic:o,publicToAddress:a,ecsign:c,arrToBufArr:u,bufferToHex:l}=e("@ethereumjs/util"),d=e("@metamask/scure-bip39"),{wordlist:h}=e("@metamask/scure-bip39/dist/wordlists/english"),{concatSig:f,decrypt:p,getEncryptionPublicKey:m,normalize:g,personalSign:y,signTypedData:w,SignTypedDataVersion:b}=e("@metamask/eth-sig-util"),{assertIsHexString:v,remove0x:k}=e("@metamask/utils"),_="HD Key Tree";class S{constructor(e={}){this.type=_,this._wallets=[],this.deserialize(e)}generateRandomMnemonic(){this._initFromMnemonic(d.generateMnemonic(h))}_uint8ArrayToString(e){return Array.from(new Uint16Array(new Uint8Array(e).buffer)).map((e=>h[e])).join(" ")}_stringToUint8Array(e){const t=e.split(" ").map((e=>h.indexOf(e)));return new Uint8Array(new Uint16Array(t).buffer)}_mnemonicToUint8Array(e){let t=e;if(e&&e.type&&"Buffer"===e.type&&(t=e.data),"string"==typeof t||r.isBuffer(t)||Array.isArray(t)){let e=t;return Array.isArray(t)?e=r.from(t).toString():r.isBuffer(t)&&(e=t.toString()),this._stringToUint8Array(e)}return t instanceof Object&&!(t instanceof Uint8Array)?Uint8Array.from(Object.values(t)):t}serialize(){const e=this._uint8ArrayToString(this.mnemonic),t=new TextEncoder("utf-8").encode(e);return Promise.resolve({mnemonic:Array.from(t),numberOfAccounts:this._wallets.length,hdPath:this.hdPath})}deserialize(e={}){if(e.numberOfAccounts&&!e.mnemonic)throw new Error("Eth-Hd-Keyring: Deserialize method cannot be called with an opts value for numberOfAccounts and no menmonic");if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");return this.opts=e,this._wallets=[],this.mnemonic=null,this.root=null,this.hdPath=e.hdPath||"m/44'/60'/0'/0",e.mnemonic&&this._initFromMnemonic(e.mnemonic),e.numberOfAccounts?this.addAccounts(e.numberOfAccounts):Promise.resolve([])}addAccounts(e=1){if(!this.root)throw new Error("Eth-Hd-Keyring: No secret recovery phrase provided");const t=this._wallets.length,r=[];for(let n=t;n<e+t;n++){const e=this.root.deriveChild(n);r.push(e),this._wallets.push(e)}const n=r.map((e=>this._addressfromPublicKey(e.publicKey)));return Promise.resolve(n)}getAccounts(){return this._wallets.map((e=>this._addressfromPublicKey(e.publicKey)))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=this._getWalletForAccount(e,{withAppKeyOrigin:t});return g(a(r.publicKey).toString("hex"))}async exportAccount(e,t={}){const r=this._getWalletForAccount(e,t);return s(r.privateKey)}async signTransaction(e,t,r={}){const n=this._getPrivateKeyFor(e,r),i=t.sign(n);return i===undefined?t:i}async signMessage(e,t,n={}){v(t);const i=k(t),s=this._getPrivateKeyFor(e,n),o=c(r.from(i,"hex"),s);return f(o.v,o.r,o.s)}async signPersonalMessage(e,t,n={}){const i=this._getPrivateKeyFor(e,n),s=r.from(i,"hex");return y({privateKey:s,data:t})}async decryptMessage(e,t){const n=this._getWalletForAccount(e),{privateKey:i}=n,s=r.from(i).toString("hex");return p({privateKey:s,encryptedData:t})}async signTypedData(e,t,r={version:b.V1}){const n=Object.keys(b).includes(r.version)?r.version:b.V1,i=this._getPrivateKeyFor(e,r);return w({privateKey:i,data:t,version:n})}removeAccount(e){const t=g(e);if(!this._wallets.map((({publicKey:e})=>this._addressfromPublicKey(e))).includes(t))throw new Error(`Address ${t} not found in this keyring`);this._wallets=this._wallets.filter((({publicKey:e})=>this._addressfromPublicKey(e)!==t))}async getEncryptionPublicKey(e,t={}){const r=this._getPrivateKeyFor(e,t);return m(r)}_getPrivateKeyFor(e,t={}){if(!e)throw new Error("Must specify address.");return this._getWalletForAccount(e,t).privateKey}_getWalletForAccount(e,t={}){const n=g(e);let s=this._wallets.find((({publicKey:e})=>this._addressfromPublicKey(e)===n));if(!s)throw new Error("HD Keyring - Unable to find matching address.");if(t.withAppKeyOrigin){const{privateKey:e}=s,n=r.from(t.withAppKeyOrigin,"utf8"),a=r.concat([e,n]),c=u(i(a,256));s={privateKey:c,publicKey:o(c)}}return s}_initFromMnemonic(e){if(this.root)throw new Error("Eth-Hd-Keyring: Secret recovery phrase already provided");this.mnemonic=this._mnemonicToUint8Array(e);if(!d.validateMnemonic(this.mnemonic,h))throw new Error("Eth-Hd-Keyring: Invalid secret recovery phrase provided");const t=d.mnemonicToSeedSync(this.mnemonic,h);this.hdWallet=n.fromMasterSeed(t),this.root=this.hdWallet.derive(this.hdPath)}_addressfromPublicKey(e){return l(a(r.from(e),!0)).toLowerCase()}}S.type=_,t.exports=S}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-hd-keyring",file:"node_modules/@metamask/eth-hd-keyring/index.js"}],[1069,{"./fetch-config-from-req":1071,"./logging-utils":1073,"@metamask/json-rpc-engine":1197,"@metamask/rpc-errors":1479,"node-fetch":3503},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createInfuraMiddleware=void 0;const i=e("@metamask/json-rpc-engine"),s=e("@metamask/rpc-errors"),o=n(e("node-fetch")),a=e("./fetch-config-from-req"),c=e("./logging-utils"),u=(0,c.createModuleLogger)(c.projectLogger,"create-infura-middleware"),l=["Gateway timeout","ETIMEDOUT","ECONNRESET","SyntaxError"];async function d(e,t,r,n,i,c){const{fetchUrl:u,fetchParams:l}=(0,a.fetchConfigFromReq)({network:e,projectId:t,extraHeaders:r,req:n,source:c}),d=await(0,o.default)(u,l),f=await d.text();if(!d.ok)switch(d.status){case 405:throw s.rpcErrors.methodNotFound();case 429:throw h("Request is being rate limited.");case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",h(e)}();default:throw h(f)}if("eth_getBlockByNumber"===n.method&&"Not Found"===f)return void(i.result=null);const p=JSON.parse(f);i.result=p.result,i.error=p.error}function h(e){return s.rpcErrors.internal(e)}function f(e){const t=e.toString();return l.some((e=>t.includes(e)))}async function p(e){return new Promise((t=>{setTimeout(t,e)}))}r.createInfuraMiddleware=function({network:e="mainnet",maxAttempts:t=5,source:r,projectId:n,headers:s={}}){if(!n||"string"!=typeof n)throw new Error(`Invalid value for 'projectId': "${n}"`);if(!s||"object"!=typeof s)throw new Error(`Invalid value for 'headers': "${s}"`);if(!t)throw new Error(`Invalid value for 'maxAttempts': "${t}" (${typeof t})`);return(0,i.createAsyncMiddleware)((async(i,o)=>{for(let a=1;a<=t;a++)try{u("Attempting request to Infura. network = %o, projectId = %s, headers = %o, req = %o",e,n,s,i),await d(e,n,s,i,o,r);break}catch(e){if(!f(e))throw u("Non-retriable request error encountered. req = %o, res = %o, error = %o",i,o,e),e;if(!(t-a)){u("Retriable request error encountered, but exceeded max attempts. req = %o, res = %o, error = %o",i,o,e);const t=`InfuraProvider - cannot complete request. All retries exhausted.\nOriginal Error:\n${e.toString()}\n\n`;throw new Error(t)}u("Retriable request error encountered. req = %o, res = %o, error = %o",i,o,e),u("Waiting 1 second to try again..."),await p(1e3)}}))}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-infura-middleware.js"}],[107,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:16,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=16;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>e.err?("transaction with the same hash was already imported."===e.err&&(e.status=n.TransactionStatus.submitted,delete e.err),e):e))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #16${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/016.js"}],[1070,{"./create-infura-middleware":1069,"@metamask/eth-json-rpc-provider":1088,"@metamask/json-rpc-engine":1197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createProvider=void 0;const n=e("@metamask/eth-json-rpc-provider"),i=e("@metamask/json-rpc-engine"),s=e("./create-infura-middleware");r.createProvider=function(e){const t=new i.JsonRpcEngine;return t.push((0,s.createInfuraMiddleware)(e)),(0,n.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/create-provider.js"}],[1071,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return{id:e.id,jsonrpc:e.jsonrpc,method:e.method,params:e.params}}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchConfigFromReq=void 0,r.fetchConfigFromReq=function({network:e,projectId:t,extraHeaders:r={},req:i,source:s}){const o=i.origin||"internal",a=Object.assign({},r,{Accept:"application/json","Content-Type":"application/json"});return s&&(a["Infura-Source"]=`${s}/${o}`),{fetchUrl:`https://${e}.infura.io/v3/${t}`,fetchParams:{method:"POST",headers:a,body:JSON.stringify(n(i))}}}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/fetch-config-from-req.js"}],[1072,{"./create-infura-middleware":1069,"./create-provider":1070,"./fetch-config-from-req":1071},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./create-infura-middleware"),r),i(e("./fetch-config-from-req"),r),i(e("./create-provider"),r)}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/index.js"}],[1073,{"@metamask/utils":1769},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-infura")}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-infura",file:"node_modules/@metamask/eth-json-rpc-infura/dist/logging-utils.js"}],[1074,{"./logging-utils":1081,"./utils/cache":1084,"@metamask/json-rpc-engine":1197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./logging-utils"),s=e("./utils/cache"),o=(0,i.createModuleLogger)(i.projectLogger,"block-cache"),a=[undefined,null,"<nil>"];class c{constructor(){this.cache={}}getBlockCache(e){const t=Number.parseInt(e,16);let r=this.cache[t];if(!r){const e={};this.cache[t]=e,r=e}return r}async get(e,t){const r=this.getBlockCache(t),n=(0,s.cacheIdentifierForRequest)(e,!0);return n?r[n]:undefined}async set(e,t,r){if(!this.canCacheResult(e,r))return;const n=(0,s.cacheIdentifierForRequest)(e,!0);if(!n)return;this.getBlockCache(t)[n]=r}canCacheRequest(e){if(!(0,s.canCache)(e.method))return!1;return"pending"!==(0,s.blockTagForRequest)(e)}canCacheResult(e,t){return!a.includes(t)&&!(e.method&&["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||"0x0000000000000000000000000000000000000000000000000000000000000000"===t.blockHash))}clearBefore(e){const t=Number.parseInt(e,16);Object.keys(this.cache).map(Number).filter((e=>e<t)).forEach((e=>delete this.cache[e]))}}r.createBlockCacheMiddleware=function({blockTracker:e}={}){if(!e)throw new Error("createBlockCacheMiddleware - No PollingBlockTracker specified");const t=new c,r={[s.CacheStrategy.Permanent]:t,[s.CacheStrategy.Block]:t,[s.CacheStrategy.Fork]:t,[s.CacheStrategy.Never]:undefined};return(0,n.createAsyncMiddleware)((async(n,i,a)=>{if(n.skipCache)return a();const c=(0,s.cacheTypeForMethod)(n.method),u=r[c];if(!u)return a();if(!u.canCacheRequest(n))return a();const l=(0,s.blockTagForRequest)(n),d=l&&"string"==typeof l?l:"latest";let h;if(o("blockTag = %o, req = %o",d,n),"earliest"===d)h="0x00";else if("latest"===d){o("Fetching latest block number to determine cache key");const r=await e.getLatestBlock();o("Clearing values stored under block numbers before %o",r),t.clearBefore(r),h=r}else h=d;const f=await u.get(n,h);return f===undefined?(o("No cache stored under block number %o, carrying request forward",h),await a(),o("Populating cache with",i),await u.set(n,h,i.result)):(o("Cache hit, reusing cache result stored under block number %o",h),i.result=f),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-cache.js"}],[1075,{"./utils/cache":1084,"@metamask/json-rpc-engine":1197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefRewriteMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./utils/cache");r.createBlockRefRewriteMiddleware=function({blockTracker:e}={}){if(!e)throw Error('BlockRefRewriteMiddleware - mandatory "blockTracker" option is missing.');return(0,n.createAsyncMiddleware)((async(t,r,n)=>{const s=(0,i.blockTagParamIndex)(t.method);if(s===undefined)return n();if("latest"!==(Array.isArray(t.params)&&t.params[s]?t.params[s]:"latest"))return n();const o=await e.getLatestBlock();return Array.isArray(t.params)&&(t.params[s]=o),n()}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref-rewrite.js"}],[1076,{"./logging-utils":1081,"./utils/cache":1084,"@metamask/json-rpc-engine":1197,"klona/full":3251,pify:3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockRefMiddleware=void 0;const i=e("@metamask/json-rpc-engine"),s=e("klona/full"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=(0,a.createModuleLogger)(a.projectLogger,"block-ref");r.createBlockRefMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('BlockRefMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('BlockRefMiddleware - mandatory "blockTracker" option is missing.');return(0,i.createAsyncMiddleware)((async(r,n,i)=>{var a;const l=(0,c.blockTagParamIndex)(r.method);if(l===undefined)return i();if("latest"!==(Array.isArray(r.params)&&null!==(a=r.params[l])&&void 0!==a?a:"latest"))return u('blockRef is not "latest", carrying request forward'),i();const d=await t.getLatestBlock();u(`blockRef is "latest", setting param ${l} to latest block ${d}`);const h=(0,s.klona)(r);Array.isArray(h.params)&&(h.params[l]=d),u("Performing another request %o",h);const f=await(0,o.default)(e.sendAsync).call(e,h);return n.result=f.result,n.error=f.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-ref.js"}],[1077,{"./logging-utils":1081,"@metamask/json-rpc-engine":1197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createBlockTrackerInspectorMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./logging-utils"),s=(0,i.createModuleLogger)(i.projectLogger,"block-tracker-inspector"),o=["eth_getTransactionByHash","eth_getTransactionReceipt"];function a(e){const{result:t}=e;return t&&"object"==typeof t&&(r=t,n="blockNumber",Object.hasOwnProperty.call(r,n))&&"string"==typeof t.blockNumber?t.blockNumber:undefined;var r,n}r.createBlockTrackerInspectorMiddleware=function({blockTracker:e}){return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(!o.includes(t.method))return n();await n();const i=a(r);if(!i)return undefined;s("res.result.blockNumber exists, proceeding. res = %o",r);return Number.parseInt(i,16)>Number.parseInt(e.getCurrentBlock(),16)&&(s("blockNumber from response is greater than current block number, refreshing current block number"),await e.checkForLatestBlock()),undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/block-tracker-inspector.js"}],[1078,{"./utils/timeout":1086,"@metamask/json-rpc-engine":1197,"@metamask/rpc-errors":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createFetchConfigFromReq=r.createFetchMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors"),s=e("./utils/timeout"),o=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function a(e){switch(e.status){case 405:throw i.rpcErrors.methodNotFound();case 418:throw i.rpcErrors.internal({message:"Request is being rate limited."});case 503:case 504:throw function(){let e="Gateway timeout. The request took too long to process. ";return e+="This can happen when querying logs over too wide a block range.",i.rpcErrors.internal({message:e})}()}}function c(e,t){if(200!==e.status)throw i.rpcErrors.internal({message:`Non-200 status code: '${e.status}'`,data:t});if(t.error)throw i.rpcErrors.internal({data:t.error});return t.result}function u({btoa:e,req:t,rpcUrl:r,originHttpHeaderKey:n}){const i=new URL(r),s=function(e){let t="";t+=e.protocol,t+=`//${e.hostname}`,e.port&&(t+=`:${e.port}`);return t+=`${e.pathname}`,t+=`${e.search}`,t}(i),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},a=t.origin,c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};if(i.username&&i.password){const t=e(`${i.username}:${i.password}`);c.headers.Authorization=`Basic ${t}`}return n&&a&&(c.headers[n]=a),{fetchUrl:s,fetchParams:c}}r.createFetchMiddleware=function({btoa:e,fetch:t,rpcUrl:r,originHttpHeaderKey:i}){return(0,n.createAsyncMiddleware)((async(n,l,d)=>{const{fetchUrl:h,fetchParams:f}=u({btoa:e,req:n,rpcUrl:r,originHttpHeaderKey:i});for(let e=0;e<5;e++){try{const e=await t(h,f);a(e);const r=await e.text();let n;try{n=JSON.parse(r)}catch(e){throw new Error(`FetchMiddleware - failed to parse response body: "${r}"`)}const i=c(e,n);return void(l.result=i)}catch(e){const t=e.toString();if(!o.some((e=>t.includes(e))))throw e}await(0,s.timeout)(1e3)}}))},r.createFetchConfigFromReq=u}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/fetch.js"}],[1079,{"./block-cache":1074,"./block-ref":1076,"./block-ref-rewrite":1075,"./block-tracker-inspector":1077,"./fetch":1078,"./inflight-cache":1080,"./providerAsMiddleware":1082,"./retryOnEmpty":1083,"./wallet":1087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./block-cache"),r),i(e("./block-ref-rewrite"),r),i(e("./block-ref"),r),i(e("./block-tracker-inspector"),r),i(e("./fetch"),r),i(e("./inflight-cache"),r),i(e("./providerAsMiddleware"),r),i(e("./retryOnEmpty"),r),i(e("./wallet"),r)}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/index.js"}],[108,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:17,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=17;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(!e.status===n.TransactionStatus.failed||e.retryCount>0&&e.retryCount<2&&(e.status=n.TransactionStatus.submitted,delete e.err),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #17${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/017.js"}],[1080,{"./logging-utils":1081,"./utils/cache":1084,"@metamask/json-rpc-engine":1197,"klona/full":3251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createInflightCacheMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("klona/full"),s=e("./logging-utils"),o=e("./utils/cache"),a=(0,s.createModuleLogger)(s.projectLogger,"inflight-cache");r.createInflightCacheMiddleware=function(){const e={};return(0,n.createAsyncMiddleware)((async(t,r,n)=>{if(t.skipCache)return n();const s=(0,o.cacheIdentifierForRequest)(t);if(!s)return a("Request is not cacheable, proceeding. req = %o",t),n();let c=e[s];return c?(a("Running %i handler(s) for request %o",c.length,t),await async function(e,t){const{resolve:r,promise:n}=function(){let e;const t=new Promise((t=>{e=t}));return{resolve:e,promise:t}}();return t.push((t=>{e.result=(0,i.klona)(t.result),e.error=(0,i.klona)(t.error),r()})),n}(r,c),undefined):(c=[],e[s]=c,a("Carrying original request forward %o",t),await n(),delete e[s],a("Running %i collected handler(s) for request %o",c.length,t),function(e,t){setTimeout((()=>{t.forEach((t=>{try{t(e)}catch(e){console.error(e)}}))}))}(r,c),undefined)}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/inflight-cache.js"}],[1081,{"@metamask/utils":1769},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("eth-json-rpc-middleware")}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/logging-utils.js"}],[1082,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ethersProviderAsMiddleware=r.providerAsMiddleware=void 0,r.providerAsMiddleware=function(e){return(t,r,n,i)=>{e.sendAsync(t,((e,t)=>e instanceof Error?i(e):(Object.assign(r,t),i())))}},r.ethersProviderAsMiddleware=function(e){return(t,r,n,i)=>{e.send(t,((e,t)=>e?i(e):(Object.assign(r,t),i())))}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/providerAsMiddleware.js"}],[1083,{"./logging-utils":1081,"./utils/cache":1084,"./utils/error":1085,"./utils/timeout":1086,"@metamask/json-rpc-engine":1197,"klona/full":3251,pify:3554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createRetryOnEmptyMiddleware=void 0;const i=e("@metamask/json-rpc-engine"),s=e("klona/full"),o=n(e("pify")),a=e("./logging-utils"),c=e("./utils/cache"),u=e("./utils/error"),l=e("./utils/timeout"),d=(0,a.createModuleLogger)(a.projectLogger,"retry-on-empty"),h=[undefined,null,"<nil>"];r.createRetryOnEmptyMiddleware=function({provider:e,blockTracker:t}={}){if(!e)throw Error('RetryOnEmptyMiddleware - mandatory "provider" option is missing.');if(!t)throw Error('RetryOnEmptyMiddleware - mandatory "blockTracker" option is missing.');return(0,i.createAsyncMiddleware)((async(r,n,i)=>{const a=(0,c.blockTagParamIndex)(r.method);if(a===undefined)return i();let f=Array.isArray(r.params)&&r.params[a]?r.params[a]:undefined;if(f===undefined&&(f="latest"),["latest","pending"].includes(f))return i();const p=Number.parseInt(f.slice(2),16);if(Number.isNaN(p))return i();const m=await t.getLatestBlock(),g=Number.parseInt(m.slice(2),16);if(p>g)return d("Requested block number %o is higher than latest block number %o, falling through to original request",p,g),i();d("Requested block number %o is not higher than latest block number %o, trying request until non-empty response is received",p,g);const y=(0,s.klona)(r),w=await async function(e,t){for(let r=0;r<e;r++)try{return await t()}catch(e){if((0,u.isExecutionRevertedError)(e))throw e;d("(call %i) Request failed, waiting 1s to retry again...",r+1),await(0,l.timeout)(1e3)}throw d("Retries exhausted"),new Error("RetryOnEmptyMiddleware - retries exhausted")}(10,(async()=>{d("Performing request %o",y);const t=await(0,o.default)(e.sendAsync).call(e,y);if(d("Response is %o",t),h.includes(t.result))throw new Error(`RetryOnEmptyMiddleware - empty response "${JSON.stringify(t)}" for request "${JSON.stringify(y)}"`);return t}));return d("Copying result %o and error %o",w.result,w.error),n.result=w.result,n.error=w.error,undefined}))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/retryOnEmpty.js"}],[1084,{"safe-stable-stringify":3825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.cacheTypeForMethod=r.blockTagParamIndex=r.blockTagForRequest=r.canCache=r.cacheIdentifierForRequest=r.CacheStrategy=void 0;const n=(0,e("safe-stable-stringify").configure)({bigint:!1,circularValue:Error});var i;function s(e){return a(e)!==i.Never}function o(e){switch(e){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return undefined}}function a(e){switch(e){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return i.Permanent;case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return i.Fork;case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return i.Block;default:return i.Never}}!function(e){e.Block="block",e.Fork="fork",e.Never="never",e.Permanent="perma"}(i=r.CacheStrategy||(r.CacheStrategy={})),r.cacheIdentifierForRequest=function(e,t){var r;const i=t?function(e){if(!e.params)return[];const t=o(e.method);if(t===undefined||!Array.isArray(e.params)||t>=e.params.length)return e.params;if("eth_getBlockByNumber"===e.method)return e.params.slice(1);return e.params.slice(0,t)}(e):null!==(r=e.params)&&void 0!==r?r:[];return s(e.method)?`${e.method}:${n(i)}`:null},r.canCache=s,r.blockTagForRequest=function(e){if(!e.params)return undefined;const t=o(e.method);return t===undefined||!Array.isArray(e.params)||t>=e.params.length?undefined:e.params[t]},r.blockTagParamIndex=o,r.cacheTypeForMethod=a}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/cache.js"}],[1085,{"@metamask/rpc-errors":1479,"@metamask/utils":1769},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.isExecutionRevertedError=void 0;const n=e("@metamask/rpc-errors"),i=e("@metamask/utils");r.isExecutionRevertedError=function(e){return(0,i.isJsonRpcError)(e)&&e.code===n.errorCodes.rpc.invalidInput&&"execution reverted"===e.message}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/error.js"}],[1086,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeout=void 0,r.timeout=async function(e){return new Promise((t=>setTimeout(t,e)))}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/utils/timeout.js"}],[1087,{"@metamask/eth-sig-util":1102,"@metamask/json-rpc-engine":1197,"@metamask/rpc-errors":1479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.createWalletMiddleware=void 0;const o=s(e("@metamask/eth-sig-util")),a=e("@metamask/json-rpc-engine"),c=e("@metamask/rpc-errors");function u(e){return 42===e.length}r.createWalletMiddleware=function({getAccounts:e,processDecryptMessage:t,processEncryptionPublicKey:r,processEthSignMessage:n,processPersonalMessage:i,processTransaction:s,processSignTransaction:l,processTypedMessage:d,processTypedMessageV3:h,processTypedMessageV4:f}){if(!e)throw new Error("opts.getAccounts is required");return(0,a.createScaffoldMiddleware)({eth_accounts:(0,a.createAsyncMiddleware)((async function(t,r){r.result=await e(t)})),eth_coinbase:(0,a.createAsyncMiddleware)((async function(t,r){const n=await e(t);r.result=n[0]||null})),eth_sendTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!s)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await p((null==r?void 0:r.from)||"",e)});t.result=await s(n,e)})),eth_signTransaction:(0,a.createAsyncMiddleware)((async function(e,t){if(!l)throw c.rpcErrors.methodNotSupported();if(!(e.params&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const r=e.params[0],n=Object.assign(Object.assign({},r),{from:await p((null==r?void 0:r.from)||"",e)});t.result=await l(n,e)})),eth_sign:(0,a.createAsyncMiddleware)((async function(e,t){if(!n)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,i=await p(r[0],e),s=r[1],o=r[2]||{},a=Object.assign(Object.assign({},o),{from:i,data:s});t.result=await n(a,e)})),eth_signTypedData:(0,a.createAsyncMiddleware)((async function(e,t){if(!d)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=await p(r[1],e),s=r[2]||{},o=Object.assign(Object.assign({},s),{from:i,data:n});t.result=await d(o,e,"V1")})),eth_signTypedData_v3:(0,a.createAsyncMiddleware)((async function(e,t){if(!h)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await p(r[0],e),i=r[1],s={data:i,from:n,version:"V3"};t.result=await h(s,e,"V3")})),eth_signTypedData_v4:(0,a.createAsyncMiddleware)((async function(e,t){if(!f)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=await p(r[0],e),i=r[1],s={data:i,from:n,version:"V4"};t.result=await f(s,e,"V4")})),personal_sign:(0,a.createAsyncMiddleware)((async function(e,t){if(!i)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],s=r[1],o=r[2]||{};let a,l;if(u(n)&&!u(s)){let e="The eth_personalSign method requires params ordered ";e+="[message, address]. This was previously handled incorrectly, ",e+="and has been corrected automatically. ",e+="Please switch this param order for smooth behavior in the future.",t.warning=e,a=n,l=s}else l=n,a=s;a=await p(a,e);const d=Object.assign(Object.assign({},o),{from:a,data:l});t.result=await i(d,e)})),eth_getEncryptionPublicKey:(0,a.createAsyncMiddleware)((async function(e,t){if(!r)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,i=await p(n[0],e);t.result=await r(i,e)})),eth_decrypt:(0,a.createAsyncMiddleware)((async function(e,r){if(!t)throw c.rpcErrors.methodNotSupported();if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=1))throw c.rpcErrors.invalidInput();const n=e.params,i=n[0],s=await p(n[1],e),o=n[2]||{},a=Object.assign(Object.assign({},o),{from:s,data:i});r.result=await t(a,e)})),personal_ecRecover:(0,a.createAsyncMiddleware)((async function(e,t){if(!((null==e?void 0:e.params)&&Array.isArray(e.params)&&e.params.length>=2))throw c.rpcErrors.invalidInput();const r=e.params,n=r[0],i=r[1],s=o.recoverPersonalSignature({data:n,signature:i});t.result=s}))});async function p(t,r){if("string"==typeof t&&t.length>0&&u(t)){const n=(await e(r)).map((e=>e.toLowerCase())),i=t.toLowerCase();if(n.includes(i))return i;throw c.providerErrors.unauthorized()}throw c.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}}}}},{package:"@metamask/eth-json-rpc-middleware",file:"node_modules/@metamask/eth-json-rpc-middleware/dist/wallet.js"}],[1088,{"./provider-from-engine":1089,"./provider-from-middleware":1090,"./safe-event-emitter-provider":1091},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SafeEventEmitterProvider=void 0,i(e("./provider-from-engine"),r),i(e("./provider-from-middleware"),r);var s=e("./safe-event-emitter-provider");Object.defineProperty(r,"SafeEventEmitterProvider",{enumerable:!0,get:function(){return s.SafeEventEmitterProvider}})}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/index.js"}],[1089,{"./safe-event-emitter-provider":1091},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromEngine=void 0;const n=e("./safe-event-emitter-provider");r.providerFromEngine=function(e){return new n.SafeEventEmitterProvider({engine:e})}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-engine.js"}],[109,{"fast-json-patch":2872,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("fast-json-patch"))&&n.__esModule?n:{default:n},s=e("lodash");r.default={version:18,migrate(e){const t=(0,s.cloneDeep)(e);t.meta.version=18;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>{if(!e.history||0===e.history.length){const t=function(e){const t={...e};return delete t.history,(0,s.cloneDeep)(t)}(e);return e.history=[t],e}const t=(r=e.history,r.map(((e,t)=>0===t?e:function(e,t,r){const n=i.default.compare(e,t);return n[0]&&(r&&(n[0].note=r),n[0].timestamp=Date.now()),n}(r[t-1],e)))).filter((e=>!Array.isArray(e)||e.length>0));var r;return e.history=t,e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #18${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/018.js"}],[1090,{"./provider-from-engine":1089,"@metamask/json-rpc-engine":1197},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.providerFromMiddleware=void 0;const n=e("@metamask/json-rpc-engine"),i=e("./provider-from-engine");r.providerFromMiddleware=function(e){const t=new n.JsonRpcEngine;return t.push(e),(0,i.providerFromEngine)(t)}}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/provider-from-middleware.js"}],[1091,{"@metamask/safe-event-emitter":1092},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SafeEventEmitterProvider=void 0;const a=o(e("@metamask/safe-event-emitter"));class c extends a.default{constructor({engine:e}){super(),n.set(this,void 0),this.sendAsync=(e,t)=>{s(this,n,"f").handle(e,t)},this.send=(e,t)=>{if("function"!=typeof t)throw new Error('Must provide callback to "send" method.');s(this,n,"f").handle(e,t)},i(this,n,e,"f"),e.on&&e.on("notification",(e=>{this.emit("data",null,e)}))}}r.SafeEventEmitterProvider=c,n=new WeakMap}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider",file:"node_modules/@metamask/eth-json-rpc-provider/dist/safe-event-emitter-provider.js"}],[1092,{events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("events");function i(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class s extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(n!==undefined)r=r&&n.error===undefined;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const s=n[e];if(s===undefined)return!1;if("function"==typeof s)i(s,this,t);else{const e=s.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let n=0;n<e;n+=1)i(r[n],this,t)}return!0}}r.default=s}}},{package:"@metamask/network-controller>@metamask/eth-json-rpc-provider>@metamask/safe-event-emitter",file:"node_modules/@metamask/eth-json-rpc-provider/node_modules/@metamask/safe-event-emitter/index.js"}],[1093,{"./constants":1094,"@metamask/browser-passworder":1059,"@metamask/eth-hd-keyring":1068,"@metamask/eth-sig-util":1102,"@metamask/eth-simple-keyring":1106,"@metamask/obs-store":1395,"@metamask/utils":1769,events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),f=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&h(t,e,r);return f(t,e),t},m=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},g=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.keyringBuilderFactory=r.KeyringController=void 0;const w=p(e("@metamask/browser-passworder")),b=y(e("@metamask/eth-hd-keyring")),v=e("@metamask/eth-sig-util"),k=y(e("@metamask/eth-simple-keyring")),_=e("@metamask/obs-store"),S=e("@metamask/utils"),T=e("events"),E=e("./constants"),j=[A(k.default),A(b.default)];class M extends T.EventEmitter{constructor({keyringBuilders:e,cacheEncryptionKey:t,initState:r={},encryptor:o=w}){super(),n.add(this),i.set(this,void 0),s.set(this,void 0),this.keyringBuilders=e?j.concat(e):j,this.store=new _.ObservableStore(r),this.memStore=new _.ObservableStore({isUnlocked:!1,keyringTypes:this.keyringBuilders.map((e=>e.type)),keyrings:[]}),m(this,i,o,"f"),this.keyrings=[],this.unsupportedKeyrings=[],m(this,s,Boolean(t),"f"),g(this,s,"f")&&C(o)}fullUpdate(){return this.emit("update",this.memStore.getState()),this.memStore.getState()}async createNewVaultAndKeychain(e){return this.password=e,await g(this,n,"m",o).call(this),g(this,n,"m",l).call(this),this.fullUpdate()}async createNewVaultAndRestore(e,t){if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);this.password=e,await g(this,n,"m",c).call(this);const r=await this.addNewKeyring(E.KeyringType.HD,{mnemonic:t,numberOfAccounts:1}),[i]=await r.getAccounts();if(!i)throw new Error(E.KeyringControllerError.NoFirstAccount);return g(this,n,"m",l).call(this),this.fullUpdate()}async setLocked(){return delete this.password,this.memStore.putState({isUnlocked:!1,keyrings:[]}),await g(this,n,"m",c).call(this),this.emit("lock"),this.fullUpdate()}async submitPassword(e){return this.keyrings=await this.unlockKeyrings(e),g(this,n,"m",l).call(this),this.fullUpdate()}async submitEncryptionKey(e,t){return this.keyrings=await this.unlockKeyrings(undefined,e,t),g(this,n,"m",l).call(this),this.fullUpdate()}async verifyPassword(e){const t=this.store.getState().vault;if(!t)throw new Error(E.KeyringControllerError.VaultError);await g(this,i,"f").decrypt(e,t)}async addNewAccount(e){return(await e.addAccounts(1)).forEach((e=>{this.emit("newAccount",e)})),await this.persistAllKeyrings(),this.fullUpdate()}async exportAccount(e){const t=await this.getKeyringForAccount(e);if(!t.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAccount);return await t.exportAccount((0,v.normalize)(e))}async removeAccount(e){const t=await this.getKeyringForAccount(e);if(!t.removeAccount)throw new Error(E.KeyringControllerError.UnsupportedRemoveAccount);await t.removeAccount(e),this.emit("removedAccount",e);return 0===(await t.getAccounts()).length&&await this.removeEmptyKeyrings(),await this.persistAllKeyrings(),this.fullUpdate()}async getAccounts(){const e=this.keyrings||[];return(await Promise.all(e.map((async e=>e.getAccounts())))).reduce(((e,t)=>e.concat(t)),[]).map(v.normalize)}getKeyringBuilderForType(e){return this.keyringBuilders.find((t=>t.type===e))}async updateMemStoreKeyrings(){const e=await Promise.all(this.keyrings.map(P));this.memStore.updateState({keyrings:e})}async signTransaction(e,t,r={}){const n=(0,v.normalize)(t),i=await this.getKeyringForAccount(n);if(!i.signTransaction)throw new Error(E.KeyringControllerError.UnsupportedSignTransaction);return await i.signTransaction(n,e,r)}async signMessage(e,t={}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signMessage)throw new Error(E.KeyringControllerError.UnsupportedSignMessage);return await n.signMessage(r,e.data,t)}async signPersonalMessage(e,t={}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signPersonalMessage)throw new Error(E.KeyringControllerError.UnsupportedSignPersonalMessage);const i=(0,v.normalize)(e.data);return await n.signPersonalMessage(r,i,t)}async getEncryptionPublicKey(e,t={}){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(e);if(!n.getEncryptionPublicKey)throw new Error(E.KeyringControllerError.UnsupportedGetEncryptionPublicKey);return await n.getEncryptionPublicKey(r,t)}async decryptMessage(e){const t=(0,v.normalize)(e.from),r=await this.getKeyringForAccount(t);if(!r.decryptMessage)throw new Error(E.KeyringControllerError.UnsupportedDecryptMessage);return r.decryptMessage(t,e.data)}async signTypedMessage(e,t={version:"V1"}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signTypedData)throw new Error(E.KeyringControllerError.UnsupportedSignTypedMessage);return n.signTypedData(r,e.data,t)}async getAppKeyAddress(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.getAppKeyAddress)throw new Error(E.KeyringControllerError.UnsupportedGetAppKeyAddress);return n.getAppKeyAddress(r,t)}async exportAppKeyForAddress(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAppKeyForAddress);return n.exportAccount(r,{withAppKeyOrigin:t})}async addNewKeyring(e,t){const r=await g(this,n,"m",d).call(this,e,t);if(!r)throw new Error(E.KeyringControllerError.NoKeyring);if(!(e!==E.KeyringType.HD||(0,S.isObject)(t)&&t.mnemonic)){if(!r.generateRandomMnemonic)throw new Error(E.KeyringControllerError.UnsupportedGenerateRandomMnemonic);r.generateRandomMnemonic(),await r.addAccounts(1)}const i=await r.getAccounts();return await this.checkForDuplicate(e,i),this.keyrings.push(r),await this.persistAllKeyrings(),this.fullUpdate(),r}async removeEmptyKeyrings(){const e=[];await Promise.all(this.keyrings.map((async t=>{(await t.getAccounts()).length>0?e.push(t):await g(this,n,"m",u).call(this,t)}))),this.keyrings=e}async checkForDuplicate(e,t){const r=await this.getAccounts();if(e===E.KeyringType.Simple){if(Boolean(r.find((e=>t[0]&&(e===t[0]||e===(0,S.remove0x)(t[0]))))))throw new Error(E.KeyringControllerError.DuplicatedAccount);return t}return t}async getKeyringForAccount(e){var t;const r=(0,v.normalize)(e),n=await Promise.all(this.keyrings.map((async e=>Promise.all([e,e.getAccounts()])))),i=n.filter((e=>e[1].map(v.normalize).includes(r)));if(i.length&&(null===(t=i[0])||void 0===t?void 0:t.length))return i[0][0];let s="";throw(0,S.isValidHexAddress)(r)?n.length?i.length||(s="There are keyrings, but none match the address"):s="There are no keyrings":s="The address passed in is invalid/empty",new Error(`${E.KeyringControllerError.NoKeyring}. Error info: ${s}`)}async restoreKeyring(e){const t=await g(this,n,"m",a).call(this,e);return t&&await this.updateMemStoreKeyrings(),t}getKeyringsByType(e){return this.keyrings.filter((t=>t.type===e))}async persistAllKeyrings(){const{encryptionKey:e,encryptionSalt:t}=this.memStore.getState();if(!this.password&&!e)throw new Error(E.KeyringControllerError.MissingCredentials);const r=await Promise.all(this.keyrings.map((async e=>{const[t,r]=await Promise.all([e.type,e.serialize()]);return{type:t,data:r}})));let n,o;if(r.push(...this.unsupportedKeyrings),g(this,s,"f")){if(C(g(this,i,"f")),e){const s=await g(this,i,"f").importKey(e),o=await g(this,i,"f").encryptWithKey(s,r);o.salt=t,n=JSON.stringify(o)}else if(this.password){const{vault:e,exportedKeyString:t}=await g(this,i,"f").encryptWithDetail(this.password,r);n=e,o=t}}else{if("string"!=typeof this.password)throw new TypeError(E.KeyringControllerError.WrongPasswordType);n=await g(this,i,"f").encrypt(this.password,r)}if(!n)throw new Error(E.KeyringControllerError.MissingVaultData);return this.store.updateState({vault:n}),await this.updateMemStoreKeyrings(),o&&this.memStore.updateState({encryptionKey:o,encryptionSalt:JSON.parse(n).salt}),!0}async unlockKeyrings(e,t,r){const o=this.store.getState().vault;if(!o)throw new Error(E.KeyringControllerError.VaultError);let u;if(await g(this,n,"m",c).call(this),g(this,s,"f"))if(C(g(this,i,"f")),e){const t=await g(this,i,"f").decryptWithDetail(e,o);u=t.vault,this.password=e,this.memStore.updateState({encryptionKey:t.exportedKeyString,encryptionSalt:t.salt})}else{const e=JSON.parse(o);if(r!==e.salt)throw new Error(E.KeyringControllerError.ExpiredCredentials);if("string"!=typeof t)throw new TypeError(E.KeyringControllerError.WrongPasswordType);const n=await g(this,i,"f").importKey(t);u=await g(this,i,"f").decryptWithKey(n,e),this.memStore.updateState({encryptionKey:t,encryptionSalt:r})}else{if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);u=await g(this,i,"f").decrypt(e,o),this.password=e}if("object"!=typeof(l=u)||!Array.isArray(l)||!l.every((e=>e.type&&(0,S.isValidJson)(e.data))))throw new Error(E.KeyringControllerError.VaultDataError);var l;return await Promise.all(u.map(g(this,n,"m",a).bind(this))),await this.updateMemStoreKeyrings(),!this.password||g(this,s,"f")&&t||!g(this,i,"f").isVaultUpdated||g(this,i,"f").isVaultUpdated(o)||await this.persistAllKeyrings(),this.keyrings}}function A(e){const t=()=>new e;return t.type=e.type,t}async function P(e){const t=await e.getAccounts();return{type:e.type,accounts:t.map(v.normalize)}}function C(e){if(!("importKey"in e&&"function"==typeof e.importKey&&"decryptWithKey"in e&&"function"==typeof e.decryptWithKey&&"encryptWithKey"in e&&"function"==typeof e.encryptWithKey))throw new Error(E.KeyringControllerError.UnsupportedEncryptionKeyExport)}r.KeyringController=M,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=async function(){await g(this,n,"m",c).call(this);const e=await this.addNewKeyring(E.KeyringType.HD);if(!e)throw new Error(E.KeyringControllerError.NoKeyring);const[t]=await e.getAccounts();if(!t)throw new Error(E.KeyringControllerError.NoAccountOnKeychain);const r=(0,v.normalize)(t);return this.emit("newVault",r),null},a=async function(e){const{type:t,data:r}=e;let i;try{i=await g(this,n,"m",d).call(this,t,r)}catch(e){console.error(e)}return i?(await i.getAccounts(),this.keyrings.push(i),i):(this.unsupportedKeyrings.push(e),undefined)},c=async function(){for(const e of this.keyrings)await g(this,n,"m",u).call(this,e);this.keyrings=[],this.memStore.updateState({keyrings:[]})},u=async function(e){var t;await(null===(t=e.destroy)||void 0===t?void 0:t.call(e))},l=function(){this.memStore.updateState({isUnlocked:!0}),this.emit("unlock")},d=async function(e,t){const r=this.getKeyringBuilderForType(e);if(!r)throw new Error(`${E.KeyringControllerError.NoKeyringBuilder}. Keyring type: ${e}`);const n=r();return await n.deserialize(t),n.init&&await n.init(),n},r.keyringBuilderFactory=A}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/KeyringController.js"}],[1094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=void 0,function(e){e.HD="HD Key Tree",e.Simple="Simple Key Pair"}(r.KeyringType||(r.KeyringType={})),function(e){e.NoKeyring="KeyringController - No keyring found",e.WrongPasswordType="KeyringController - Password must be of type string.",e.NoFirstAccount="KeyringController - First Account not found.",e.DuplicatedAccount="KeyringController - The account you are trying to import is a duplicate",e.VaultError="KeyringController - Cannot unlock without a previous vault.",e.VaultDataError="KeyringController - The decrypted vault has an unexpected shape.",e.UnsupportedEncryptionKeyExport="KeyringController - The encryptor does not support encryption key export.",e.UnsupportedGenerateRandomMnemonic="KeyringController - The current keyring does not support the method generateRandomMnemonic.",e.UnsupportedExportAccount="`KeyringController - The keyring for the current address does not support the method exportAccount",e.UnsupportedRemoveAccount="`KeyringController - The keyring for the current address does not support the method removeAccount",e.UnsupportedSignTransaction="KeyringController - The keyring for the current address does not support the method signTransaction.",e.UnsupportedSignMessage="KeyringController - The keyring for the current address does not support the method signMessage.",e.UnsupportedSignPersonalMessage="KeyringController - The keyring for the current address does not support the method signPersonalMessage.",e.UnsupportedGetEncryptionPublicKey="KeyringController - The keyring for the current address does not support the method getEncryptionPublicKey.",e.UnsupportedDecryptMessage="KeyringController - The keyring for the current address does not support the method decryptMessage.",e.UnsupportedSignTypedMessage="KeyringController - The keyring for the current address does not support the method signTypedMessage.",e.UnsupportedGetAppKeyAddress="KeyringController - The keyring for the current address does not support the method getAppKeyAddress.",e.UnsupportedExportAppKeyForAddress="KeyringController - The keyring for the current address does not support the method exportAppKeyForAddress.",e.NoAccountOnKeychain="KeyringController - The keyring for the current address does not support the method decryptMessage.",e.MissingCredentials="KeyringController - Cannot persist vault without password and encryption key",e.MissingVaultData="KeyringController - Cannot persist vault without vault information",e.ExpiredCredentials="KeyringController - Encryption key and salt provided are expired",e.NoKeyringBuilder="KeyringController - No keyringBuilder found for keyring",e.DataType="KeyringController - Incorrect data type provided"}(r.KeyringControllerError||(r.KeyringControllerError={}))}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/constants.js"}],[1095,{"./KeyringController":1093,"./constants":1094},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=r.keyringBuilderFactory=r.KeyringController=void 0;var n=e("./KeyringController");Object.defineProperty(r,"KeyringController",{enumerable:!0,get:function(){return n.KeyringController}}),Object.defineProperty(r,"keyringBuilderFactory",{enumerable:!0,get:function(){return n.keyringBuilderFactory}});var i=e("./constants");Object.defineProperty(r,"KeyringType",{enumerable:!0,get:function(){return i.KeyringType}}),Object.defineProperty(r,"KeyringControllerError",{enumerable:!0,get:function(){return i.KeyringControllerError}})}}},{package:"@metamask/eth-keyring-controller",file:"node_modules/@metamask/eth-keyring-controller/dist/index.js"}],[1096,{"./ledger-bridge":1097,"./ledger-iframe-bridge":1098,"./ledger-keyring":1099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./ledger-keyring"),r),i(e("./ledger-iframe-bridge"),r),i(e("./ledger-bridge"),r)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.js"}],[1097,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-bridge.js"}],[1098,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerIframeBridge=r.IFrameMessageAction=void 0;var l;!function(e){e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(l=r.IFrameMessageAction||(r.IFrameMessageAction={}));r.LedgerIframeBridge=class{constructor(){n.add(this),this.iframeLoaded=!1,this.isDeviceConnected=!1,this.currentMessageId=0,this.messageCallbacks={}}async init(e){u(this,n,"m",s).call(this,e),this.eventListener=u(this,n,"m",a).bind(this,e),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async attemptMakeApp(){return new Promise(((e,t)=>{u(this,n,"m",c).call(this,{action:l.LedgerMakeApp},(r=>{r.success?e(!0):t(r.error)}))}))}async updateTransportMethod(e){return new Promise(((t,r)=>{this.iframeLoaded?u(this,n,"m",c).call(this,{action:l.LedgerUpdateTransport,params:{transportType:e}},(({success:e})=>e?t(!0):r(new Error("Ledger transport could not be updated")))):this.delayedPromise={resolve:t,reject:r,transportType:e}}))}async getPublicKey(e){return u(this,n,"m",i).call(this,l.LedgerUnlock,e)}async deviceSignTransaction(e){return u(this,n,"m",i).call(this,l.LedgerSignTransaction,e)}async deviceSignMessage(e){return u(this,n,"m",i).call(this,l.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return u(this,n,"m",i).call(this,l.LedgerSignTypedData,e)}},n=new WeakSet,i=async function(...[e,t]){return new Promise(((r,i)=>{u(this,n,"m",c).call(this,{action:e,params:t},(({success:e,payload:t})=>e?r(t):i(t.error)))}))},s=function(e){this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{if(this.iframeLoaded=!0,this.delayedPromise)try{const e=await this.updateTransportMethod(this.delayedPromise.transportType);this.delayedPromise.resolve(e)}catch(e){this.delayedPromise.reject(e)}finally{delete this.delayedPromise}},document.head.appendChild(this.iframe)},o=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},a=function(e,t){if(t.origin===u(this,n,"m",o).call(this,e)&&t.data){const e=this.messageCallbacks[t.data.messageId];e?e(t.data):t.data.action===l.LedgerConnectionChange&&(this.isDeviceConnected=t.data.payload.connected)}},c=function(e,t){this.currentMessageId+=1;const r=Object.assign(Object.assign({},e),{messageId:this.currentMessageId,target:"LEDGER-IFRAME"});if(this.messageCallbacks[this.currentMessageId]=t,!this.iframeLoaded||!this.iframe||!this.iframe.contentWindow)throw new Error("The iframe is not loaded yet");this.iframe.contentWindow.postMessage(r,"*")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.js"}],[1099,{"@ethereumjs/rlp":372,"@ethereumjs/tx":377,"@ethereumjs/util":389,"@metamask/eth-sig-util":1102,buffer:2430,events:2838,hdkey:3148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p,m,g=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),w=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return y(t,e),t},b=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LedgerKeyring=void 0;const k=e("@ethereumjs/rlp"),_=e("@ethereumjs/tx"),S=w(e("@ethereumjs/util")),T=e("@metamask/eth-sig-util"),E=e("buffer"),j=e("events"),M=v(e("hdkey")),A="m",P=`${A}/44'/60'/0'`,C="Ledger Hardware",O="https://metamask.github.io/eth-ledger-bridge-keyring";var R;!function(e){e.Ropsten="http://api-ropsten.etherscan.io",e.Kovan="http://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(R||(R={}));class I extends j.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=C,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new M.default,this.hdPath=P,this.paths={},this.network=R.Mainnet,this.implementFullBIP44=!1,this.bridgeUrl=O,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init(this.bridgeUrl)}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts,accountDetails:this.accountDetails,bridgeUrl:this.bridgeUrl,implementFullBIP44:!1}}async deserialize(e={}){var t,r,s,o,a;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:P,this.bridgeUrl=null!==(r=e.bridgeUrl)&&void 0!==r?r:O,this.accounts=null!==(s=e.accounts)&&void 0!==s?s:[],this.accountDetails=null!==(o=e.accountDetails)&&void 0!==o?o:{},e.accountDetails||b(this,n,"m",i).call(this,e),this.implementFullBIP44=null!==(a=e.implementFullBIP44)&&void 0!==a&&a,this.accounts=this.accounts.filter((e=>Object.keys(this.accountDetails).includes(S.toChecksumAddress(e)))),Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount="number"==typeof e?e:parseInt(e,10)}setHdPath(e){this.hdPath!==e&&(this.hdk=new M.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return"already unlocked";const r=e?b(this,n,"m",f).call(this,e):this.hdPath;let i;try{i=await this.bridge.getPublicKey({hdPath:r})}catch(e){throw e instanceof Error?e:new Error("Unknown error")}return t&&i.chainCode&&(this.hdk.publicKey=E.Buffer.from(i.publicKey,"hex"),this.hdk.chainCode=E.Buffer.from(i.chainCode,"hex")),i.address}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((async r=>{const i=this.unlockedAccount,s=i+e;for(let e=i;e<s;e++){const t=b(this,n,"m",d).call(this,e);let r;r=b(this,n,"m",h).call(this)?await this.unlock(t):b(this,n,"m",u).call(this,A,e),this.accountDetails[S.toChecksumAddress(r)]={bip44:b(this,n,"m",h).call(this),hdPath:t},this.accounts.includes(r)||(this.accounts=[...this.accounts,r]),this.page=0}t(this.accounts.slice())})).catch(r)}))}async getFirstPage(){return this.page=0,b(this,n,"m",o).call(this,1)}async getNextPage(){return b(this,n,"m",o).call(this,1)}async getPreviousPage(){return b(this,n,"m",o).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase())),delete this.accountDetails[S.toChecksumAddress(e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let r;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=S.bufferToHex(t.getChainId()),t.r="0x00",t.s="0x00",r=t.serialize().toString("hex"),b(this,n,"m",s).call(this,e,r,(e=>(t.v=E.Buffer.from(e.v,"hex"),t.r=E.Buffer.from(e.r,"hex"),t.s=E.Buffer.from(e.s,"hex"),t)));const i=t.getMessageToSign(!1);return r=E.Buffer.isBuffer(i)?i.toString("hex"):E.Buffer.from(k.RLP.encode(i)).toString("hex"),b(this,n,"m",s).call(this,e,r,(e=>{const r=t.toJSON();return r.type=t.type,r.v=S.addHexPrefix(e.v),r.r=S.addHexPrefix(e.r),r.s=S.addHexPrefix(e.s),_.TransactionFactory.fromTxData(r,{common:t.common,freeze:Object.isFrozen(t)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: Unknown error while signing message");let n;try{n=await this.bridge.deviceSignMessage({hdPath:r,message:S.stripHexPrefix(t)})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let i=parseInt(String(n.v),10).toString(16);i.length<2&&(i=`0${i}`);const s=`0x${n.r}${n.s}${i}`,o=(0,T.recoverPersonalSignature)({data:t,signature:s});if(S.toChecksumAddress(o)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return s}async unlockAccountByAddress(e){const t=S.toChecksumAddress(e),r=this.accountDetails[t];if(!r)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:n}=r;if((await this.unlock(n,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return n}async signTypedData(e,t,r={}){if(!("V4"===r.version))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:n,types:i,primaryType:s,message:o}=T.TypedDataUtils.sanitizeData(t),a=T.TypedDataUtils.hashStruct("EIP712Domain",n,i,T.SignTypedDataVersion.V4).toString("hex"),c=T.TypedDataUtils.hashStruct(s.toString(),o,i,T.SignTypedDataVersion.V4).toString("hex"),u=await this.unlockAccountByAddress(e);if(!u)throw new Error("Ledger: Unknown error while signing message");let l;try{l=await this.bridge.deviceSignTypedData({hdPath:u,domainSeparatorHex:a,hashStructMessageHex:c})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing message")}let d=parseInt(String(l.v),10).toString(16);d.length<2&&(d=`0${d}`);const h=`0x${l.r}${l.s}${d}`,f=(0,T.recoverTypedSignature)({data:t,signature:h,version:T.SignTypedDataVersion.V4});if(S.toChecksumAddress(f)!==S.toChecksumAddress(e))throw new Error("Ledger: The signature doesnt match the right address");return h}exportAccount(){throw new Error("Not supported on this device")}forgetDevice(){this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new M.default}}r.LedgerKeyring=I,n=new WeakSet,i=function(e){if(b(this,n,"m",h).call(this)&&e.accountIndexes)for(const[t,r]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:b(this,n,"m",d).call(this,r)};b(this,n,"m",h).call(this)||this.accounts.filter((e=>!Object.keys(this.accountDetails).includes(S.toChecksumAddress(e)))).forEach((e=>{try{this.accountDetails[S.toChecksumAddress(e)]={bip44:!1,hdPath:b(this,n,"m",l).call(this,e)}}catch(t){console.log(`failed to migrate account ${e}`)}}))},s=async function(e,t,r){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing transaction");let i;try{i=await this.bridge.deviceSignTransaction({tx:t,hdPath:n})}catch(e){throw e instanceof Error?e:new Error("Ledger: Unknown error while signing transaction")}const s=r(i);if(s.verifySignature())return s;throw new Error("Ledger: The transaction signature is not valid")},o=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage;let i;return await this.unlock(),i=b(this,n,"m",h).call(this)?await b(this,n,"m",a).call(this,t,r):b(this,n,"m",c).call(this,t,r),i},a=async function(e,t){const r=[];for(let i=e;i<t;i++){const e=b(this,n,"m",d).call(this,i),t=await this.unlock(e),s=!this.implementFullBIP44||await b(this,n,"m",p).call(this,t);if(r.push({address:t,balance:null,index:i}),!s)break}return r},c=function(e,t){const r=[];for(let i=e;i<t;i++){const e=b(this,n,"m",u).call(this,A,i);r.push({address:e,balance:null,index:i}),this.paths[S.toChecksumAddress(e)]=i}return r},u=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=S.publicToAddress(r.publicKey,!0).toString("hex");return S.toChecksumAddress(`0x${n}`)},l=function(e){const t=S.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===b(this,n,"m",u).call(this,A,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return b(this,n,"m",d).call(this,r)},d=function(e){return b(this,n,"m",h).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},h=function(){return"m/44'/60'/0'/0/0"===this.hdPath},f=function(e){return e.toString().replace("m/","")},p=async function(e){const t=b(this,n,"m",m).call(this),r=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),i=await r.json();return"0"!==i.status&&i.result.length>0},m=function(){return this.network},I.type=C}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.js"}],[11,{"../../../shared/constants/metametrics":4057,"../../../shared/constants/network":4058,"../../../shared/constants/time":4068,"../../../shared/constants/tokens":4069,"../../../shared/constants/transaction":4070,"../../../shared/modules/network.utils":4092,"../../../shared/modules/string-utils":4098,"@metamask/polling-controller":1418,loglevel:3416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("loglevel"),i=e("@metamask/polling-controller"),s=e("../../../shared/constants/time"),o=e("../../../shared/constants/network"),a=e("../../../shared/constants/tokens"),c=e("../../../shared/modules/network.utils"),u=e("../../../shared/modules/string-utils"),l=e("../../../shared/constants/transaction"),d=e("../../../shared/constants/metametrics");function h(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}const f=3*s.MINUTE;var p=new WeakSet;class m extends i.StaticIntervalPollingControllerOnly{constructor({messenger:e,interval:t=f,preferences:r,network:n,tokenList:i,tokensController:s,assetsContractController:o=null,trackMetaMetricsEvent:a,getCurrentSelectedAccount:c,getNetworkClientById:u,disableLegacyInterval:l=!1}={}){var d,m,y,w;super(),h(this,p),this.getNetworkClientById=u,this.messenger=e,this.assetsContractController=o,this.tokensController=s,this.preferences=r,l||(this.interval=t),this.network=n,this.tokenList=i,this.useTokenDetection=null===(d=this.preferences)||void 0===d?void 0:d.store.getState().useTokenDetection,this.selectedAddress=c().address,this.tokenAddresses=null===(m=this.tokensController)||void 0===m?void 0:m.state.tokens.map((e=>e.address)),this.setIntervalLength(t),this.hiddenTokens=null===(y=this.tokensController)||void 0===y?void 0:y.state.ignoredTokens,this.detectedTokens=null===(w=this.tokensController)||void 0===w?void 0:w.state.detectedTokens,this.chainId=this.getChainIdFromNetworkStore(),this._trackMetaMetricsEvent=a,e.subscribe("AccountsController:selectedAccountChange",(e=>{var t;const r=null===(t=this.preferences)||void 0===t?void 0:t.store.getState().useTokenDetection;this.selectedAddress===e.address&&this.useTokenDetection===r||(this.selectedAddress=e.address,this.useTokenDetection=r,this.restartTokenDetection({selectedAddress:this.selectedAddress}))})),null==r||r.store.subscribe((({useTokenDetection:e})=>{this.useTokenDetection!==e&&(this.useTokenDetection=e,this.restartTokenDetection({selectedAddress:this.selectedAddress}))})),null==s||s.subscribe((({tokens:e=[],ignoredTokens:t=[],detectedTokens:r=[]})=>{this.tokenAddresses=e.map((e=>e.address)),this.hiddenTokens=t,this.detectedTokens=r})),e.subscribe("NetworkController:stateChange",(()=>{if(this.chainId!==this.getChainIdFromNetworkStore()){const e=this.getChainIdFromNetworkStore();this.chainId=e,this.restartTokenDetection({chainId:this.chainId})}})),e.subscribe("TokenListController:stateChange",(()=>{this.restartTokenDetection()})),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,p,g).call(this)}async _executePoll(e,t){const r=this.getNetworkClientById(e);await this.detectNewTokens({...t,chainId:r.configuration.chainId})}async detectNewTokens({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,i=t??this.getChainIdFromNetworkStore();if(!this.isActive)return;if(!(0,c.isTokenDetectionEnabledForNetwork)(i))return;if(!this.useTokenDetection&&i!==o.CHAIN_IDS.MAINNET)return;const s=!this.useTokenDetection&&i===o.CHAIN_IDS.MAINNET,{tokenList:h}=this._tokenList.state,f=s?a.STATIC_MAINNET_TOKEN_LIST:h,p=[];for(const e in f)this.tokenAddresses.find((t=>(0,u.isEqualCaseInsensitive)(t,e)))||this.hiddenTokens.find((t=>(0,u.isEqualCaseInsensitive)(t,e)))||this.detectedTokens.find((({address:t})=>(0,u.isEqualCaseInsensitive)(t,e)))||p.push(e);const m=[p.slice(0,1e3),p.slice(1e3,p.length-1)];for(const e of m){let t;try{t=await this.assetsContractController.getBalancesInSingleCall(r,e)}catch(e){return void(0,n.warn)("MetaMask - DetectTokensController single call balance fetch failed",e)}const s=[],o=[];if(t){const e=Object.keys(t);for(const t of e){const{address:e,symbol:r,decimals:n}=f[t];o.push(`${r} - ${e}`),s.push({address:e,symbol:r,decimals:n})}s.length>0&&(this._trackMetaMetricsEvent({event:d.MetaMetricsEventName.TokenDetected,category:d.MetaMetricsEventCategory.Wallet,properties:{tokens:o,token_standard:l.TokenStandard.ERC20,asset_type:l.AssetType.token}}),await this.tokensController.addDetectedTokens(s,{selectedAddress:r,chainId:i}))}}}restartTokenDetection({selectedAddress:e,chainId:t}={}){const r=e??this.selectedAddress,n=t??this.chainId;this.isActive&&r&&(this.detectNewTokens({selectedAddress:r,chainId:n}),this.interval=f)}getChainIdFromNetworkStore(){var e;return null===(e=this.network)||void 0===e?void 0:e.state.providerConfig.chainId}set interval(e){this._handle&&clearInterval(this._handle),e&&(this._handle=setInterval((()=>{this.detectNewTokens()}),e))}set tokenList(e){e&&(this._tokenList=e)}get isActive(){return this.isOpen&&this.isUnlocked}}function g(){const{isUnlocked:e}=this.messenger.call("KeyringController:getState");this.isUnlocked=e,this.messenger.subscribe("KeyringController:unlock",(()=>{this.isUnlocked=!0,this.restartTokenDetection()})),this.messenger.subscribe("KeyringController:lock",(()=>{this.isUnlocked=!1}))}r.default=m}}},{package:"$root$",file:"app/scripts/controllers/detect-tokens.js"}],[110,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:19,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=19;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map(((e,t,r)=>{if(e.status!==n.TransactionStatus.submitted)return e;const i=function(e){const t=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t||"0x0",16)}));return Math.max.apply(null,t)}(r.filter((e=>e.status===n.TransactionStatus.confirmed)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from))),s=function(e,t){const r=e.map((e=>{const{nonce:t}=e.txParams;return parseInt(t,16)}));let n=t;for(;r.includes(n);)n+=1;return n}(r.filter((e=>e.status===n.TransactionStatus.submitted)).filter((t=>t.txParams.from===e.txParams.from)).filter((t=>t.metamaskNetworkId.from===e.metamaskNetworkId.from)),i),o=Math.max(s,i);return parseInt(e.txParams.nonce,16)>o+1&&(e.status=n.TransactionStatus.failed,e.err={message:"nonce too high",note:"migration 019 custom error"}),e}))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #19${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/019.js"}],[1101,{"./utils":1105,buffer:2430,tweetnacl:3950,"tweetnacl-util":3949},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.getEncryptionPublicKey=r.decryptSafely=r.decrypt=r.encryptSafely=r.encrypt=void 0;const o=s(e("tweetnacl")),a=s(e("tweetnacl-util")),c=e("./utils");function u({publicKey:e,data:t,version:r}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(t))throw new Error("Missing data parameter");if((0,c.isNullish)(r))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===r){if("string"!=typeof t)throw new Error("Message data must be given as a string");const r=o.box.keyPair();let n;try{n=a.decodeBase64(e)}catch(e){throw new Error("Bad public key")}const i=a.decodeUTF8(t),s=o.randomBytes(o.box.nonceLength),c=o.box(i,s,n,r.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(s),ephemPublicKey:a.encodeBase64(r.publicKey),ciphertext:a.encodeBase64(c)}}throw new Error("Encryption type/version not supported")}function l({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===e.version){const r=d(t),n=o.box.keyPair.fromSecretKey(r).secretKey,i=a.decodeBase64(e.nonce),s=a.decodeBase64(e.ciphertext),c=a.decodeBase64(e.ephemPublicKey),u=o.box.open(s,i,c,n);try{if(!u)throw new Error;const e=a.encodeUTF8(u);if(!e)throw new Error;return e}catch(e){if(e&&"string"==typeof e.message&&e.message.length)throw new Error(`Decryption failed: ${e.message}`);throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}function d(e){const r=t.from(e,"hex").toString("base64");return a.decodeBase64(r)}r.encrypt=u,r.encryptSafely=function({publicKey:e,data:r,version:n}){if((0,c.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"==typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},s=t.byteLength(JSON.stringify(i),"utf-8")%2048;let o=0;return s>0&&(o=2048-s-16),i.padding="0".repeat(o),u({publicKey:e,data:JSON.stringify(i),version:n})},r.decrypt=l,r.decryptSafely=function({encryptedData:e,privateKey:t}){if((0,c.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:e,privateKey:t})).data},r.getEncryptionPublicKey=function(e){const t=d(e),r=o.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/encryption.js"}],[1102,{"./encryption":1101,"./personal-sign":1103,"./sign-typed-data":1104,"./utils":1105},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.concatSig=void 0,i(e("./personal-sign"),r),i(e("./sign-typed-data"),r),i(e("./encryption"),r);var s=e("./utils");Object.defineProperty(r,"concatSig",{enumerable:!0,get:function(){return s.concatSig}}),Object.defineProperty(r,"normalize",{enumerable:!0,get:function(){return s.normalize}})}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/index.js"}],[1103,{"./utils":1105,"@ethereumjs/util":389},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.extractPublicKey=r.recoverPersonalSignature=r.personalSign=void 0;const n=e("@ethereumjs/util"),i=e("./utils");function s(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}r.personalSign=function({privateKey:e,data:t}){if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,i.legacyToBuffer)(t),s=(0,n.hashPersonalMessage)(r),o=(0,n.ecsign)(s,e);return(0,i.concatSig)((0,n.toBuffer)(o.v),o.r,o.s)},r.recoverPersonalSignature=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");const r=s(e,t),o=(0,n.publicToAddress)(r);return(0,n.bufferToHex)(o)},r.extractPublicKey=function({data:e,signature:t}){if((0,i.isNullish)(e))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${s(e,t).toString("hex")}`}}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/personal-sign.js"}],[1104,{"./utils":1105,"@ethereumjs/util":389,"@metamask/abi-utils":976,"@metamask/abi-utils/dist/parsers":985,"@metamask/abi-utils/dist/utils":993,"@metamask/utils":1769,"ethereum-cryptography/keccak":2766},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.recoverTypedSignature=r.signTypedData=r.typedSignatureHash=r.TypedDataUtils=r.TYPED_MESSAGE_SCHEMA=r.SignTypedDataVersion=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/abi-utils"),s=e("@metamask/abi-utils/dist/parsers"),o=e("@metamask/abi-utils/dist/utils"),a=e("@metamask/utils"),c=e("ethereum-cryptography/keccak"),u=e("./utils");var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error(`Invalid version: '${e}'`);if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}function h(e,t){(0,a.assert)(null!==t,`Unable to encode value: Invalid number. Expected a valid number value, but received "${t}".`);const r=BigInt(t),n=(0,s.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,a.assert)(r>=-i&&r<=i,`Unable to encode value: Number "${t}" is out of range for type "${e}".`),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,o.padStart)((0,a.bigIntToBytes)(t),20)}function p(e,t,r,s,u){if(d(u,[l.V3,l.V4]),e[r]!==undefined)return["bytes32",u===l.V4&&null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(m(r,s,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(s===undefined)throw new Error(`missing value for field ${t} of type ${r}`);if("address"===r){if("number"==typeof s)return["address",(0,o.padStart)((0,a.numberToBytes)(s),20)];if((0,a.isStrictHexString)(s))return["address",(0,a.add0x)(s)];if("string"==typeof s)return["address",f(s).subarray(0,20)]}if("bool"===r)return["bool",Boolean(s)];if("bytes"===r)return"number"==typeof s?s=(0,a.numberToBytes)(s):(0,a.isStrictHexString)(s)||"0x"===s?s=(0,a.hexToBytes)(s):"string"==typeof s&&(s=(0,a.stringToBytes)(s)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"==typeof s?s<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,a.bigIntToBytes)(BigInt(s))]:(0,a.isStrictHexString)(s)?["bytes32",(0,a.hexToBytes)(s)]:["bytes32",s];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,s);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return s="number"==typeof s?(0,a.numberToBytes)(s):(0,a.stringToBytes)(null!=s?s:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(s))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const o=r.slice(0,r.lastIndexOf("[")),a=s.map((r=>p(e,t,o,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,i.encode)(a.map((([e])=>e)),a.map((([,e])=>e)))))]}return[r,s]}function m(e,t,r,s){d(s,[l.V3,l.V4]);const o=["bytes32"],a=[b(e,r)];for(const n of r[e]){if(s===l.V3&&t[n.name]===undefined)continue;const[e,i]=p(r,n.name,n.type,t[n.name],s);o.push(e),a.push(i)}return(0,n.arrToBufArr)((0,i.encode)(o,a))}function g(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const e of i){if(!t[e])throw new Error(`No type definition specified: ${e}`);r+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`}return r}function y(e,t,r=new Set){if("string"!=typeof e)throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(e)}`);const n=e.match(/^\w*/u);if([e]=n,r.has(e)||t[e]===undefined)return r;r.add(e);for(const n of t[e])y(n.type,t,r);return r}function w(e,t,r,i){d(i,[l.V3,l.V4]);const s=m(e,t,r,i),o=(0,c.keccak256)(s);return(0,n.arrToBufArr)(o)}function b(e,t){const r=(0,a.stringToBytes)(g(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function v(e){const t={};for(const n in r.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(t[n]=e[n]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function k(e,t){d(t,[l.V3,l.V4]);const r=v(e),{domain:n}=r;return w("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function _(e,t){if((0,s.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,s.getArrayType)(e);return t.map((e=>_(r,e)))}if("address"===e){if("number"==typeof t)return(0,o.padStart)((0,a.numberToBytes)(t),20);if((0,a.isStrictHexString)(t))return(0,o.padStart)((0,a.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,o.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,s.getByteLength)(e);if("number"==typeof t)return t<0?new Uint8Array:(0,a.numberToBytes)(t).subarray(0,r);if((0,a.isStrictHexString)(t))return(0,a.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"==typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"==typeof t){const r=(0,s.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function S(e,t){return t.map((t=>{if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,o.padStart)((0,a.bigIntToBytes)(r),32);const n=(0,s.getLength)(e),i=BigInt.asIntN(n,r);return(0,a.signedBigIntToBytes)(i,32)}return t}))}function T(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!("length"in e)||!e.length)throw t;const r=e.map((({name:e,type:t,value:r})=>{if("address[]"===t)return{name:e,type:"bytes32[]",value:(n=r,n.map((e=>"number"==typeof e?(0,o.padStart)((0,a.numberToBytes)(e),32):(0,a.isStrictHexString)(e)?(0,o.padStart)((0,a.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,o.padStart)(e.subarray(0,32),32):e)))};var n;if(t.startsWith("int")&&(0,s.isArrayType)(t)){const[n,i]=(0,s.getArrayType)(t);return{name:e,type:`bytes32[${null!=i?i:""}]`,value:S(n,r)}}return{name:e,type:t,value:_(t,r)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return`${e.type} ${e.name}`}));return(0,n.arrToBufArr)((0,c.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,i.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,i.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=r.SignTypedDataVersion||(r.SignTypedDataVersion={})),r.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r.TypedDataUtils={encodeData:m,encodeType:g,findTypeDependencies:y,hashStruct:w,hashType:b,sanitizeData:v,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=v(e),i=[(0,a.hexToBytes)("1901")];return i.push(k(e,t)),"EIP712Domain"!==r.primaryType&&i.push(w(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,a.concatBytes)(i)))},eip712DomainHash:k},r.typedSignatureHash=function(e){const t=T(e);return(0,a.bytesToHex)(t)},r.signTypedData=function({privateKey:e,data:t,version:i}){if(d(i),(0,u.isNullish)(t))throw new Error("Missing data parameter");if((0,u.isNullish)(e))throw new Error("Missing private key parameter");const s=i===l.V1?T(t):r.TypedDataUtils.eip712Hash(t,i),o=(0,n.ecsign)(s,e);return(0,u.concatSig)((0,n.arrToBufArr)((0,a.bigIntToBytes)(o.v)),o.r,o.s)},r.recoverTypedSignature=function({data:e,signature:t,version:i}){if(d(i),(0,u.isNullish)(e))throw new Error("Missing data parameter");if((0,u.isNullish)(t))throw new Error("Missing signature parameter");const s=i===l.V1?T(e):r.TypedDataUtils.eip712Hash(e,i),o=(0,u.recoverPublicKey)(s,t),c=(0,n.publicToAddress)(o);return(0,a.bytesToHex)(c)}}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/sign-typed-data.js"}],[1105,{"@ethereumjs/util":389,"@metamask/utils":1769,buffer:2430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.normalize=r.recoverPublicKey=r.concatSig=r.legacyToBuffer=r.isNullish=r.padWithZeroes=void 0;const n=e("@ethereumjs/util"),i=e("@metamask/utils");function s(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}function o(e){return null===e||e===undefined}r.padWithZeroes=s,r.isNullish=o,r.legacyToBuffer=function(e){return"string"!=typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):t.from(e)},r.concatSig=function(e,t,r){const o=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=s((0,n.toUnsigned)(o).toString("hex"),64),l=s((0,n.toUnsigned)(a).toString("hex"),64),d=(0,i.remove0x)((0,i.numberToHex)(c));return(0,i.add0x)(u.concat(l,d))},r.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},r.normalize=function(e){if(o(e))return undefined;if("number"==typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!=typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,i.add0x)(e.toLowerCase())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager>@metamask/eth-sig-util",file:"node_modules/@metamask/eth-sig-util/dist/utils.js"}],[1106,{"./simple-keyring":1107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e("./simple-keyring");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/dist/index.js"}],[1107,{"@ethereumjs/util":389,"@metamask/eth-sig-util":1102,"@metamask/utils":1769,buffer:2430,"ethereum-cryptography/keccak":2766,randombytes:3613},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,i,s,o,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const l=e("@ethereumjs/util"),d=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),f=e("ethereum-cryptography/keccak"),p=u(e("randombytes")),m="Simple Key Pair";class g{constructor(e=[]){n.add(this),i.set(this,void 0),this.type=m,a(this,i,[],"f"),this.deserialize(e).catch((e=>{throw new Error(`Problem deserializing SimpleKeyring ${e.message}`)}))}async serialize(){return c(this,i,"f").map((e=>e.privateKey.toString("hex")))}async deserialize(e=[]){a(this,i,e.map((e=>{const r=(0,l.stripHexPrefix)(e),n=t.from(r,"hex");return{privateKey:n,publicKey:(0,l.privateToPublic)(n)}})),"f")}async addAccounts(e=1){const t=[];for(let r=0;r<e;r++){const e=y(),r=(0,l.privateToPublic)(e);t.push({privateKey:e,publicKey:r})}a(this,i,c(this,i,"f").concat(t),"f");return t.map((({publicKey:e})=>(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(e)))))}async getAccounts(){return c(this,i,"f").map((({publicKey:e})=>(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(e)))))}async signTransaction(e,t,r={}){const i=c(this,n,"m",s).call(this,e,r),o=t.sign(i);return o===undefined?t:o}async signMessage(e,r,i={withAppKeyOrigin:"",validateMessage:!0}){const o=(0,l.stripHexPrefix)(r);if(i.validateMessage&&(0===o.length||!o.match(/^[a-fA-F0-9]*$/u)))throw new Error("Cannot sign invalid message");const a=c(this,n,"m",s).call(this,e,i),u=(0,l.ecsign)(t.from(o,"hex"),a);return(0,d.concatSig)((0,l.toBuffer)(u.v),u.r,u.s)}async signPersonalMessage(e,t,r={withAppKeyOrigin:""}){const i=c(this,n,"m",s).call(this,e,r);return(0,d.personalSign)({privateKey:i,data:t})}async decryptMessage(e,t){const r=c(this,n,"m",o).call(this,e).privateKey.toString("hex");return(0,d.decrypt)({privateKey:r,encryptedData:t})}async signTypedData(e,t,r={version:d.SignTypedDataVersion.V1}){let i=d.SignTypedDataVersion.V1;r.version&&function(e){return e in d.SignTypedDataVersion}(r.version)&&(i=d.SignTypedDataVersion[r.version]);const o=c(this,n,"m",s).call(this,e,r);return(0,d.signTypedData)({privateKey:o,data:t,version:i})}async getEncryptionPublicKey(e,t){const r=c(this,n,"m",s).call(this,e,t);return(0,d.getEncryptionPublicKey)(r.toString("hex"))}async getAppKeyAddress(e,t){if(!t||"string"!=typeof t)throw new Error("'origin' must be a non-empty string");const r=c(this,n,"m",o).call(this,e,{withAppKeyOrigin:t});return(0,h.add0x)((0,l.bufferToHex)((0,l.publicToAddress)(r.publicKey)))}async exportAccount(e,t={withAppKeyOrigin:""}){return c(this,n,"m",o).call(this,e,t).privateKey.toString("hex")}removeAccount(e){if(!c(this,i,"f").map((({publicKey:e})=>(0,l.bufferToHex)((0,l.publicToAddress)(e)).toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);a(this,i,c(this,i,"f").filter((({publicKey:t})=>(0,l.bufferToHex)((0,l.publicToAddress)(t)).toLowerCase()!==e.toLowerCase())),"f")}}function y(){const e=(0,p.default)(32);if(!(0,l.isValidPrivate)(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");return e}r.default=g,i=new WeakMap,n=new WeakSet,s=function(e,t={withAppKeyOrigin:""}){if(!e)throw new Error("Must specify address.");return c(this,n,"m",o).call(this,e,t).privateKey},o=function(e,r={}){const n=(0,d.normalize)(e);let s=c(this,i,"f").find((({publicKey:e})=>(0,l.bufferToHex)((0,l.publicToAddress)(e))===n));if(!s)throw new Error("Simple Keyring - Unable to find matching address.");if(r.withAppKeyOrigin){const{privateKey:e}=s,n=t.from(r.withAppKeyOrigin,"utf8"),i=t.concat([e,n]),o=(0,l.arrToBufArr)((0,f.keccak256)(i));s={privateKey:o,publicKey:(0,l.privateToPublic)(o)}}return s},g.type=m}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-keyring-controller>@metamask/eth-simple-keyring",file:"node_modules/@metamask/eth-simple-keyring/dist/simple-keyring.js"}],[1108,{"./util":1114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CaseInsensitiveMap=void 0;const n=e("./util");class i extends Map{static fromObject(e){return new i(Object.entries(e))}toObject(){return Object.fromEntries(this.entries())}get(e){return super.get(e.toLowerCase())}getOrThrow(e,t="Key"){return this.get(e)??(0,n.throwError)(`${t} '${e}' not found`)}has(e){return super.has(e.toLowerCase())}set(e,t){return super.set(e.toLowerCase(),t)}delete(e){return super.delete(e.toLowerCase())}}r.CaseInsensitiveMap=i}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/CaseInsensitiveMap.js"}],[1109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DeferredPromise=void 0;r.DeferredPromise=class{constructor(){if(this.resolve=undefined,this.reject=undefined,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),!this.resolve||!this.reject)throw new Error("Promise constructor failed")}}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/DeferredPromise.js"}],[111,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:20,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=20;try{const e=function(e){const t=e;"metamask"in t&&!("firstTimeInfo"in t.metamask)&&(t.metamask.firstTimeInfo={version:"3.12.0",date:Date.now()});return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #20${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/020.js"}],[1110,{"./CaseInsensitiveMap":1108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapIdMap=r.InvalidSnapIdError=void 0;const o=e("./CaseInsensitiveMap");class a extends Error{constructor(e,t){super(`Snap "${e}" is not allowed to set "${t}"`),this.name="InvalidSnapIdError",this.snapId=e,this.key=t}}r.InvalidSnapIdError=a;class c{constructor(e){n.set(this,void 0),i(this,n,new o.CaseInsensitiveMap(e),"f")}toObject(){return s(this,n,"f").toObject()}static fromObject(e){return new c(Object.entries(e))}get(e,t){const r=s(this,n,"f").get(t);return r?.snapId===e?r:undefined}has(e,t){return this.get(e,t)!==undefined}delete(e,t){return this.has(e,t)&&s(this,n,"f").delete(t)}set(e,t){if(s(this,n,"f").has(e)&&!this.has(t.snapId,e))throw new a(t.snapId,e);return s(this,n,"f").set(e,t),this}values(){return s(this,n,"f").values()}get size(){return s(this,n,"f").size}}r.SnapIdMap=c,n=new WeakMap}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapIdMap.js"}],[1111,{"./DeferredPromise":1109,"./SnapIdMap":1110,"./types":1113,"./util":1114,"@ethereumjs/tx":377,"@metamask/eth-sig-util":1102,"@metamask/keyring-api":1125,"@metamask/utils":1769,events:2838,superstruct:3935,uuid:1137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},y=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SnapKeyring=r.SNAP_KEYRING_TYPE=void 0;const w=e("@ethereumjs/tx"),b=e("@metamask/eth-sig-util"),v=e("@metamask/keyring-api"),k=e("@metamask/utils"),_=e("events"),S=e("superstruct"),T=e("uuid"),E=e("./DeferredPromise"),j=e("./SnapIdMap"),M=e("./types"),A=e("./util");r.SNAP_KEYRING_TYPE="Snap Keyring";class P extends _.EventEmitter{constructor(e,t){super(),n.add(this),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),this.type=P.type,g(this,i,new v.KeyringSnapControllerClient({controller:e}),"f"),g(this,o,new j.SnapIdMap,"f"),g(this,s,new j.SnapIdMap,"f"),g(this,a,t,"f")}async handleKeyringSnapMessage(e,t){switch((0,S.assert)(t,M.SnapMessageStruct),t.method){case v.KeyringEvent.AccountCreated:return y(this,n,"m",c).call(this,e,t);case v.KeyringEvent.AccountUpdated:return y(this,n,"m",u).call(this,e,t);case v.KeyringEvent.AccountDeleted:return y(this,n,"m",l).call(this,e,t);case v.KeyringEvent.RequestApproved:return y(this,n,"m",d).call(this,e,t);case v.KeyringEvent.RequestRejected:return y(this,n,"m",h).call(this,e,t);default:throw new Error(`Method not supported: ${t.method}`)}}async serialize(){return{accounts:y(this,s,"f").toObject()}}async deserialize(e){e!==undefined&&g(this,s,j.SnapIdMap.fromObject(e.accounts),"f")}async getAccounts(){return(0,A.unique)([...y(this,s,"f").values()].map((({account:e})=>e.address.toLowerCase())))}async getAccountsBySnapId(e){return(0,A.unique)([...y(this,s,"f").values()].filter((({snapId:t})=>t===e)).map((({account:e})=>e.address.toLowerCase())))}async signTransaction(e,t,r={}){const i=(0,A.toJson)({...t.toJSON(),from:e,type:`0x${t.type.toString(16)}`,chainId:(0,k.bigIntToHex)(t.common.chainId())}),s=await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.SignTransaction,params:[i]}),o=(0,S.mask)(s,(0,S.object)({r:(0,S.string)(),s:(0,S.string)(),v:(0,S.string)()}));return w.TransactionFactory.fromTxData({...i,r:o.r,s:o.s,v:o.v})}async signTypedData(e,t,r={version:b.SignTypedDataVersion.V1}){const i={[b.SignTypedDataVersion.V1]:v.EthMethod.SignTypedDataV1,[b.SignTypedDataVersion.V3]:v.EthMethod.SignTypedDataV3,[b.SignTypedDataVersion.V4]:v.EthMethod.SignTypedDataV4}[r.version]||v.EthMethod.SignTypedDataV1;return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:i,params:(0,A.toJson)([e,t])}),v.EthBytesStruct)}async signMessage(e,t){return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.Sign,params:(0,A.toJson)([e,t])}),v.EthBytesStruct)}async signPersonalMessage(e,t){return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.PersonalSign,params:(0,A.toJson)([t,e])}),v.EthBytesStruct)}async prepareUserOperation(e,t){return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.PrepareUserOperation,params:(0,A.toJson)(t)}),v.EthBaseUserOperationStruct)}async patchUserOperation(e,t){return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.PatchUserOperation,params:(0,A.toJson)([t])}),v.EthUserOperationPatchStruct)}async signUserOperation(e,t){return(0,A.strictMask)(await y(this,n,"m",f).call(this,{address:e,method:v.EthMethod.SignUserOperation,params:(0,A.toJson)([t])}),v.EthBytesStruct)}exportAccount(e){throw new Error("Exporting accounts from snaps is not supported.")}async removeAccount(e){const{account:t,snapId:r}=y(this,n,"m",p).call(this,e);y(this,s,"f").delete(r,t.id);try{await y(this,i,"f").withSnapId(r).deleteAccount(t.id)}catch(t){console.error(`Account '${e}' may not have been removed from snap '${r}':`,t)}}getAccountByAddress(e){return this.listAccounts().find((({address:t})=>(0,A.equalsIgnoreCase)(t,e)))}listAccounts(){return[...y(this,s,"f").values()].map((({account:e,snapId:t})=>{const r=y(this,n,"m",m).call(this,t);return{...e,address:e.address.toLowerCase(),metadata:{name:"",keyring:{type:this.type},...r!==undefined&&{snap:r}}}}))}}r.SnapKeyring=P,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,n=new WeakSet,c=async function(e,t){(0,S.assert)(t,v.AccountCreatedEventStruct);const{account:r}=t.params;if(await y(this,a,"f").addressExists(r.address.toLowerCase()))throw new Error(`Account address '${r.address}' already exists`);if(y(this,s,"f").has(e,r.id))throw new Error(`Account '${r.id}' already exists`);return await y(this,a,"f").addAccount(r.address.toLowerCase(),e,(async t=>{t&&(y(this,s,"f").set(r.id,{account:r,snapId:e}),await y(this,a,"f").saveState())})),null},u=async function(e,t){(0,S.assert)(t,v.AccountUpdatedEventStruct);const{account:r}=t.params,{account:n}=y(this,s,"f").get(e,r.id)??(0,A.throwError)(`Account '${r.id}' not found`);if(!(0,A.equalsIgnoreCase)(n.address,r.address))throw new Error(`Cannot change address of account '${r.id}'`);return y(this,s,"f").set(r.id,{account:r,snapId:e}),await y(this,a,"f").saveState(),null},l=async function(e,t){(0,S.assert)(t,v.AccountDeletedEventStruct);const{id:r}=t.params,n=y(this,s,"f").get(e,r);if(n===undefined)return null;const{account:{address:i}}=n;return await y(this,a,"f").removeAccount(i.toLowerCase(),e,(async e=>{e&&await y(this,a,"f").saveState()})),null},d=async function(e,t){(0,S.assert)(t,v.RequestApprovedEventStruct);const{id:r,result:n}=t.params,{promise:i}=y(this,o,"f").get(e,r)??(0,A.throwError)(`Request '${r}' not found`);return y(this,o,"f").delete(e,r),i.resolve(n),null},h=async function(e,t){(0,S.assert)(t,v.RequestRejectedEventStruct);const{id:r}=t.params,{promise:n}=y(this,o,"f").get(e,r)??(0,A.throwError)(`Request '${r}' not found`);return y(this,o,"f").delete(e,r),n.reject(new Error("Request rejected by user or snap.")),null},f=async function({address:e,method:t,params:r,chainId:s=""}){const{account:c,snapId:u}=y(this,n,"m",p).call(this,e);if(!c.methods.includes(t))throw new Error(`Method '${t}' not supported for account ${c.address}`);const l=(0,T.v4)(),d=new E.DeferredPromise;y(this,o,"f").set(l,{promise:d,snapId:u});const h=await(async()=>{try{return await y(this,i,"f").withSnapId(u).submitRequest({id:l,scope:s,account:c.id,request:{method:t,...r!==undefined&&{params:r}}})}catch(e){throw y(this,o,"f").delete(u,l),e}})();if(!h.pending)return y(this,o,"f").delete(u,l),h.result;if(h.redirect?.message||h.redirect?.url){const{message:e="",url:t=""}=h.redirect;await y(this,a,"f").redirectUser(u,t,e)}return d.promise},p=function(e){return[...y(this,s,"f").values()].find((({account:t})=>(0,A.equalsIgnoreCase)(t.address,e)))??(0,A.throwError)(`Account '${e}' not found`)},m=function(e){const t=y(this,i,"f").getController().get(e);return t?{id:e,name:t.manifest.proposedName,enabled:t.enabled}:undefined},P.type=r.SNAP_KEYRING_TYPE}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/SnapKeyring.js"}],[1112,{"./SnapKeyring":1111,"./types":1113},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./types"),r),i(e("./SnapKeyring"),r)}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/index.js"}],[1113,{"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SnapMessageStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct");r.SnapMessageStruct=(0,i.object)({method:(0,i.string)(),params:(0,i.optional)((0,i.union)([(0,i.array)(n.JsonStruct),(0,i.record)((0,i.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/types.js"}],[1114,{superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.equalsIgnoreCase=r.throwError=r.ensureDefined=r.toJson=r.unique=r.strictMask=void 0;const n=e("superstruct");r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e},r.unique=function(e){return[...new Set(e)]},r.toJson=function(e){return JSON.parse(JSON.stringify(e))},r.ensureDefined=function(e){if(e===undefined)throw new Error("Argument is undefined")},r.throwError=function(e){throw new Error(e)},r.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()}}}},{package:"@metamask/eth-snap-keyring",file:"node_modules/@metamask/eth-snap-keyring/dist/util.js"}],[1115,{"./superstruct":1135,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcRequestStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("./superstruct");r.JsonRpcRequestStruct=(0,s.object)({jsonrpc:(0,i.literal)("2.0"),id:(0,i.union)([(0,i.string)(),(0,i.number)(),(0,i.literal)(null)]),method:(0,i.string)(),params:(0,s.exactOptional)((0,i.union)([(0,i.array)(n.JsonStruct),(0,i.record)((0,i.string)(),n.JsonStruct)]))})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/JsonRpcRequest.js"}],[1116,{"./internal/api":1126,"./internal/rpc":1131,"./utils":1136,superstruct:3935,uuid:1137},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringClient=void 0;const c=e("superstruct"),u=e("uuid"),l=e("./internal/api"),d=e("./internal/rpc"),h=e("./utils");r.KeyringClient=class{constructor(e){n.add(this),i.set(this,void 0),o(this,i,e,"f")}async listAccounts(){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ListAccounts}),l.ListAccountsResponseStruct)}async getAccount(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.GetAccount,params:{id:e}}),l.GetAccountResponseStruct)}async createAccount(e={}){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.CreateAccount,params:{options:e}}),l.CreateAccountResponseStruct)}async filterAccountChains(e,t){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.FilterAccountChains,params:{id:e,chains:t}}),l.FilterAccountChainsResponseStruct)}async updateAccount(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.UpdateAccount,params:{account:e}}),l.UpdateAccountResponseStruct)}async deleteAccount(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.DeleteAccount,params:{id:e}}),l.DeleteAccountResponseStruct)}async exportAccount(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ExportAccount,params:{id:e}}),l.ExportAccountResponseStruct)}async listRequests(){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ListRequests}),l.ListRequestsResponseStruct)}async getRequest(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.GetRequest,params:{id:e}}),l.GetRequestResponseStruct)}async submitRequest(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.SubmitRequest,params:e}),l.SubmitRequestResponseStruct)}async approveRequest(e,t={}){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ApproveRequest,params:{id:e,data:t}}),l.ApproveRequestResponseStruct)}async rejectRequest(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.RejectRequest,params:{id:e}}),l.RejectRequestResponseStruct)}},i=new WeakMap,n=new WeakSet,s=async function(e){return a(this,i,"f").send({jsonrpc:"2.0",id:(0,u.v4)(),...e})}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringClient.js"}],[1117,{"./KeyringClient":1116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},u=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapControllerClient=void 0;const l=e("./KeyringClient");class d{constructor(e,t,r,a){n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),c(this,s,e,"f"),c(this,n,t,"f"),c(this,i,r,"f"),c(this,o,a,"f")}async send(e){return u(this,s,"f").handleRequest({snapId:u(this,n,"f"),origin:u(this,i,"f"),handler:u(this,o,"f"),request:e})}}n=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap;class h extends l.KeyringClient{constructor({controller:e,snapId:t="undefined",origin:r="metamask",handler:n="onKeyringRequest"}){super(new d(e,t,r,n)),a.set(this,void 0),c(this,a,e,"f")}withSnapId(e){return new h({controller:u(this,a,"f"),snapId:e})}getController(){return u(this,a,"f")}}r.KeyringSnapControllerClient=h,a=new WeakMap}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringSnapControllerClient.js"}],[1118,{"./KeyringClient":1116},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapRpcClient=r.SnapRpcSender=void 0;const a=e("./KeyringClient");class c{constructor(e,t){n.set(this,void 0),i.set(this,void 0),s(this,n,e,"f"),s(this,i,t,"f")}async send(e){return o(this,i,"f").request({method:"wallet_invokeKeyring",params:{snapId:o(this,n,"f"),request:e}})}}r.SnapRpcSender=c,n=new WeakMap,i=new WeakMap;class u extends a.KeyringClient{constructor(e,t){super(new c(e,t))}}r.KeyringSnapRpcClient=u}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/KeyringSnapRpcClient.js"}],[1119,{"./superstruct":1135,"./utils":1136,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringResponseStruct=r.KeyringAccountDataStruct=r.KeyringRequestStruct=r.KeyringAccountStruct=r.EthAccountType=r.EthMethod=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("./superstruct"),o=e("./utils");var a,c;!function(e){e.PersonalSign="personal_sign",e.Sign="eth_sign",e.SignTransaction="eth_signTransaction",e.SignTypedDataV1="eth_signTypedData_v1",e.SignTypedDataV3="eth_signTypedData_v3",e.SignTypedDataV4="eth_signTypedData_v4",e.PrepareUserOperation="eth_prepareUserOperation",e.PatchUserOperation="eth_patchUserOperation",e.SignUserOperation="eth_signUserOperation"}(a=r.EthMethod||(r.EthMethod={})),function(e){e.Eoa="eip155:eoa",e.Erc4337="eip155:erc4337"}(c=r.EthAccountType||(r.EthAccountType={})),r.KeyringAccountStruct=(0,s.object)({id:o.UuidStruct,address:(0,i.string)(),options:(0,i.record)((0,i.string)(),n.JsonStruct),methods:(0,i.array)((0,i.enums)([`${a.PersonalSign}`,`${a.Sign}`,`${a.SignTransaction}`,`${a.SignTypedDataV1}`,`${a.SignTypedDataV3}`,`${a.SignTypedDataV4}`,`${a.PrepareUserOperation}`,`${a.PatchUserOperation}`,`${a.SignUserOperation}`])),type:(0,i.enums)([`${c.Eoa}`,`${c.Erc4337}`])}),r.KeyringRequestStruct=(0,s.object)({id:o.UuidStruct,scope:(0,i.string)(),account:o.UuidStruct,request:(0,s.object)({method:(0,i.string)(),params:(0,s.exactOptional)((0,i.union)([(0,i.array)(n.JsonStruct),(0,i.record)((0,i.string)(),n.JsonStruct)]))})}),r.KeyringAccountDataStruct=(0,i.record)((0,i.string)(),n.JsonStruct),r.KeyringResponseStruct=(0,i.union)([(0,s.object)({pending:(0,i.literal)(!0),redirect:(0,s.exactOptional)((0,s.object)({message:(0,s.exactOptional)((0,i.string)()),url:(0,s.exactOptional)((0,i.string)())}))}),(0,s.object)({pending:(0,i.literal)(!1),result:n.JsonStruct})])}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/api.js"}],[112,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:21,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=21;try{const e=function(e){const t=e;return delete t.BlacklistController,delete t.RecentBlocks,t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #21${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/021.js"}],[1120,{"./types":1121},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/erc4337/index.js"}],[1121,{"../../superstruct":1135,"../types":1123,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUserOperationPatchStruct=r.EthBaseUserOperationStruct=r.EthBaseTransactionStruct=r.EthUserOperationStruct=void 0;const n=e("superstruct"),i=e("../../superstruct"),s=e("../types");r.EthUserOperationStruct=(0,i.object)({sender:s.EthAddressStruct,nonce:s.EthUint256Struct,initCode:s.EthBytesStruct,callData:s.EthBytesStruct,callGasLimit:s.EthUint256Struct,verificationGasLimit:s.EthUint256Struct,preVerificationGas:s.EthUint256Struct,maxFeePerGas:s.EthUint256Struct,maxPriorityFeePerGas:s.EthUint256Struct,paymasterAndData:s.EthBytesStruct,signature:s.EthBytesStruct}),r.EthBaseTransactionStruct=(0,i.object)({to:s.EthAddressStruct,value:s.EthUint256Struct,data:s.EthBytesStruct}),r.EthBaseUserOperationStruct=(0,i.object)({nonce:s.EthUint256Struct,initCode:s.EthBytesStruct,callData:s.EthBytesStruct,gasLimits:(0,i.exactOptional)((0,i.object)({callGasLimit:s.EthUint256Struct,verificationGasLimit:s.EthUint256Struct,preVerificationGas:s.EthUint256Struct})),dummyPaymasterAndData:s.EthBytesStruct,dummySignature:s.EthBytesStruct,bundlerUrl:(0,n.string)()}),r.EthUserOperationPatchStruct=(0,i.object)({paymasterAndData:s.EthBytesStruct})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/erc4337/types.js"}],[1122,{"./erc4337":1120,"./types":1123},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./erc4337"),r),i(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/index.js"}],[1123,{"../superstruct":1135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUint256Struct=r.EthAddressStruct=r.EthBytesStruct=void 0;const n=e("../superstruct");r.EthBytesStruct=(0,n.definePattern)("EthBytes",/^0x[0-9a-f]*$/iu),r.EthAddressStruct=(0,n.definePattern)("EthAddress",/^0x[0-9a-f]{40}$/iu),r.EthUint256Struct=(0,n.definePattern)("EthUint256",/^0x([1-9a-f][0-9a-f]*|0)$/iu)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/eth/types.js"}],[1124,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringEvent=void 0,function(e){e.AccountCreated="notify:accountCreated",e.AccountUpdated="notify:accountUpdated",e.AccountDeleted="notify:accountDeleted",e.RequestApproved="notify:requestApproved",e.RequestRejected="notify:requestRejected"}(r.KeyringEvent||(r.KeyringEvent={}))}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/events.js"}],[1125,{"./KeyringClient":1116,"./KeyringSnapControllerClient":1117,"./KeyringSnapRpcClient":1118,"./api":1119,"./eth":1122,"./events":1124,"./internal":1130,"./rpc-handler":1133,"./snap-utils":1134,"./superstruct":1135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./api"),r),i(e("./eth"),r),i(e("./events"),r),i(e("./internal"),r),i(e("./KeyringClient"),r),i(e("./KeyringSnapControllerClient"),r),i(e("./KeyringSnapRpcClient"),r),i(e("./rpc-handler"),r),i(e("./snap-utils"),r),i(e("./superstruct"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/index.js"}],[1126,{"../api":1119,"../utils":1136,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RejectRequestResponseStruct=r.RejectRequestRequestStruct=r.ApproveRequestResponseStruct=r.ApproveRequestRequestStruct=r.SubmitRequestResponseStruct=r.SubmitRequestRequestStruct=r.GetRequestResponseStruct=r.GetRequestRequestStruct=r.ListRequestsResponseStruct=r.ListRequestsRequestStruct=r.ExportAccountResponseStruct=r.ExportAccountRequestStruct=r.DeleteAccountResponseStruct=r.DeleteAccountRequestStruct=r.UpdateAccountResponseStruct=r.UpdateAccountRequestStruct=r.FilterAccountChainsResponseStruct=r.FilterAccountChainsStruct=r.CreateAccountResponseStruct=r.CreateAccountRequestStruct=r.GetAccountResponseStruct=r.GetAccountRequestStruct=r.ListAccountsResponseStruct=r.ListAccountsRequestStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("../api"),o=e("../utils"),a={jsonrpc:(0,i.literal)("2.0"),id:(0,i.union)([(0,i.string)(),(0,i.number)(),(0,i.literal)(null)])};r.ListAccountsRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_listAccounts")}),r.ListAccountsResponseStruct=(0,i.array)(s.KeyringAccountStruct),r.GetAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_getAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.GetAccountResponseStruct=s.KeyringAccountStruct,r.CreateAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_createAccount"),params:(0,i.object)({options:(0,i.record)((0,i.string)(),n.JsonStruct)})}),r.CreateAccountResponseStruct=s.KeyringAccountStruct,r.FilterAccountChainsStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_filterAccountChains"),params:(0,i.object)({id:o.UuidStruct,chains:(0,i.array)((0,i.string)())})}),r.FilterAccountChainsResponseStruct=(0,i.array)((0,i.string)()),r.UpdateAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_updateAccount"),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.UpdateAccountResponseStruct=(0,i.literal)(null),r.DeleteAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_deleteAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.DeleteAccountResponseStruct=(0,i.literal)(null),r.ExportAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_exportAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.ExportAccountResponseStruct=s.KeyringAccountDataStruct,r.ListRequestsRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_listRequests")}),r.ListRequestsResponseStruct=(0,i.array)(s.KeyringRequestStruct),r.GetRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_getRequest"),params:(0,i.object)({id:o.UuidStruct})}),r.GetRequestResponseStruct=s.KeyringRequestStruct,r.SubmitRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_submitRequest"),params:s.KeyringRequestStruct}),r.SubmitRequestResponseStruct=s.KeyringResponseStruct,r.ApproveRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_approveRequest"),params:(0,i.object)({id:o.UuidStruct,data:(0,i.record)((0,i.string)(),n.JsonStruct)})}),r.ApproveRequestResponseStruct=(0,i.literal)(null),r.RejectRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_rejectRequest"),params:(0,i.object)({id:o.UuidStruct})}),r.RejectRequestResponseStruct=(0,i.literal)(null)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/api.js"}],[1127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/eth/EthKeyring.js"}],[1128,{"./EthKeyring":1127},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./EthKeyring"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/eth/index.js"}],[1129,{"../api":1119,"../events":1124,"../utils":1136,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestRejectedEventStruct=r.RequestApprovedEventStruct=r.AccountDeletedEventStruct=r.AccountUpdatedEventStruct=r.AccountCreatedEventStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("../api"),o=e("../events"),a=e("../utils");r.AccountCreatedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountCreated}`),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.AccountUpdatedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountUpdated}`),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.AccountDeletedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountDeleted}`),params:(0,i.object)({id:a.UuidStruct})}),r.RequestApprovedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.RequestApproved}`),params:(0,i.object)({id:a.UuidStruct,result:n.JsonStruct})}),r.RequestRejectedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.RequestRejected}`),params:(0,i.object)({id:a.UuidStruct})})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/events.js"}],[113,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/transaction-controller"),i=e("lodash");r.default={version:22,migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=22;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==n.TransactionStatus.submitted||e.submittedTime||(e.submittedTime=(new Date).getTime()),e)))}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #22${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/022.js"}],[1130,{"./api":1126,"./eth":1128,"./events":1129,"./rpc":1131,"./types":1132},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./api"),r),i(e("./eth"),r),i(e("./events"),r),i(e("./rpc"),r),i(e("./types"),r)}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/index.js"}],[1131,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.isKeyringRpcMethod=r.KeyringRpcMethod=void 0,function(e){e.ListAccounts="keyring_listAccounts",e.GetAccount="keyring_getAccount",e.CreateAccount="keyring_createAccount",e.FilterAccountChains="keyring_filterAccountChains",e.UpdateAccount="keyring_updateAccount",e.DeleteAccount="keyring_deleteAccount",e.ExportAccount="keyring_exportAccount",e.ListRequests="keyring_listRequests",e.GetRequest="keyring_getRequest",e.SubmitRequest="keyring_submitRequest",e.ApproveRequest="keyring_approveRequest",e.RejectRequest="keyring_rejectRequest"}(n=r.KeyringRpcMethod||(r.KeyringRpcMethod={})),r.isKeyringRpcMethod=function(e){return Object.values(n).includes(e)}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/rpc.js"}],[1132,{"../api":1119,"../superstruct":1135,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalAccountStruct=void 0;const n=e("superstruct"),i=e("../api"),s=e("../superstruct");r.InternalAccountStruct=(0,s.object)({...i.KeyringAccountStruct.schema,metadata:(0,s.object)({name:(0,n.string)(),snap:(0,s.exactOptional)((0,s.object)({id:(0,n.string)(),enabled:(0,n.boolean)(),name:(0,n.string)()})),lastSelected:(0,s.exactOptional)((0,n.number)()),keyring:(0,s.object)({type:(0,n.string)()})})})}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/internal/types.js"}],[1133,{"./JsonRpcRequest":1115,"./internal/api":1126,"./internal/rpc":1131,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleKeyringRequest=r.MethodNotSupportedError=void 0;const n=e("superstruct"),i=e("./internal/api"),s=e("./internal/rpc"),o=e("./JsonRpcRequest");class a extends Error{constructor(e){super(`Method not supported: ${e}`)}}r.MethodNotSupportedError=a,r.handleKeyringRequest=async function(e,t){switch((0,n.assert)(t,o.JsonRpcRequestStruct),t.method){case s.KeyringRpcMethod.ListAccounts:return(0,n.assert)(t,i.ListAccountsRequestStruct),e.listAccounts();case s.KeyringRpcMethod.GetAccount:return(0,n.assert)(t,i.GetAccountRequestStruct),e.getAccount(t.params.id);case s.KeyringRpcMethod.CreateAccount:return(0,n.assert)(t,i.CreateAccountRequestStruct),e.createAccount(t.params.options);case s.KeyringRpcMethod.FilterAccountChains:return(0,n.assert)(t,i.FilterAccountChainsStruct),e.filterAccountChains(t.params.id,t.params.chains);case s.KeyringRpcMethod.UpdateAccount:return(0,n.assert)(t,i.UpdateAccountRequestStruct),e.updateAccount(t.params.account);case s.KeyringRpcMethod.DeleteAccount:return(0,n.assert)(t,i.DeleteAccountRequestStruct),e.deleteAccount(t.params.id);case s.KeyringRpcMethod.ExportAccount:if(e.exportAccount===undefined)throw new a(t.method);return(0,n.assert)(t,i.ExportAccountRequestStruct),e.exportAccount(t.params.id);case s.KeyringRpcMethod.ListRequests:if(e.listRequests===undefined)throw new a(t.method);return(0,n.assert)(t,i.ListRequestsRequestStruct),e.listRequests();case s.KeyringRpcMethod.GetRequest:if(e.getRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.GetRequestRequestStruct),e.getRequest(t.params.id);case s.KeyringRpcMethod.SubmitRequest:return(0,n.assert)(t,i.SubmitRequestRequestStruct),e.submitRequest(t.params);case s.KeyringRpcMethod.ApproveRequest:if(e.approveRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.ApproveRequestRequestStruct),e.approveRequest(t.params.id,t.params.data);case s.KeyringRpcMethod.RejectRequest:if(e.rejectRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.RejectRequestRequestStruct),e.rejectRequest(t.params.id);default:throw new a(t.method)}}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/rpc-handler.js"}],[1134,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.emitSnapKeyringEvent=void 0,r.emitSnapKeyringEvent=async function(e,t,r){await e.request({method:"snap_manageAccounts",params:{method:t,params:{...r}}})}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/snap-utils.js"}],[1135,{superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.definePattern=r.exactOptional=r.object=void 0;const n=e("superstruct");function i(e){return e.path[e.path.length-1]in e.branch[e.branch.length-2]}r.object=function(e){return(0,n.object)(e)},r.exactOptional=function(e){return new n.Struct({...e,validator:(t,r)=>!i(r)||e.validator(t,r),refiner:(t,r)=>!i(r)||e.refiner(t,r)})},r.definePattern=function(e,t){return(0,n.define)(e,(e=>"string"==typeof e&&t.test(e)))}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/superstruct.js"}],[1136,{"./superstruct":1135,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.strictMask=r.UuidStruct=void 0;const n=e("superstruct"),i=e("./superstruct");r.UuidStruct=(0,i.definePattern)("UuidV4",/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/iu),r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e}}}},{package:"@metamask/eth-snap-keyring>@metamask/keyring-api",file:"node_modules/@metamask/eth-snap-keyring/node_modules/@metamask/keyring-api/dist/utils.js"}],[1137,{"./nil.js":1140,"./parse.js":1141,"./stringify.js":1145,"./v1.js":1146,"./v3.js":1147,"./v4.js":1149,"./v5.js":1150,"./validate.js":1151,"./version.js":1152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),i=h(e("./v3.js")),s=h(e("./v4.js")),o=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/index.js"}],[1138,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,s,o){return i((a=i(i(t,e),i(n,o)))<<(c=s)|a>>>32-c,r);var a,c}function o(e,t,r,n,i,o,a){return s(t&r|~t&n,e,t,i,o,a)}function a(e,t,r,n,i,o,a){return s(t&n|r&~n,e,t,i,o,a)}function c(e,t,r,n,i,o,a){return s(t^r^n,e,t,i,o,a)}function u(e,t,r,n,i,o,a){return s(r^(t|~n),e,t,i,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,s=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=s,f=l,p=d;r=o(r,s,l,d,e[t],7,-680876936),d=o(d,r,s,l,e[t+1],12,-389564586),l=o(l,d,r,s,e[t+2],17,606105819),s=o(s,l,d,r,e[t+3],22,-1044525330),r=o(r,s,l,d,e[t+4],7,-176418897),d=o(d,r,s,l,e[t+5],12,1200080426),l=o(l,d,r,s,e[t+6],17,-1473231341),s=o(s,l,d,r,e[t+7],22,-45705983),r=o(r,s,l,d,e[t+8],7,1770035416),d=o(d,r,s,l,e[t+9],12,-1958414417),l=o(l,d,r,s,e[t+10],17,-42063),s=o(s,l,d,r,e[t+11],22,-1990404162),r=o(r,s,l,d,e[t+12],7,1804603682),d=o(d,r,s,l,e[t+13],12,-40341101),l=o(l,d,r,s,e[t+14],17,-1502002290),s=o(s,l,d,r,e[t+15],22,1236535329),r=a(r,s,l,d,e[t+1],5,-165796510),d=a(d,r,s,l,e[t+6],9,-1069501632),l=a(l,d,r,s,e[t+11],14,643717713),s=a(s,l,d,r,e[t],20,-373897302),r=a(r,s,l,d,e[t+5],5,-701558691),d=a(d,r,s,l,e[t+10],9,38016083),l=a(l,d,r,s,e[t+15],14,-660478335),s=a(s,l,d,r,e[t+4],20,-405537848),r=a(r,s,l,d,e[t+9],5,568446438),d=a(d,r,s,l,e[t+14],9,-1019803690),l=a(l,d,r,s,e[t+3],14,-187363961),s=a(s,l,d,r,e[t+8],20,1163531501),r=a(r,s,l,d,e[t+13],5,-1444681467),d=a(d,r,s,l,e[t+2],9,-51403784),l=a(l,d,r,s,e[t+7],14,1735328473),s=a(s,l,d,r,e[t+12],20,-1926607734),r=c(r,s,l,d,e[t+5],4,-378558),d=c(d,r,s,l,e[t+8],11,-2022574463),l=c(l,d,r,s,e[t+11],16,1839030562),s=c(s,l,d,r,e[t+14],23,-35309556),r=c(r,s,l,d,e[t+1],4,-1530992060),d=c(d,r,s,l,e[t+4],11,1272893353),l=c(l,d,r,s,e[t+7],16,-155497632),s=c(s,l,d,r,e[t+10],23,-1094730640),r=c(r,s,l,d,e[t+13],4,681279174),d=c(d,r,s,l,e[t],11,-358537222),l=c(l,d,r,s,e[t+3],16,-722521979),s=c(s,l,d,r,e[t+6],23,76029189),r=c(r,s,l,d,e[t+9],4,-640364487),d=c(d,r,s,l,e[t+12],11,-421815835),l=c(l,d,r,s,e[t+15],16,530742520),s=c(s,l,d,r,e[t+2],23,-995338651),r=u(r,s,l,d,e[t],6,-198630844),d=u(d,r,s,l,e[t+7],10,1126891415),l=u(l,d,r,s,e[t+14],15,-1416354905),s=u(s,l,d,r,e[t+5],21,-57434055),r=u(r,s,l,d,e[t+12],6,1700485571),d=u(d,r,s,l,e[t+3],10,-1894986606),l=u(l,d,r,s,e[t+10],15,-1051523),s=u(s,l,d,r,e[t+1],21,-2054922799),r=u(r,s,l,d,e[t+8],6,1873313359),d=u(d,r,s,l,e[t+15],10,-30611744),l=u(l,d,r,s,e[t+6],15,-1560198380),s=u(s,l,d,r,e[t+13],21,1309151649),r=u(r,s,l,d,e[t+4],6,-145523070),d=u(d,r,s,l,e[t+11],10,-1120210379),l=u(l,d,r,s,e[t+2],15,718787259),s=u(s,l,d,r,e[t+9],21,-343485551),r=i(r,n),s=i(s,h),l=i(l,f),d=i(d,p)}return[r,s,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/md5-browser.js"}],[1139,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/native-browser.js"}],[114,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:23,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=23;try{const e=function(e){const t=e,{TransactionController:r}=t;if(r&&r.transactions){const{transactions:e}=t.TransactionController;if(e.length<=40)return t;const r=e.reverse();let n=!0;for(;r.length>40&&n;){const e=r.findIndex((e=>e.status===i.TransactionStatus.failed||e.status===i.TransactionStatus.rejected||e.status===i.TransactionStatus.confirmed||e.status===i.TransactionStatus.dropped));e<0?n=!1:r.splice(e,1)}t.TransactionController.transactions=r.reverse()}return t}(t.data);t.data=e}catch(e){console.warn(`MetaMask Migration #23${e.stack}`)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/023.js"}],[1140,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/nil.js"}],[1141,{"./validate.js":1151},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/parse.js"}],[1142,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/regex.js"}],[1143,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/rng-browser.js"}],[1144,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const s=new Uint32Array(80);for(let t=0;t<16;++t)s[t]=a[e][t];for(let e=16;e<80;++e)s[e]=i(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let o=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=i(o,5)+n(r,c,u,l)+d+t[r]+s[e]>>>0;d=l,l=u,u=i(c,30)>>>0,c=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/sha1-browser.js"}],[1145,{"./validate.js":1151},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function o(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=o(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/stringify.js"}],[1146,{"./rng.js":1143,"./stringify.js":1145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./rng.js"))&&n.__esModule?n:{default:n},s=e("./stringify.js");let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||o,h=e.clockseq!==undefined?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||i.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:u+1;const m=f-c+(p-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=f/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,s.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v1.js"}],[1147,{"./md5.js":1138,"./v35.js":1148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./md5.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,i.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v3.js"}],[1148,{"./parse.js":1141,"./stringify.js":1145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,s.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,i.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,i=e("./stringify.js"),s=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v35.js"}],[1149,{"./native.js":1139,"./rng.js":1143,"./stringify.js":1145},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),i=o(e("./rng.js")),s=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,s.unsafeStringify)(o)};r.default=a}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v4.js"}],[115,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:24,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=24;const r=function(e){const t=e;if(!t.TransactionController)return t;const{transactions:r}=t.TransactionController;return t.TransactionController.transactions=r.map(((e,t)=>(e.status===i.TransactionStatus.unapproved&&e.txParams&&e.txParams.from&&(e.txParams.from=e.txParams.from.toLowerCase()),e))),t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/024.js"}],[1150,{"./sha1.js":1144,"./v35.js":1148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./sha1.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,i.default);r.default=o}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/v5.js"}],[1151,{"./regex.js":1142},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var s=function(e){return"string"==typeof e&&i.default.test(e)};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/validate.js"}],[1152,{"./validate.js":1151},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=s}}},{package:"@metamask/eth-snap-keyring>uuid",file:"node_modules/@metamask/eth-snap-keyring/node_modules/uuid/dist/version.js"}],[1157,{"./trezor-bridge":1158,"./trezor-connect-bridge":1159,"./trezor-keyring":1160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./trezor-keyring"),r),i(e("./trezor-bridge"),r),i(e("./trezor-connect-bridge"),r)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.js"}],[1158,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-bridge.js"}],[1159,{"@trezor/connect-web":1965},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorConnectBridge=void 0;const o=s(e("@trezor/connect-web"));r.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){o.default.on(o.DEVICE_EVENT,(e=>{var t;e.type===o.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)})),this.trezorConnectInitiated||(await o.default.init(e),this.trezorConnectInitiated=!0)}dispose(){return o.default.dispose(),Promise.resolve()}getPublicKey(e){return o.default.getPublicKey(e)}ethereumSignTransaction(e){return o.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return o.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return o.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.js"}],[116,{"../lib/util":91,"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller"),s=e("../lib/util");r.default={version:25,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=25;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.map((e=>(e.status!==i.TransactionStatus.unapproved||(e.txParams=function(e){const t={from:e=>(0,s.addHexPrefix)(e).toLowerCase(),to:()=>(0,s.addHexPrefix)(e.to).toLowerCase(),nonce:e=>(0,s.addHexPrefix)(e),value:e=>(0,s.addHexPrefix)(e),data:e=>(0,s.addHexPrefix)(e),gas:e=>(0,s.addHexPrefix)(e),gasPrice:e=>(0,s.addHexPrefix)(e)},r={};return Object.keys(t).forEach((n=>{e[n]&&(r[n]=t[n](e[n]))})),r}(e.txParams)),e)))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/025.js"}],[1160,{"@ethereumjs/tx":377,"@ethereumjs/util":389,"@trezor/connect-plugin-ethereum":1961,buffer:2430,events:2838,hdkey:3148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n,i,s,o,a,c,u=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&u(t,e,r);return l(t,e),t},h=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.TrezorKeyring=r.TREZOR_CONNECT_MANIFEST=void 0;const p=e("events"),m=d(e("@ethereumjs/util")),g=f(e("hdkey")),y=e("@ethereumjs/tx"),w=e("@trezor/connect-plugin-ethereum"),b="m/44'/60'/0'/0",v={[b]:!0,"m/44'/60'/0'":!0,"m/44'/1'/0'/0":!0},k="Trezor Hardware",_=1e3;async function S(e){return new Promise((t=>setTimeout(t,e)))}function T(e){return"function"==typeof e.getChainId}r.TREZOR_CONNECT_MANIFEST={email:"support@metamask.io",appUrl:"https://metamask.io"};class E extends p.EventEmitter{constructor({bridge:e}){if(super(),n.add(this),this.type=k,this.accounts=[],this.hdk=new g.default,this.hdPath=b,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}init(){return this.bridge.init({manifest:r.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts,page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e={}){var t,r,n,i;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:b,this.accounts=null!==(r=e.accounts)&&void 0!==r?r:[],this.page=null!==(n=e.page)&&void 0!==n?n:0,this.perPage=null!==(i=e.perPage)&&void 0!==i?i:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise(((e,r)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then((n=>{var i;n.success?(this.hdk.publicKey=t.from(n.payload.publicKey,"hex"),this.hdk.chainCode=t.from(n.payload.chainCode,"hex"),e("just unlocked")):r(new Error((null===(i=n.payload)||void 0===i?void 0:i.error)||"Unknown error"))})).catch((e=>{r(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e=1){return new Promise(((t,r)=>{this.unlock().then((r=>{const i=this.unlockedAccount,s=i+e;for(let e=i;e<s;e++){const t=h(this,n,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t]),this.page=0}t(this.accounts)})).catch((e=>{r(e)}))}))}async getFirstPage(){return this.page=0,h(this,n,"m",i).call(this,1)}async getNextPage(){return h(this,n,"m",i).call(this,1)}async getPreviousPage(){return h(this,n,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){return T(r)?h(this,n,"m",s).call(this,e,r.getChainId(),r,(e=>(r.v=t.from(e.v,"hex"),r.r=t.from(e.r,"hex"),r.s=t.from(e.s,"hex"),r))):h(this,n,"m",s).call(this,e,Number(r.common.chainId()),r,(e=>{const t=r.toJSON();return t.type=r.type,t.v=m.addHexPrefix(e.v),t.r=m.addHexPrefix(e.r),t.s=m.addHexPrefix(e.s),y.TransactionFactory.fromTxData(t,{common:r.common,freeze:Object.isFrozen(r)})}))}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise(((r,i)=>{this.unlock().then((s=>{setTimeout((()=>{this.bridge.ethereumSignMessage({path:h(this,n,"m",c).call(this,e),message:m.stripHexPrefix(t),hex:!0}).then((t=>{var n;if(t.success){t.payload.address!==m.toChecksumAddress(e)&&i(new Error("signature doesnt match the right address"));const n=`0x${t.payload.signature}`;r(n)}else i(new Error((null===(n=t.payload)||void 0===n?void 0:n.error)||"Unknown error"))})).catch((e=>{i(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}),"just unlocked"===s?_:0)})).catch((e=>{i(new Error((null==e?void 0:e.toString())||"Unknown error"))}))}))}async signTypedData(e,t,{version:r}){var i,s;const o=(0,w.transformTypedData)(t,"V4"===r),{types:a,message:u={},domain:l={},primaryType:d,domain_separator_hash:f,message_hash:p}=o,g=await this.unlock();await S("just unlocked"===g?_:0);const y=await this.bridge.ethereumSignTypedData({path:h(this,n,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},a),{EIP712Domain:null!==(i=a.EIP712Domain)&&void 0!==i?i:[]}),message:u,domain:l,primaryType:d},metamask_v4_compat:!0,domain_separator_hash:f,message_hash:null!=p?p:""});if(y.success){if(m.toChecksumAddress(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(s=y.payload)||void 0===s?void 0:s.error)||"Unknown error")}async exportAccount(){return Promise.reject(new Error("Not supported on this device"))}forgetDevice(){this.accounts=[],this.hdk=new g.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!v[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new g.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}r.TrezorKeyring=E,n=new WeakSet,i=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise(((e,t)=>{this.unlock().then((t=>{const r=(this.page-1)*this.perPage,i=r+this.perPage,s=[];for(let e=r;e<i;e++){const t=h(this,n,"m",a).call(this,"m",e);s.push({address:t,balance:null,index:e}),this.paths[m.toChecksumAddress(t)]=e}e(s)})).catch((e=>{t(e)}))}))},s=async function(e,t,r,i){var s,a;let u;u=T(r)?{to:h(this,n,"m",o).call(this,r.to),value:h(this,n,"m",o).call(this,r.value),data:h(this,n,"m",o).call(this,r.data),chainId:t,nonce:h(this,n,"m",o).call(this,r.nonce),gasLimit:h(this,n,"m",o).call(this,r.gasLimit),gasPrice:h(this,n,"m",o).call(this,r.gasPrice)}:Object.assign(Object.assign({},r.toJSON()),{chainId:t,to:h(this,n,"m",o).call(this,m.toBuffer(r.to))});try{const t=await this.unlock();await S("just unlocked"===t?_:0);const r=await this.bridge.ethereumSignTransaction({path:h(this,n,"m",c).call(this,e),transaction:u});if(r.success){const t=i(r.payload),n=m.toChecksumAddress(m.addHexPrefix(t.getSenderAddress().toString("hex")));if(n!==m.toChecksumAddress(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(s=r.payload)||void 0===s?void 0:s.error)||"Unknown error")}catch(e){throw new Error(null!==(a=null==e?void 0:e.toString())&&void 0!==a?a:"Unknown error")}},o=function(e){return m.bufferToHex(e).toString()},a=function(e,t){const r=this.hdk.derive(`${e}/${t}`),n=m.publicToAddress(r.publicKey,!0).toString("hex");return m.toChecksumAddress(`0x${n}`)},c=function(e){const t=m.toChecksumAddress(e);let r=this.paths[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===h(this,n,"m",a).call(this,"m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${r}`},E.type=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.js"}],[117,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:26,migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=26;try{const e=t.data;t.data=function(e){if(!e.KeyringController||!e.PreferencesController)return e;if(!e.KeyringController.walletNicknames)return e;return e.PreferencesController.identities=Object.keys(e.KeyringController.walletNicknames).reduce(((t,r)=>(t[r]={name:e.KeyringController.walletNicknames[r],address:r},t)),{}),delete e.KeyringController.walletNicknames,e}(e)}catch(e){return console.warn(`MetaMask Migration #26${e.stack}`),Promise.reject(e)}return Promise.resolve(t)}}}}},{package:"$root$",file:"app/scripts/migrations/026.js"}],[118,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:27,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=27;const r=function(e){const t=e;if(t.TransactionController&&t.TransactionController.transactions){const{transactions:e}=t.TransactionController;t.TransactionController.transactions=e.filter((e=>e.status!==i.TransactionStatus.rejected))}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/027.js"}],[119,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:28,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=28;const r=function(e){const t=e;if(t.PreferencesController&&t.PreferencesController.tokens&&t.PreferencesController.identities){const{identities:e,tokens:r}=t.PreferencesController;t.PreferencesController.accountTokens={},Object.keys(e).forEach((e=>{t.PreferencesController.accountTokens[e]={mainnet:r}})),t.PreferencesController.tokens=[]}return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/028.js"}],[12,{"../../../shared/constants/app":4047,"../../../shared/constants/keyring":4054,"../../../shared/constants/metametrics":4057,"@metamask/base-controller":1058,"@metamask/message-manager":1319,events:2838,loglevel:3416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(e("events")),i=l(e("loglevel")),s=e("@metamask/message-manager"),o=e("@metamask/base-controller"),a=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends o.BaseController{constructor({messenger:e,getEncryptionPublicKey:t,getAccountKeyringType:r,getState:i,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:h,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"hub",void 0),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=t,this._getAccountKeyringType=r,this._getState=i,this._metricsEvent=o,this.hub=new n.default,this._encryptionPublicKeyManager=new s.EncryptionPublicKeyManager(undefined,undefined,undefined,["received"]),this._encryptionPublicKeyManager.hub.on("updateBadge",(()=>{this.hub.emit("updateBadge")})),this._encryptionPublicKeyManager.hub.on("unapprovedMessage",(e=>{this._requestApproval(e,"eth_getEncryptionPublicKey")})),this._subscribeToMessageState(this._encryptionPublicKeyManager,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){i.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw i.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.update({unapprovedMessages:{},unapprovedMessagesCount:0})}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:a.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe((e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],i=this._migrateMessage(n);t[r]=i}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e,t){const r=e.metamaskId,n=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:n,type:t},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[120,{"./fail-tx":208,"@metamask/transaction-controller":1724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("@metamask/transaction-controller"),s=(n=e("./fail-tx"))&&n.__esModule?n:{default:n};r.default={version:29,migrate:(0,s.default)(29,"Stuck in approved state for too long.",(e=>{const t=e.status===i.TransactionStatus.approved,r=e.submittedTime,n=Date.now();return t&&n-r>432e5}))}}}},{package:"$root$",file:"app/scripts/migrations/029.js"}],[121,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:30,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=30;const r=function(e){const t=e;if(e.PreferencesController){const{frequentRpcListDetail:e}=t.PreferencesController;e&&(e.forEach(((t,r)=>{Boolean(t.chainId)&&Number.isNaN(parseInt(t.chainId))&&delete e[r].chainId})),t.PreferencesController.frequentRpcListDetail=e)}e.NetworkController&&(t.NetworkController.network&&Number.isNaN(parseInt(t.NetworkController.network))&&delete t.NetworkController.network,t.NetworkController.provider&&t.NetworkController.provider.chainId&&Number.isNaN(parseInt(t.NetworkController.provider.chainId))&&delete t.NetworkController.provider.chainId);return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/030.js"}],[122,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:31,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=31;const r=function(e){const{KeyringController:t,PreferencesController:r}=e;if(t&&r){const{vault:e}=t;r.completedOnboarding=Boolean(e)}return e}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/031.js"}],[123,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:32,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=32;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const{betaUI:e}=t.featureFlags||{};t.completedUiMigration=e}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/032.js"}],[1235,{"./superstruct":1254,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcRequestStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("./superstruct");r.JsonRpcRequestStruct=(0,s.object)({jsonrpc:(0,i.literal)("2.0"),id:(0,i.union)([(0,i.string)(),(0,i.number)(),(0,i.literal)(null)]),method:(0,i.string)(),params:(0,s.exactOptional)((0,i.union)([(0,i.array)(n.JsonStruct),(0,i.record)((0,i.string)(),n.JsonStruct)]))})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/JsonRpcRequest.js"}],[1236,{"./internal/api":1245,"./internal/rpc":1250,"./utils":1255,superstruct:3935,uuid:1256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringClient=void 0;const c=e("superstruct"),u=e("uuid"),l=e("./internal/api"),d=e("./internal/rpc"),h=e("./utils");r.KeyringClient=class{constructor(e){n.add(this),i.set(this,void 0),o(this,i,e,"f")}async listAccounts(){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ListAccounts}),l.ListAccountsResponseStruct)}async getAccount(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.GetAccount,params:{id:e}}),l.GetAccountResponseStruct)}async createAccount(e={}){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.CreateAccount,params:{options:e}}),l.CreateAccountResponseStruct)}async filterAccountChains(e,t){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.FilterAccountChains,params:{id:e,chains:t}}),l.FilterAccountChainsResponseStruct)}async updateAccount(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.UpdateAccount,params:{account:e}}),l.UpdateAccountResponseStruct)}async deleteAccount(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.DeleteAccount,params:{id:e}}),l.DeleteAccountResponseStruct)}async exportAccount(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ExportAccount,params:{id:e}}),l.ExportAccountResponseStruct)}async listRequests(){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ListRequests}),l.ListRequestsResponseStruct)}async getRequest(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.GetRequest,params:{id:e}}),l.GetRequestResponseStruct)}async submitRequest(e){return(0,h.strictMask)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.SubmitRequest,params:e}),l.SubmitRequestResponseStruct)}async approveRequest(e,t={}){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.ApproveRequest,params:{id:e,data:t}}),l.ApproveRequestResponseStruct)}async rejectRequest(e){(0,c.assert)(await a(this,n,"m",s).call(this,{method:d.KeyringRpcMethod.RejectRequest,params:{id:e}}),l.RejectRequestResponseStruct)}},i=new WeakMap,n=new WeakSet,s=async function(e){return a(this,i,"f").send({jsonrpc:"2.0",id:(0,u.v4)(),...e})}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/KeyringClient.js"}],[1237,{"./KeyringClient":1236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringSnapRpcClient=r.SnapRpcSender=void 0;const a=e("./KeyringClient");class c{constructor(e,t){n.set(this,void 0),i.set(this,void 0),s(this,n,e,"f"),s(this,i,t,"f")}async send(e){return o(this,i,"f").request({method:"wallet_invokeKeyring",params:{snapId:o(this,n,"f"),request:e}})}}r.SnapRpcSender=c,n=new WeakMap,i=new WeakMap;class u extends a.KeyringClient{constructor(e,t){super(new c(e,t))}}r.KeyringSnapRpcClient=u}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/KeyringSnapRpcClient.js"}],[1238,{"./superstruct":1254,"./utils":1255,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringResponseStruct=r.KeyringAccountDataStruct=r.KeyringRequestStruct=r.KeyringAccountStruct=r.EthAccountType=r.EthMethod=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("./superstruct"),o=e("./utils");var a,c;!function(e){e.PersonalSign="personal_sign",e.Sign="eth_sign",e.SignTransaction="eth_signTransaction",e.SignTypedDataV1="eth_signTypedData_v1",e.SignTypedDataV3="eth_signTypedData_v3",e.SignTypedDataV4="eth_signTypedData_v4",e.PrepareUserOperation="eth_prepareUserOperation",e.PatchUserOperation="eth_patchUserOperation",e.SignUserOperation="eth_signUserOperation"}(a=r.EthMethod||(r.EthMethod={})),function(e){e.Eoa="eip155:eoa",e.Erc4337="eip155:erc4337"}(c=r.EthAccountType||(r.EthAccountType={})),r.KeyringAccountStruct=(0,s.object)({id:o.UuidStruct,address:(0,i.string)(),options:(0,i.record)((0,i.string)(),n.JsonStruct),methods:(0,i.array)((0,i.enums)([`${a.PersonalSign}`,`${a.Sign}`,`${a.SignTransaction}`,`${a.SignTypedDataV1}`,`${a.SignTypedDataV3}`,`${a.SignTypedDataV4}`,`${a.PrepareUserOperation}`,`${a.PatchUserOperation}`,`${a.SignUserOperation}`])),type:(0,i.enums)([`${c.Eoa}`,`${c.Erc4337}`])}),r.KeyringRequestStruct=(0,s.object)({id:o.UuidStruct,scope:(0,i.string)(),account:o.UuidStruct,request:(0,s.object)({method:(0,i.string)(),params:(0,s.exactOptional)((0,i.union)([(0,i.array)(n.JsonStruct),(0,i.record)((0,i.string)(),n.JsonStruct)]))})}),r.KeyringAccountDataStruct=(0,i.record)((0,i.string)(),n.JsonStruct),r.KeyringResponseStruct=(0,i.union)([(0,s.object)({pending:(0,i.literal)(!0),redirect:(0,s.exactOptional)((0,s.object)({message:(0,s.exactOptional)((0,i.string)()),url:(0,s.exactOptional)((0,i.string)())}))}),(0,s.object)({pending:(0,i.literal)(!1),result:n.JsonStruct})])}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/api.js"}],[1239,{"./types":1240},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./types"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/eth/erc4337/index.js"}],[124,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:33,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=33;const r=function(e){const t=e;e.NoticeController&&delete t.NoticeController;return t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/033.js"}],[1240,{"../../superstruct":1254,"../types":1242,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUserOperationPatchStruct=r.EthBaseUserOperationStruct=r.EthBaseTransactionStruct=r.EthUserOperationStruct=void 0;const n=e("superstruct"),i=e("../../superstruct"),s=e("../types");r.EthUserOperationStruct=(0,i.object)({sender:s.EthAddressStruct,nonce:s.EthUint256Struct,initCode:s.EthBytesStruct,callData:s.EthBytesStruct,callGasLimit:s.EthUint256Struct,verificationGasLimit:s.EthUint256Struct,preVerificationGas:s.EthUint256Struct,maxFeePerGas:s.EthUint256Struct,maxPriorityFeePerGas:s.EthUint256Struct,paymasterAndData:s.EthBytesStruct,signature:s.EthBytesStruct}),r.EthBaseTransactionStruct=(0,i.object)({to:s.EthAddressStruct,value:s.EthUint256Struct,data:s.EthBytesStruct}),r.EthBaseUserOperationStruct=(0,i.object)({nonce:s.EthUint256Struct,initCode:s.EthBytesStruct,callData:s.EthBytesStruct,gasLimits:(0,i.exactOptional)((0,i.object)({callGasLimit:s.EthUint256Struct,verificationGasLimit:s.EthUint256Struct,preVerificationGas:s.EthUint256Struct})),dummyPaymasterAndData:s.EthBytesStruct,dummySignature:s.EthBytesStruct,bundlerUrl:(0,n.string)()}),r.EthUserOperationPatchStruct=(0,i.object)({paymasterAndData:s.EthBytesStruct})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/eth/erc4337/types.js"}],[1241,{"./erc4337":1239,"./types":1242},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./erc4337"),r),i(e("./types"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/eth/index.js"}],[1242,{"../superstruct":1254},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.EthUint256Struct=r.EthAddressStruct=r.EthBytesStruct=void 0;const n=e("../superstruct");r.EthBytesStruct=(0,n.definePattern)("EthBytes",/^0x[0-9a-f]*$/iu),r.EthAddressStruct=(0,n.definePattern)("EthAddress",/^0x[0-9a-f]{40}$/iu),r.EthUint256Struct=(0,n.definePattern)("EthUint256",/^0x([1-9a-f][0-9a-f]*|0)$/iu)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/eth/types.js"}],[1243,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringEvent=void 0,function(e){e.AccountCreated="notify:accountCreated",e.AccountUpdated="notify:accountUpdated",e.AccountDeleted="notify:accountDeleted",e.RequestApproved="notify:requestApproved",e.RequestRejected="notify:requestRejected"}(r.KeyringEvent||(r.KeyringEvent={}))}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/events.js"}],[1244,{"./KeyringClient":1236,"./KeyringSnapRpcClient":1237,"./api":1238,"./eth":1241,"./events":1243,"./internal":1249,"./rpc-handler":1252,"./snap-utils":1253,"./superstruct":1254},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./api"),r),i(e("./eth"),r),i(e("./events"),r),i(e("./internal"),r),i(e("./KeyringClient"),r),i(e("./KeyringSnapRpcClient"),r),i(e("./rpc-handler"),r),i(e("./snap-utils"),r),i(e("./superstruct"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/index.js"}],[1245,{"../api":1238,"../utils":1255,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RejectRequestResponseStruct=r.RejectRequestRequestStruct=r.ApproveRequestResponseStruct=r.ApproveRequestRequestStruct=r.SubmitRequestResponseStruct=r.SubmitRequestRequestStruct=r.GetRequestResponseStruct=r.GetRequestRequestStruct=r.ListRequestsResponseStruct=r.ListRequestsRequestStruct=r.ExportAccountResponseStruct=r.ExportAccountRequestStruct=r.DeleteAccountResponseStruct=r.DeleteAccountRequestStruct=r.UpdateAccountResponseStruct=r.UpdateAccountRequestStruct=r.FilterAccountChainsResponseStruct=r.FilterAccountChainsStruct=r.CreateAccountResponseStruct=r.CreateAccountRequestStruct=r.GetAccountResponseStruct=r.GetAccountRequestStruct=r.ListAccountsResponseStruct=r.ListAccountsRequestStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("../api"),o=e("../utils"),a={jsonrpc:(0,i.literal)("2.0"),id:(0,i.union)([(0,i.string)(),(0,i.number)(),(0,i.literal)(null)])};r.ListAccountsRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_listAccounts")}),r.ListAccountsResponseStruct=(0,i.array)(s.KeyringAccountStruct),r.GetAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_getAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.GetAccountResponseStruct=s.KeyringAccountStruct,r.CreateAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_createAccount"),params:(0,i.object)({options:(0,i.record)((0,i.string)(),n.JsonStruct)})}),r.CreateAccountResponseStruct=s.KeyringAccountStruct,r.FilterAccountChainsStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_filterAccountChains"),params:(0,i.object)({id:o.UuidStruct,chains:(0,i.array)((0,i.string)())})}),r.FilterAccountChainsResponseStruct=(0,i.array)((0,i.string)()),r.UpdateAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_updateAccount"),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.UpdateAccountResponseStruct=(0,i.literal)(null),r.DeleteAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_deleteAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.DeleteAccountResponseStruct=(0,i.literal)(null),r.ExportAccountRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_exportAccount"),params:(0,i.object)({id:o.UuidStruct})}),r.ExportAccountResponseStruct=s.KeyringAccountDataStruct,r.ListRequestsRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_listRequests")}),r.ListRequestsResponseStruct=(0,i.array)(s.KeyringRequestStruct),r.GetRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_getRequest"),params:(0,i.object)({id:o.UuidStruct})}),r.GetRequestResponseStruct=s.KeyringRequestStruct,r.SubmitRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_submitRequest"),params:s.KeyringRequestStruct}),r.SubmitRequestResponseStruct=s.KeyringResponseStruct,r.ApproveRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_approveRequest"),params:(0,i.object)({id:o.UuidStruct,data:(0,i.record)((0,i.string)(),n.JsonStruct)})}),r.ApproveRequestResponseStruct=(0,i.literal)(null),r.RejectRequestRequestStruct=(0,i.object)({...a,method:(0,i.literal)("keyring_rejectRequest"),params:(0,i.object)({id:o.UuidStruct})}),r.RejectRequestResponseStruct=(0,i.literal)(null)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/api.js"}],[1246,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/eth/EthKeyring.js"}],[1247,{"./EthKeyring":1246},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./EthKeyring"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/eth/index.js"}],[1248,{"../api":1238,"../events":1243,"../utils":1255,"@metamask/utils":1769,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RequestRejectedEventStruct=r.RequestApprovedEventStruct=r.AccountDeletedEventStruct=r.AccountUpdatedEventStruct=r.AccountCreatedEventStruct=void 0;const n=e("@metamask/utils"),i=e("superstruct"),s=e("../api"),o=e("../events"),a=e("../utils");r.AccountCreatedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountCreated}`),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.AccountUpdatedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountUpdated}`),params:(0,i.object)({account:s.KeyringAccountStruct})}),r.AccountDeletedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.AccountDeleted}`),params:(0,i.object)({id:a.UuidStruct})}),r.RequestApprovedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.RequestApproved}`),params:(0,i.object)({id:a.UuidStruct,result:n.JsonStruct})}),r.RequestRejectedEventStruct=(0,i.object)({method:(0,i.literal)(`${o.KeyringEvent.RequestRejected}`),params:(0,i.object)({id:a.UuidStruct})})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/events.js"}],[1249,{"./api":1245,"./eth":1247,"./events":1248,"./rpc":1250,"./types":1251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./api"),r),i(e("./eth"),r),i(e("./events"),r),i(e("./rpc"),r),i(e("./types"),r)}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/index.js"}],[125,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:34,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=34;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};e.privacyMode||void 0!==t.migratedPrivacyMode||(t.migratedPrivacyMode=!0,e.privacyMode=!0)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/034.js"}],[1250,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;Object.defineProperty(r,"__esModule",{value:!0}),r.isKeyringRpcMethod=r.KeyringRpcMethod=void 0,function(e){e.ListAccounts="keyring_listAccounts",e.GetAccount="keyring_getAccount",e.CreateAccount="keyring_createAccount",e.FilterAccountChains="keyring_filterAccountChains",e.UpdateAccount="keyring_updateAccount",e.DeleteAccount="keyring_deleteAccount",e.ExportAccount="keyring_exportAccount",e.ListRequests="keyring_listRequests",e.GetRequest="keyring_getRequest",e.SubmitRequest="keyring_submitRequest",e.ApproveRequest="keyring_approveRequest",e.RejectRequest="keyring_rejectRequest"}(n=r.KeyringRpcMethod||(r.KeyringRpcMethod={})),r.isKeyringRpcMethod=function(e){return Object.values(n).includes(e)}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/rpc.js"}],[1251,{"../api":1238,"../superstruct":1254,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.InternalAccountStruct=void 0;const n=e("superstruct"),i=e("../api"),s=e("../superstruct");r.InternalAccountStruct=(0,s.object)({...i.KeyringAccountStruct.schema,metadata:(0,s.object)({name:(0,n.string)(),snap:(0,s.exactOptional)((0,s.object)({id:(0,n.string)(),enabled:(0,n.boolean)(),name:(0,n.string)()})),lastSelected:(0,s.exactOptional)((0,n.number)()),keyring:(0,s.object)({type:(0,n.string)()})})})}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/internal/types.js"}],[1252,{"./JsonRpcRequest":1235,"./internal/api":1245,"./internal/rpc":1250,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.handleKeyringRequest=r.MethodNotSupportedError=void 0;const n=e("superstruct"),i=e("./internal/api"),s=e("./internal/rpc"),o=e("./JsonRpcRequest");class a extends Error{constructor(e){super(`Method not supported: ${e}`)}}r.MethodNotSupportedError=a,r.handleKeyringRequest=async function(e,t){switch((0,n.assert)(t,o.JsonRpcRequestStruct),t.method){case s.KeyringRpcMethod.ListAccounts:return(0,n.assert)(t,i.ListAccountsRequestStruct),e.listAccounts();case s.KeyringRpcMethod.GetAccount:return(0,n.assert)(t,i.GetAccountRequestStruct),e.getAccount(t.params.id);case s.KeyringRpcMethod.CreateAccount:return(0,n.assert)(t,i.CreateAccountRequestStruct),e.createAccount(t.params.options);case s.KeyringRpcMethod.FilterAccountChains:return(0,n.assert)(t,i.FilterAccountChainsStruct),e.filterAccountChains(t.params.id,t.params.chains);case s.KeyringRpcMethod.UpdateAccount:return(0,n.assert)(t,i.UpdateAccountRequestStruct),e.updateAccount(t.params.account);case s.KeyringRpcMethod.DeleteAccount:return(0,n.assert)(t,i.DeleteAccountRequestStruct),e.deleteAccount(t.params.id);case s.KeyringRpcMethod.ExportAccount:if(e.exportAccount===undefined)throw new a(t.method);return(0,n.assert)(t,i.ExportAccountRequestStruct),e.exportAccount(t.params.id);case s.KeyringRpcMethod.ListRequests:if(e.listRequests===undefined)throw new a(t.method);return(0,n.assert)(t,i.ListRequestsRequestStruct),e.listRequests();case s.KeyringRpcMethod.GetRequest:if(e.getRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.GetRequestRequestStruct),e.getRequest(t.params.id);case s.KeyringRpcMethod.SubmitRequest:return(0,n.assert)(t,i.SubmitRequestRequestStruct),e.submitRequest(t.params);case s.KeyringRpcMethod.ApproveRequest:if(e.approveRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.ApproveRequestRequestStruct),e.approveRequest(t.params.id,t.params.data);case s.KeyringRpcMethod.RejectRequest:if(e.rejectRequest===undefined)throw new a(t.method);return(0,n.assert)(t,i.RejectRequestRequestStruct),e.rejectRequest(t.params.id);default:throw new a(t.method)}}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/rpc-handler.js"}],[1253,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.emitSnapKeyringEvent=void 0,r.emitSnapKeyringEvent=async function(e,t,r){await e.request({method:"snap_manageAccounts",params:{method:t,params:{...r}}})}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/snap-utils.js"}],[1254,{superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.definePattern=r.exactOptional=r.object=void 0;const n=e("superstruct");function i(e){return e.path[e.path.length-1]in e.branch[e.branch.length-2]}r.object=function(e){return(0,n.object)(e)},r.exactOptional=function(e){return new n.Struct({...e,validator:(t,r)=>!i(r)||e.validator(t,r),refiner:(t,r)=>!i(r)||e.refiner(t,r)})},r.definePattern=function(e,t){return(0,n.define)(e,(e=>"string"==typeof e&&t.test(e)))}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/superstruct.js"}],[1255,{"./superstruct":1254,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.strictMask=r.UuidStruct=void 0;const n=e("superstruct"),i=e("./superstruct");r.UuidStruct=(0,i.definePattern)("UuidV4",/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/iu),r.strictMask=function(e,t,r){return(0,n.assert)(e,t,r),e}}}},{package:"@metamask/keyring-api",file:"node_modules/@metamask/keyring-api/dist/utils.js"}],[1256,{"./nil.js":1259,"./parse.js":1260,"./stringify.js":1264,"./v1.js":1265,"./v3.js":1266,"./v4.js":1268,"./v5.js":1269,"./validate.js":1270,"./version.js":1271},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return c.default}});var n=h(e("./v1.js")),i=h(e("./v3.js")),s=h(e("./v4.js")),o=h(e("./v5.js")),a=h(e("./nil.js")),c=h(e("./version.js")),u=h(e("./validate.js")),l=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/index.js"}],[1257,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,s,o){return i((a=i(i(t,e),i(n,o)))<<(c=s)|a>>>32-c,r);var a,c}function o(e,t,r,n,i,o,a){return s(t&r|~t&n,e,t,i,o,a)}function a(e,t,r,n,i,o,a){return s(t&n|r&~n,e,t,i,o,a)}function c(e,t,r,n,i,o,a){return s(t^r^n,e,t,i,o,a)}function u(e,t,r,n,i,o,a){return s(r^(t|~n),e,t,i,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,s=-271733879,l=-1732584194,d=271733878;for(let t=0;t<e.length;t+=16){const n=r,h=s,f=l,p=d;r=o(r,s,l,d,e[t],7,-680876936),d=o(d,r,s,l,e[t+1],12,-389564586),l=o(l,d,r,s,e[t+2],17,606105819),s=o(s,l,d,r,e[t+3],22,-1044525330),r=o(r,s,l,d,e[t+4],7,-176418897),d=o(d,r,s,l,e[t+5],12,1200080426),l=o(l,d,r,s,e[t+6],17,-1473231341),s=o(s,l,d,r,e[t+7],22,-45705983),r=o(r,s,l,d,e[t+8],7,1770035416),d=o(d,r,s,l,e[t+9],12,-1958414417),l=o(l,d,r,s,e[t+10],17,-42063),s=o(s,l,d,r,e[t+11],22,-1990404162),r=o(r,s,l,d,e[t+12],7,1804603682),d=o(d,r,s,l,e[t+13],12,-40341101),l=o(l,d,r,s,e[t+14],17,-1502002290),s=o(s,l,d,r,e[t+15],22,1236535329),r=a(r,s,l,d,e[t+1],5,-165796510),d=a(d,r,s,l,e[t+6],9,-1069501632),l=a(l,d,r,s,e[t+11],14,643717713),s=a(s,l,d,r,e[t],20,-373897302),r=a(r,s,l,d,e[t+5],5,-701558691),d=a(d,r,s,l,e[t+10],9,38016083),l=a(l,d,r,s,e[t+15],14,-660478335),s=a(s,l,d,r,e[t+4],20,-405537848),r=a(r,s,l,d,e[t+9],5,568446438),d=a(d,r,s,l,e[t+14],9,-1019803690),l=a(l,d,r,s,e[t+3],14,-187363961),s=a(s,l,d,r,e[t+8],20,1163531501),r=a(r,s,l,d,e[t+13],5,-1444681467),d=a(d,r,s,l,e[t+2],9,-51403784),l=a(l,d,r,s,e[t+7],14,1735328473),s=a(s,l,d,r,e[t+12],20,-1926607734),r=c(r,s,l,d,e[t+5],4,-378558),d=c(d,r,s,l,e[t+8],11,-2022574463),l=c(l,d,r,s,e[t+11],16,1839030562),s=c(s,l,d,r,e[t+14],23,-35309556),r=c(r,s,l,d,e[t+1],4,-1530992060),d=c(d,r,s,l,e[t+4],11,1272893353),l=c(l,d,r,s,e[t+7],16,-155497632),s=c(s,l,d,r,e[t+10],23,-1094730640),r=c(r,s,l,d,e[t+13],4,681279174),d=c(d,r,s,l,e[t],11,-358537222),l=c(l,d,r,s,e[t+3],16,-722521979),s=c(s,l,d,r,e[t+6],23,76029189),r=c(r,s,l,d,e[t+9],4,-640364487),d=c(d,r,s,l,e[t+12],11,-421815835),l=c(l,d,r,s,e[t+15],16,530742520),s=c(s,l,d,r,e[t+2],23,-995338651),r=u(r,s,l,d,e[t],6,-198630844),d=u(d,r,s,l,e[t+7],10,1126891415),l=u(l,d,r,s,e[t+14],15,-1416354905),s=u(s,l,d,r,e[t+5],21,-57434055),r=u(r,s,l,d,e[t+12],6,1700485571),d=u(d,r,s,l,e[t+3],10,-1894986606),l=u(l,d,r,s,e[t+10],15,-1051523),s=u(s,l,d,r,e[t+1],21,-2054922799),r=u(r,s,l,d,e[t+8],6,1873313359),d=u(d,r,s,l,e[t+15],10,-30611744),l=u(l,d,r,s,e[t+6],15,-1560198380),s=u(s,l,d,r,e[t+13],21,1309151649),r=u(r,s,l,d,e[t+4],6,-145523070),d=u(d,r,s,l,e[t+11],10,-1120210379),l=u(l,d,r,s,e[t+2],15,718787259),s=u(s,l,d,r,e[t+9],21,-343485551),r=i(r,n),s=i(s,h),l=i(l,f),d=i(d,p)}return[r,s,l,d]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/md5-browser.js"}],[1258,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/native-browser.js"}],[1259,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/nil.js"}],[126,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:35,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=35,t.data=function(e){e.PreferencesController&&e.PreferencesController.seedWords!==undefined&&delete e.PreferencesController.seedWords;return e}(t.data),t}}}}},{package:"$root$",file:"app/scripts/migrations/035.js"}],[1260,{"./validate.js":1270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=s}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/parse.js"}],[1261,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/regex.js"}],[1262,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/rng-browser.js"}],[1263,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const s=new Uint32Array(80);for(let t=0;t<16;++t)s[t]=a[e][t];for(let e=16;e<80;++e)s[e]=i(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let o=r[0],c=r[1],u=r[2],l=r[3],d=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=i(o,5)+n(r,c,u,l)+d+t[r]+s[e]>>>0;d=l,l=u,u=i(c,30)>>>0,c=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=s}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/sha1-browser.js"}],[1264,{"./validate.js":1270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function o(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=o(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/stringify.js"}],[1265,{"./rng.js":1262,"./stringify.js":1264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./rng.js"))&&n.__esModule?n:{default:n},s=e("./stringify.js");let o,a,c=0,u=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let d=(e=e||{}).node||o,h=e.clockseq!==undefined?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||i.default)();null==d&&(d=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=e.msecs!==undefined?e.msecs:Date.now(),p=e.nsecs!==undefined?e.nsecs:u+1;const m=f-c+(p-u)/1e4;if(m<0&&e.clockseq===undefined&&(h=h+1&16383),(m<0||f>c)&&e.nsecs===undefined&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;l[n++]=g>>>24&255,l[n++]=g>>>16&255,l[n++]=g>>>8&255,l[n++]=255&g;const y=f/4294967296*1e4&268435455;l[n++]=y>>>8&255,l[n++]=255&y,l[n++]=y>>>24&15|16,l[n++]=y>>>16&255,l[n++]=h>>>8|128,l[n++]=255&h;for(let e=0;e<6;++e)l[n+e]=d[e];return t||(0,s.unsafeStringify)(l)};r.default=l}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v1.js"}],[1266,{"./md5.js":1257,"./v35.js":1267},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./md5.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,i.default);r.default=o}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v3.js"}],[1267,{"./parse.js":1260,"./stringify.js":1264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,s.default)(n)),16!==(null===(c=n)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,i.unsafeStringify)(u)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,i=e("./stringify.js"),s=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v35.js"}],[1268,{"./native.js":1258,"./rng.js":1262,"./stringify.js":1264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),i=o(e("./rng.js")),s=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,s.unsafeStringify)(o)};r.default=a}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v4.js"}],[1269,{"./sha1.js":1263,"./v35.js":1267},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./sha1.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,i.default);r.default=o}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/v5.js"}],[127,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:36,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=36;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.featureFlags||{};void 0!==e.privacyMode&&delete e.privacyMode}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/036.js"}],[1270,{"./regex.js":1261},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var s=function(e){return"string"==typeof e&&i.default.test(e)};r.default=s}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/validate.js"}],[1271,{"./validate.js":1270},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=s}}},{package:"@metamask/keyring-api>uuid",file:"node_modules/@metamask/keyring-api/node_modules/uuid/dist/version.js"}],[1272,{"@metamask/base-controller":1058,"@metamask/eth-keyring-controller":1276,"@metamask/utils":1769,"async-mutex":2315,"ethereumjs-util":2798,"ethereumjs-wallet":2808},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),m=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return m(t,e),t},y=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},w=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},b=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringController=r.getDefaultKeyringState=r.SignTypedDataVersion=r.AccountImportStrategy=r.KeyringTypes=void 0;const v=e("@metamask/base-controller"),k=e("@metamask/eth-keyring-controller"),_=e("@metamask/utils"),S=e("async-mutex"),T=e("ethereumjs-util"),E=g(e("ethereumjs-wallet")),j="KeyringController";var M,A;!function(e){e.simple="Simple Key Pair",e.hd="HD Key Tree",e.qr="QR Hardware Wallet Device",e.trezor="Trezor Hardware",e.ledger="Ledger Hardware",e.lattice="Lattice Hardware",e.snap="Snap Keyring",e.custody="Custody - JSONRPC"}(M=r.KeyringTypes||(r.KeyringTypes={})),function(e){e.privateKey="privateKey",e.json="json"}(r.AccountImportStrategy||(r.AccountImportStrategy={})),function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(A=r.SignTypedDataVersion||(r.SignTypedDataVersion={}));function P(e){if(!((0,_.hasProperty)(e,"mnemonic")&&e.mnemonic instanceof Uint8Array))throw new Error("Can't get mnemonic bytes from keyring")}r.getDefaultKeyringState=()=>({isUnlocked:!1,keyrings:[]});class C extends v.BaseController{constructor(e){var t;const{syncIdentities:a,updateIdentities:c,setSelectedAddress:u,setAccountLabel:f,keyringBuilders:p,messenger:m,state:g}=e;super({name:j,metadata:{vault:{persist:!0,anonymous:!1},isUnlocked:{persist:!1,anonymous:!0},keyrings:{persist:!1,anonymous:!1},encryptionKey:{persist:!1,anonymous:!1},encryptionSalt:{persist:!1,anonymous:!1}},messenger:m,state:Object.assign(Object.assign({},(0,r.getDefaultKeyringState)()),g)}),n.add(this),this.mutex=new S.Mutex,i.set(this,void 0),s.set(this,void 0),e.cacheEncryptionKey?w(this,i,new k.KeyringController({initState:g,encryptor:e.encryptor,keyringBuilders:p,cacheEncryptionKey:e.cacheEncryptionKey}),"f"):w(this,i,new k.KeyringController({initState:g,encryptor:e.encryptor,keyringBuilders:p,cacheEncryptionKey:null!==(t=e.cacheEncryptionKey)&&void 0!==t&&t}),"f"),b(this,i,"f").memStore.subscribe(b(this,n,"m",l).bind(this)),b(this,i,"f").store.subscribe(b(this,n,"m",l).bind(this)),b(this,i,"f").on("lock",b(this,n,"m",d).bind(this)),b(this,i,"f").on("unlock",b(this,n,"m",h).bind(this)),this.syncIdentities=a,this.updateIdentities=c,this.setSelectedAddress=u,this.setAccountLabel=f,b(this,n,"m",o).call(this)}addNewAccount(e){return y(this,void 0,void 0,(function*(){const t=b(this,i,"f").getKeyringsByType("HD Key Tree")[0];if(!t)throw new Error("No HD keyring found");const r=yield b(this,i,"f").getAccounts();if(e&&r.length!==e){if(e>r.length)throw new Error("Account out of sequence");const i=yield t.getAccounts();return{keyringState:b(this,n,"m",f).call(this),addedAccountAddress:i[e]}}yield b(this,i,"f").addNewAccount(t);const s=yield b(this,i,"f").getAccounts();yield this.verifySeedPhrase(),this.updateIdentities(s);const o=s.find((e=>!r.includes(e)));return(0,_.assertIsStrictHexString)(o),{keyringState:b(this,n,"m",f).call(this),addedAccountAddress:o}}))}addNewAccountForKeyring(e,t){return y(this,void 0,void 0,(function*(){const r=yield this.getAccounts();if(t&&r.length!==t){if(t>r.length)throw new Error("Account out of sequence");const e=r[t];return(0,_.assertIsStrictHexString)(e),e}yield b(this,i,"f").addNewAccount(e);const n=(yield this.getAccounts()).find((e=>!r.includes(e)));return(0,_.assertIsStrictHexString)(n),this.updateIdentities(yield b(this,i,"f").getAccounts()),n}))}addNewAccountWithoutUpdate(){return y(this,void 0,void 0,(function*(){const e=b(this,i,"f").getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");return yield b(this,i,"f").addNewAccount(e),yield this.verifySeedPhrase(),b(this,n,"m",f).call(this)}))}createNewVaultAndRestore(e,t){return y(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();if(!e||!e.length)throw new Error("Invalid password");try{return this.updateIdentities([]),yield b(this,i,"f").createNewVaultWithKeyring(e,{type:k.KeyringType.HD,opts:{mnemonic:t,numberOfAccounts:1}}),this.updateIdentities(yield b(this,i,"f").getAccounts()),b(this,n,"m",f).call(this)}finally{r()}}))}createNewVaultAndKeychain(e){return y(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{return(yield this.getAccounts()).length||(yield b(this,i,"f").createNewVaultWithKeyring(e,{type:k.KeyringType.HD}),this.updateIdentities(yield this.getAccounts())),b(this,n,"m",f).call(this)}finally{t()}}))}addNewKeyring(e,t){return y(this,void 0,void 0,(function*(){return e===M.qr?this.getOrAddQRKeyring():b(this,i,"f").addNewKeyring(e,t)}))}verifyPassword(e){return y(this,void 0,void 0,(function*(){yield b(this,i,"f").verifyPassword(e)}))}isUnlocked(){return this.state.isUnlocked}exportSeedPhrase(e){return y(this,void 0,void 0,(function*(){return yield this.verifyPassword(e),P(b(this,i,"f").keyrings[0]),b(this,i,"f").keyrings[0].mnemonic}))}exportAccount(e,t){return y(this,void 0,void 0,(function*(){return yield this.verifyPassword(e),b(this,i,"f").exportAccount(t)}))}getAccounts(){return b(this,i,"f").getAccounts()}getEncryptionPublicKey(e,t){return y(this,void 0,void 0,(function*(){return b(this,i,"f").getEncryptionPublicKey(e,t)}))}decryptMessage(e){return y(this,void 0,void 0,(function*(){return b(this,i,"f").decryptMessage(e)}))}getKeyringForAccount(e){return y(this,void 0,void 0,(function*(){return b(this,i,"f").getKeyringForAccount(e)}))}getKeyringsByType(e){return b(this,i,"f").getKeyringsByType(e)}persistAllKeyrings(){return y(this,void 0,void 0,(function*(){return b(this,i,"f").persistAllKeyrings()}))}importAccountWithStrategy(e,t){return y(this,void 0,void 0,(function*(){let r;switch(e){case"privateKey":const[n]=t;if(!n)throw new Error("Cannot import an empty key.");const i=(0,T.addHexPrefix)(n);let s;try{s=(0,T.toBuffer)(i)}catch(e){throw new Error("Cannot import invalid private key.")}if(!(0,T.isValidPrivate)(s)||66!==(0,T.getBinarySize)(i))throw new Error("Cannot import invalid private key.");r=(0,T.stripHexPrefix)(i);break;case"json":let o;const[a,c]=t;try{o=E.thirdparty.fromEtherWallet(a,c)}catch(e){o=o||(yield E.default.fromV3(a,c,!0))}r=(0,T.bufferToHex)(o.getPrivateKey());break;default:throw new Error(`Unexpected import strategy: '${e}'`)}const s=yield b(this,i,"f").addNewKeyring(M.simple,[r]),o=yield s.getAccounts(),a=yield b(this,i,"f").getAccounts();return this.updateIdentities(a),{keyringState:b(this,n,"m",f).call(this),importedAccountAddress:o[0]}}))}removeAccount(e){return y(this,void 0,void 0,(function*(){return yield b(this,i,"f").removeAccount(e),this.messagingSystem.publish(`${j}:accountRemoved`,e),b(this,n,"m",f).call(this)}))}setLocked(){return y(this,void 0,void 0,(function*(){return b(this,n,"m",u).call(this),yield b(this,i,"f").setLocked(),b(this,n,"m",f).call(this)}))}signMessage(e){if(!e.data)throw new Error("Can't sign an empty message");return b(this,i,"f").signMessage(e)}signPersonalMessage(e){return b(this,i,"f").signPersonalMessage(e)}signTypedMessage(e,t){return y(this,void 0,void 0,(function*(){try{if(![A.V1,A.V3,A.V4].includes(t))throw new Error(`Unexpected signTypedMessage version: '${t}'`);return yield b(this,i,"f").signTypedMessage({from:e.from,data:t!==A.V1&&"string"==typeof e.data?JSON.parse(e.data):e.data},{version:t})}catch(e){throw new Error(`Keyring Controller signTypedMessage: ${e}`)}}))}signTransaction(e,t,r){return b(this,i,"f").signTransaction(e,t,r)}prepareUserOperation(e,t){return y(this,void 0,void 0,(function*(){return yield b(this,i,"f").prepareUserOperation(e,t)}))}patchUserOperation(e,t){return y(this,void 0,void 0,(function*(){return yield b(this,i,"f").patchUserOperation(e,t)}))}signUserOperation(e,t){return y(this,void 0,void 0,(function*(){return yield b(this,i,"f").signUserOperation(e,t)}))}submitEncryptionKey(e,t){return y(this,void 0,void 0,(function*(){yield b(this,i,"f").submitEncryptionKey(e,t);const r=this.getQRKeyring();return r&&b(this,n,"m",c).call(this,r),b(this,n,"m",f).call(this)}))}submitPassword(e){return y(this,void 0,void 0,(function*(){yield b(this,i,"f").submitPassword(e);const t=yield b(this,i,"f").getAccounts(),r=this.getQRKeyring();return r&&b(this,n,"m",c).call(this,r),yield this.syncIdentities(t),b(this,n,"m",f).call(this)}))}verifySeedPhrase(){return y(this,void 0,void 0,(function*(){const e=b(this,i,"f").getKeyringsByType(M.hd)[0];if(!e)throw new Error("No HD keyring found.");P(e);const t=e.mnemonic,r=yield e.getAccounts();if(0===r.length)throw new Error("Cannot verify an empty keyring.");const n=b(this,i,"f").getKeyringBuilderForType(M.hd)();yield n.deserialize({mnemonic:t,numberOfAccounts:r.length});const s=yield n.getAccounts();if(s.length!==r.length)throw new Error("Seed phrase imported incorrect number of accounts.");s.forEach(((e,t)=>{if(e.toLowerCase()!==r[t].toLowerCase())throw new Error("Seed phrase imported different accounts.")}))}))}getQRKeyring(){return b(this,i,"f").getKeyringsByType(M.qr)[0]}getOrAddQRKeyring(){return y(this,void 0,void 0,(function*(){return this.getQRKeyring()||(yield b(this,n,"m",a).call(this))}))}restoreQRKeyring(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).deserialize(e),yield b(this,i,"f").persistAllKeyrings(),this.updateIdentities(yield b(this,i,"f").getAccounts())}))}resetQRKeyringState(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).resetStore()}))}getQRKeyringState(){return y(this,void 0,void 0,(function*(){return(yield this.getOrAddQRKeyring()).getMemStore()}))}submitQRCryptoHDKey(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoHDKey(e)}))}submitQRCryptoAccount(e){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitCryptoAccount(e)}))}submitQRSignature(e,t){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).submitSignature(e,t)}))}cancelQRSignRequest(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).cancelSignRequest()}))}cancelQRSynchronization(){return y(this,void 0,void 0,(function*(){(yield this.getOrAddQRKeyring()).cancelSync()}))}connectQRHardware(e){return y(this,void 0,void 0,(function*(){try{const t=yield this.getOrAddQRKeyring();let r;switch(e){case-1:r=yield t.getPreviousPage();break;case 1:r=yield t.getNextPage();break;default:r=yield t.getFirstPage()}return r.map((e=>Object.assign(Object.assign({},e),{balance:"0x0"})))}catch(e){throw new Error(`Unspecified error when connect QR Hardware, ${e}`)}}))}unlockQRHardwareWalletAccount(e){return y(this,void 0,void 0,(function*(){const t=yield this.getOrAddQRKeyring();t.setAccountToUnlock(e);const r=yield b(this,i,"f").getAccounts();yield b(this,i,"f").addNewAccount(t);const n=yield b(this,i,"f").getAccounts();this.updateIdentities(n),n.forEach((n=>{r.includes(n)||(this.setAccountLabel&&this.setAccountLabel(n,`${t.getName()} ${e}`),this.setSelectedAddress(n))})),yield b(this,i,"f").persistAllKeyrings()}))}getAccountKeyringType(e){return y(this,void 0,void 0,(function*(){return(yield b(this,i,"f").getKeyringForAccount(e)).type}))}forgetQRDevice(){return y(this,void 0,void 0,(function*(){const e=yield this.getOrAddQRKeyring(),t=yield b(this,i,"f").getAccounts();e.forgetDevice();const r=yield b(this,i,"f").getAccounts(),n=t.filter((e=>!r.includes(e)));return this.updateIdentities(r),yield b(this,i,"f").persistAllKeyrings(),{removedAccounts:n,remainingAccounts:r}}))}}r.KeyringController=C,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=function(){this.messagingSystem.registerActionHandler(`${j}:signMessage`,this.signMessage.bind(this)),this.messagingSystem.registerActionHandler(`${j}:signPersonalMessage`,this.signPersonalMessage.bind(this)),this.messagingSystem.registerActionHandler(`${j}:signTypedMessage`,this.signTypedMessage.bind(this)),this.messagingSystem.registerActionHandler(`${j}:decryptMessage`,this.decryptMessage.bind(this)),this.messagingSystem.registerActionHandler(`${j}:getEncryptionPublicKey`,this.getEncryptionPublicKey.bind(this)),this.messagingSystem.registerActionHandler(`${j}:getAccounts`,this.getAccounts.bind(this)),this.messagingSystem.registerActionHandler(`${j}:getKeyringsByType`,this.getKeyringsByType.bind(this)),this.messagingSystem.registerActionHandler(`${j}:getKeyringForAccount`,this.getKeyringForAccount.bind(this)),this.messagingSystem.registerActionHandler(`${j}:persistAllKeyrings`,this.persistAllKeyrings.bind(this)),this.messagingSystem.registerActionHandler(`${j}:prepareUserOperation`,this.prepareUserOperation.bind(this)),this.messagingSystem.registerActionHandler(`${j}:patchUserOperation`,this.patchUserOperation.bind(this)),this.messagingSystem.registerActionHandler(`${j}:signUserOperation`,this.signUserOperation.bind(this))},a=function(){return y(this,void 0,void 0,(function*(){const e=yield b(this,i,"f").addNewKeyring(M.qr);return b(this,n,"m",c).call(this,e),e}))},c=function(e){w(this,s,(e=>{this.messagingSystem.publish(`${j}:qrKeyringStateChange`,e)}),"f"),e.getMemStore().subscribe(b(this,s,"f"))},u=function(){b(this,i,"f").getKeyringsByType(M.qr).forEach((e=>{b(this,s,"f")&&e.getMemStore().unsubscribe(b(this,s,"f"))}))},l=function(){const{vault:e}=b(this,i,"f").store.getState(),{keyrings:t,isUnlocked:r,encryptionKey:n,encryptionSalt:s}=b(this,i,"f").memStore.getState();this.update((()=>({vault:e,keyrings:t,isUnlocked:r,encryptionKey:n,encryptionSalt:s})))},d=function(){this.messagingSystem.publish(`${j}:lock`)},h=function(){this.messagingSystem.publish(`${j}:unlock`)},f=function(){return{isUnlocked:this.state.isUnlocked,keyrings:this.state.keyrings}},r.default=C}}},{package:"@metamask/keyring-controller",file:"node_modules/@metamask/keyring-controller/dist/KeyringController.js"}],[1273,{"./KeyringController":1272},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./KeyringController"),r)}}},{package:"@metamask/keyring-controller",file:"node_modules/@metamask/keyring-controller/dist/index.js"}],[1274,{"./constants":1275,"./utils":1277,"@metamask/browser-passworder":1059,"@metamask/eth-hd-keyring":1068,"@metamask/eth-sig-util":1102,"@metamask/eth-simple-keyring":1106,"@metamask/obs-store":1282,"@metamask/utils":1769,events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),f=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&h(t,e,r);return f(t,e),t},m=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},g=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.keyringBuilderFactory=r.KeyringController=void 0;const w=p(e("@metamask/browser-passworder")),b=y(e("@metamask/eth-hd-keyring")),v=e("@metamask/eth-sig-util"),k=y(e("@metamask/eth-simple-keyring")),_=e("@metamask/obs-store"),S=e("@metamask/utils"),T=e("events"),E=e("./constants"),j=e("./utils"),M=[P(k.default),P(b.default)];class A extends T.EventEmitter{constructor({keyringBuilders:e,cacheEncryptionKey:t,initState:r={},encryptor:o=w}){super(),n.add(this),i.set(this,void 0),s.set(this,void 0),this.keyringBuilders=e?M.concat(e):M,this.store=new _.ObservableStore(r),this.memStore=new _.ObservableStore({isUnlocked:!1,keyringTypes:this.keyringBuilders.map((e=>e.type)),keyrings:[]}),m(this,i,o,"f"),this.keyrings=[],this.unsupportedKeyrings=[],m(this,s,Boolean(t),"f"),g(this,s,"f")&&O(o)}fullUpdate(){return this.emit("update",this.memStore.getState()),this.memStore.getState()}async createNewVaultWithKeyring(e,t){if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);return this.password=e,await g(this,n,"m",c).call(this),await g(this,n,"m",o).call(this,t.type,t.opts),g(this,n,"m",l).call(this),this.fullUpdate()}async setLocked(){return delete this.password,this.memStore.putState({isUnlocked:!1,keyrings:[]}),await g(this,n,"m",c).call(this),this.emit("lock"),this.fullUpdate()}async submitPassword(e){return this.keyrings=await this.unlockKeyrings(e),g(this,n,"m",l).call(this),this.fullUpdate()}async submitEncryptionKey(e,t){return this.keyrings=await this.unlockKeyrings(undefined,e,t),g(this,n,"m",l).call(this),this.fullUpdate()}async verifyPassword(e){const t=this.store.getState().vault;if(!t)throw new Error(E.KeyringControllerError.VaultError);await g(this,i,"f").decrypt(e,t)}async addNewAccount(e){return(await e.addAccounts(1)).forEach((e=>{this.emit("newAccount",e)})),await this.persistAllKeyrings(),this.fullUpdate()}async exportAccount(e){const t=await this.getKeyringForAccount(e);if(!t.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAccount);return await t.exportAccount((0,v.normalize)(e))}async removeAccount(e){const t=await this.getKeyringForAccount(e);if(!t.removeAccount)throw new Error(E.KeyringControllerError.UnsupportedRemoveAccount);await t.removeAccount(e),this.emit("removedAccount",e);return 0===(await t.getAccounts()).length&&await this.removeEmptyKeyrings(),await this.persistAllKeyrings(),this.fullUpdate()}async getAccounts(){const e=this.keyrings||[];return(await Promise.all(e.map((async e=>e.getAccounts())))).reduce(((e,t)=>e.concat(t)),[]).map(v.normalize)}getKeyringBuilderForType(e){return this.keyringBuilders.find((t=>t.type===e))}async updateMemStoreKeyrings(){const e=await Promise.all(this.keyrings.map(C));this.memStore.updateState({keyrings:e})}async signTransaction(e,t,r={}){const n=(0,v.normalize)(t),i=await this.getKeyringForAccount(n);if(!i.signTransaction)throw new Error(E.KeyringControllerError.UnsupportedSignTransaction);return await i.signTransaction(n,e,r)}async signMessage(e,t={}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signMessage)throw new Error(E.KeyringControllerError.UnsupportedSignMessage);return await n.signMessage(r,e.data,t)}async signPersonalMessage(e,t={}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signPersonalMessage)throw new Error(E.KeyringControllerError.UnsupportedSignPersonalMessage);const i=(0,v.normalize)(e.data);return await n.signPersonalMessage(r,i,t)}async getEncryptionPublicKey(e,t={}){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(e);if(!n.getEncryptionPublicKey)throw new Error(E.KeyringControllerError.UnsupportedGetEncryptionPublicKey);return await n.getEncryptionPublicKey(r,t)}async decryptMessage(e){const t=(0,v.normalize)(e.from),r=await this.getKeyringForAccount(t);if(!r.decryptMessage)throw new Error(E.KeyringControllerError.UnsupportedDecryptMessage);return r.decryptMessage(t,e.data)}async signTypedMessage(e,t={version:"V1"}){const r=(0,v.normalize)(e.from),n=await this.getKeyringForAccount(r);if(!n.signTypedData)throw new Error(E.KeyringControllerError.UnsupportedSignTypedMessage);return n.signTypedData(r,e.data,t)}async getAppKeyAddress(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.getAppKeyAddress)throw new Error(E.KeyringControllerError.UnsupportedGetAppKeyAddress);return n.getAppKeyAddress(r,t)}async exportAppKeyForAddress(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);if(!n.exportAccount)throw new Error(E.KeyringControllerError.UnsupportedExportAppKeyForAddress);return n.exportAccount(r,{withAppKeyOrigin:t})}async prepareUserOperation(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);return n.prepareUserOperation?await n.prepareUserOperation(r,t):(0,j.throwError)(E.KeyringControllerError.UnsupportedPrepareUserOperation)}async patchUserOperation(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);return n.patchUserOperation?await n.patchUserOperation(r,t):(0,j.throwError)(E.KeyringControllerError.UnsupportedPatchUserOperation)}async signUserOperation(e,t){const r=(0,v.normalize)(e),n=await this.getKeyringForAccount(r);return n.signUserOperation?await n.signUserOperation(r,t):(0,j.throwError)(E.KeyringControllerError.UnsupportedSignUserOperation)}async addNewKeyring(e,t){const r=await g(this,n,"m",d).call(this,e,t);if(!r)throw new Error(E.KeyringControllerError.NoKeyring);if(!(e!==E.KeyringType.HD||(0,S.isObject)(t)&&t.mnemonic)){if(!r.generateRandomMnemonic)throw new Error(E.KeyringControllerError.UnsupportedGenerateRandomMnemonic);r.generateRandomMnemonic(),await r.addAccounts(1)}const i=await r.getAccounts();return await this.checkForDuplicate(e,i),this.keyrings.push(r),await this.persistAllKeyrings(),this.fullUpdate(),r}async removeEmptyKeyrings(){const e=[];await Promise.all(this.keyrings.map((async t=>{(await t.getAccounts()).length>0?e.push(t):await g(this,n,"m",u).call(this,t)}))),this.keyrings=e}async checkForDuplicate(e,t){const r=await this.getAccounts();if(e===E.KeyringType.Simple){if(Boolean(r.find((e=>t[0]&&(e===t[0]||e===(0,S.remove0x)(t[0]))))))throw new Error(E.KeyringControllerError.DuplicatedAccount);return t}return t}async getKeyringForAccount(e){var t;const r=(0,v.normalize)(e),n=await Promise.all(this.keyrings.map((async e=>Promise.all([e,e.getAccounts()])))),i=n.filter((e=>e[1].map(v.normalize).includes(r)));if(i.length&&(null===(t=i[0])||void 0===t?void 0:t.length))return i[0][0];let s="";throw(0,S.isValidHexAddress)(r)?n.length?i.length||(s="There are keyrings, but none match the address"):s="There are no keyrings":s="The address passed in is invalid/empty",new Error(`${E.KeyringControllerError.NoKeyring}. Error info: ${s}`)}async restoreKeyring(e){const t=await g(this,n,"m",a).call(this,e);return t&&await this.updateMemStoreKeyrings(),t}getKeyringsByType(e){return this.keyrings.filter((t=>t.type===e))}async persistAllKeyrings(){const{encryptionKey:e,encryptionSalt:t}=this.memStore.getState();if(!this.password&&!e)throw new Error(E.KeyringControllerError.MissingCredentials);const r=await Promise.all(this.keyrings.map((async e=>{const[t,r]=await Promise.all([e.type,e.serialize()]);return{type:t,data:r}})));let n,o;if(r.push(...this.unsupportedKeyrings),g(this,s,"f")){if(O(g(this,i,"f")),e){const s=await g(this,i,"f").importKey(e),o=await g(this,i,"f").encryptWithKey(s,r);o.salt=t,n=JSON.stringify(o)}else if(this.password){const{vault:e,exportedKeyString:t}=await g(this,i,"f").encryptWithDetail(this.password,r);n=e,o=t}}else{if("string"!=typeof this.password)throw new TypeError(E.KeyringControllerError.WrongPasswordType);n=await g(this,i,"f").encrypt(this.password,r)}if(!n)throw new Error(E.KeyringControllerError.MissingVaultData);return this.store.updateState({vault:n}),await this.updateMemStoreKeyrings(),o&&this.memStore.updateState({encryptionKey:o,encryptionSalt:JSON.parse(n).salt}),!0}async unlockKeyrings(e,t,r){const o=this.store.getState().vault;if(!o)throw new Error(E.KeyringControllerError.VaultError);let u;if(await g(this,n,"m",c).call(this),g(this,s,"f"))if(O(g(this,i,"f")),e){const t=await g(this,i,"f").decryptWithDetail(e,o);u=t.vault,this.password=e,this.memStore.updateState({encryptionKey:t.exportedKeyString,encryptionSalt:t.salt})}else{const e=JSON.parse(o);if(r!==e.salt)throw new Error(E.KeyringControllerError.ExpiredCredentials);if("string"!=typeof t)throw new TypeError(E.KeyringControllerError.WrongPasswordType);const n=await g(this,i,"f").importKey(t);u=await g(this,i,"f").decryptWithKey(n,e),this.memStore.updateState({encryptionKey:t,encryptionSalt:r})}else{if("string"!=typeof e)throw new TypeError(E.KeyringControllerError.WrongPasswordType);u=await g(this,i,"f").decrypt(e,o),this.password=e}if("object"!=typeof(l=u)||!Array.isArray(l)||!l.every((e=>e.type&&(0,S.isValidJson)(e.data))))throw new Error(E.KeyringControllerError.VaultDataError);var l;return await Promise.all(u.map(g(this,n,"m",a).bind(this))),await this.updateMemStoreKeyrings(),!this.password||g(this,s,"f")&&t||!g(this,i,"f").isVaultUpdated||g(this,i,"f").isVaultUpdated(o)||await this.persistAllKeyrings(),this.keyrings}}function P(e){const t=()=>new e;return t.type=e.type,t}async function C(e){const t=await e.getAccounts();return{type:e.type,accounts:t.map(v.normalize)}}function O(e){if(!("importKey"in e&&"function"==typeof e.importKey&&"decryptWithKey"in e&&"function"==typeof e.decryptWithKey&&"encryptWithKey"in e&&"function"==typeof e.encryptWithKey))throw new Error(E.KeyringControllerError.UnsupportedEncryptionKeyExport)}r.KeyringController=A,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=async function(e,t){const r=await this.addNewKeyring(e,t);if(!r)throw new Error(E.KeyringControllerError.NoKeyring);const[n]=await r.getAccounts();if(!n)throw new Error(E.KeyringControllerError.NoFirstAccount);const i=(0,v.normalize)(n);return this.emit("newVault",i),null},a=async function(e){const{type:t,data:r}=e;let i;try{i=await g(this,n,"m",d).call(this,t,r)}catch(e){console.error(e)}return i?(await i.getAccounts(),this.keyrings.push(i),i):(this.unsupportedKeyrings.push(e),undefined)},c=async function(){for(const e of this.keyrings)await g(this,n,"m",u).call(this,e);this.keyrings=[],this.memStore.updateState({keyrings:[]})},u=async function(e){var t;await(null===(t=e.destroy)||void 0===t?void 0:t.call(e))},l=function(){this.memStore.updateState({isUnlocked:!0}),this.emit("unlock")},d=async function(e,t){const r=this.getKeyringBuilderForType(e);if(!r)throw new Error(`${E.KeyringControllerError.NoKeyringBuilder}. Keyring type: ${e}`);const n=r();return await n.deserialize(t),n.init&&await n.init(),n},r.keyringBuilderFactory=P}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/eth-keyring-controller/dist/KeyringController.js"}],[1275,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=void 0,function(e){e.HD="HD Key Tree",e.Simple="Simple Key Pair"}(r.KeyringType||(r.KeyringType={})),function(e){e.NoKeyring="KeyringController - No keyring found",e.WrongPasswordType="KeyringController - Password must be of type string.",e.NoFirstAccount="KeyringController - First Account not found.",e.DuplicatedAccount="KeyringController - The account you are trying to import is a duplicate",e.VaultError="KeyringController - Cannot unlock without a previous vault.",e.VaultDataError="KeyringController - The decrypted vault has an unexpected shape.",e.UnsupportedEncryptionKeyExport="KeyringController - The encryptor does not support encryption key export.",e.UnsupportedGenerateRandomMnemonic="KeyringController - The current keyring does not support the method generateRandomMnemonic.",e.UnsupportedExportAccount="`KeyringController - The keyring for the current address does not support the method exportAccount",e.UnsupportedRemoveAccount="`KeyringController - The keyring for the current address does not support the method removeAccount",e.UnsupportedSignTransaction="KeyringController - The keyring for the current address does not support the method signTransaction.",e.UnsupportedSignMessage="KeyringController - The keyring for the current address does not support the method signMessage.",e.UnsupportedSignPersonalMessage="KeyringController - The keyring for the current address does not support the method signPersonalMessage.",e.UnsupportedGetEncryptionPublicKey="KeyringController - The keyring for the current address does not support the method getEncryptionPublicKey.",e.UnsupportedDecryptMessage="KeyringController - The keyring for the current address does not support the method decryptMessage.",e.UnsupportedSignTypedMessage="KeyringController - The keyring for the current address does not support the method signTypedMessage.",e.UnsupportedGetAppKeyAddress="KeyringController - The keyring for the current address does not support the method getAppKeyAddress.",e.UnsupportedExportAppKeyForAddress="KeyringController - The keyring for the current address does not support the method exportAppKeyForAddress.",e.UnsupportedPrepareUserOperation="KeyringController - The keyring for the current address does not support the method prepareUserOperation.",e.UnsupportedPatchUserOperation="KeyringController - The keyring for the current address does not support the method patchUserOperation.",e.UnsupportedSignUserOperation="KeyringController - The keyring for the current address does not support the method signUserOperation.",e.NoAccountOnKeychain="KeyringController - The keychain doesn't have accounts.",e.MissingCredentials="KeyringController - Cannot persist vault without password and encryption key",e.MissingVaultData="KeyringController - Cannot persist vault without vault information",e.ExpiredCredentials="KeyringController - Encryption key and salt provided are expired",e.NoKeyringBuilder="KeyringController - No keyringBuilder found for keyring",e.DataType="KeyringController - Incorrect data type provided"}(r.KeyringControllerError||(r.KeyringControllerError={}))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/eth-keyring-controller/dist/constants.js"}],[1276,{"./KeyringController":1274,"./constants":1275},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyringControllerError=r.KeyringType=r.keyringBuilderFactory=r.KeyringController=void 0;var n=e("./KeyringController");Object.defineProperty(r,"KeyringController",{enumerable:!0,get:function(){return n.KeyringController}}),Object.defineProperty(r,"keyringBuilderFactory",{enumerable:!0,get:function(){return n.keyringBuilderFactory}});var i=e("./constants");Object.defineProperty(r,"KeyringType",{enumerable:!0,get:function(){return i.KeyringType}}),Object.defineProperty(r,"KeyringControllerError",{enumerable:!0,get:function(){return i.KeyringControllerError}})}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/eth-keyring-controller/dist/index.js"}],[1277,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.throwError=void 0,r.throwError=function(e){throw"string"==typeof e?new Error(e):e}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/eth-keyring-controller/dist/utils.js"}],[1278,{"./ObservableStore":1280},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=i}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1279,{"./ObservableStore":1280},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=i}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[128,{"@metamask/controller-utils":1063,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/controller-utils");r.default={version:37,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=37;const r=t.data;return t.data=function(e){if(e.AddressBookController){const t=e.AddressBookController.addressBook,r=new Set,n={};Object.values(t).forEach((e=>{r.add(e.chainId)}));for(const e of r.values()){n[e]={};for(const r in t)t[r].chainId===e&&(t[r].isEns=!1,(0,i.normalizeEnsName)(t[r].name)&&(t[r].isEns=!0),n[e][r]=t[r])}e.AddressBookController.addressBook=n}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/037.js"}],[1280,{"@metamask/safe-event-emitter":1284},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const i=n(e("@metamask/safe-event-emitter"));class s extends i.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=s}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1281,{"readable-stream":1299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("readable-stream");class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new i(e)}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/asStream.js"}],[1282,{"./ComposedStore":1278,"./MergedStore":1279,"./ObservableStore":1280,"./asStream":1281,"./transform":1283},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./asStream"),r),i(e("./ComposedStore"),r),i(e("./MergedStore"),r),i(e("./ObservableStore"),r),i(e("./transform"),r)}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/index.js"}],[1283,{"readable-stream":1299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("readable-stream");r.storeTransformStream=function(e){return new n.Transform({objectMode:!0,transform:(t,r,n)=>{try{const r=e(t);return n(undefined,r),undefined}catch(e){return n(e),undefined}}})}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/obs-store/dist/transform.js"}],[1284,{events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("events");function i(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class s extends n.EventEmitter{emit(e,...t){let r="error"===e;const n=this._events;if(n!==undefined)r=r&&n.error===undefined;else if(!r)return!1;if(r){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const r=new Error("Unhandled error."+(e?` (${e.message})`:""));throw r.context=e,r}const s=n[e];if(s===undefined)return!1;if("function"==typeof s)i(s,this,t);else{const e=s.length,r=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let n=0;n<e;n+=1)i(r[n],this,t)}return!0}}r.default=s}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>@metamask/safe-event-emitter",file:"node_modules/@metamask/keyring-controller/node_modules/@metamask/safe-event-emitter/index.js"}],[1285,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,o,a;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/errors-browser.js"}],[1286,{"./_stream_readable":1288,"./_stream_writable":1290,_process:3560,inherits:3160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/_stream_duplex.js"}],[1287,{"./_stream_transform":1289,inherits:3160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1288,{"../errors":1285,"./_stream_duplex":1286,"./internal/streams/async_iterator":1291,"./internal/streams/buffer_list":1292,"./internal/streams/destroy":1293,"./internal/streams/from":1295,"./internal/streams/state":1297,"./internal/streams/stream":1298,_process:3560,buffer:2430,events:2838,inherits:3160,"string_decoder/":3931,util:2395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=T,T.ReadableState=S;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),o=e("buffer").Buffer,a=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,h,f=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(T,s);var k=p.errorOrDestroy,_=["error","close","destroy","pause","resume"];function S(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function T(t){if(n=n||e("./_stream_duplex"),!(this instanceof T))return new T(t);var r=this instanceof n;this._readableState=new S(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function E(e,t,r,n,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,C(e)))}(e,u);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"==typeof t||t===undefined||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),s)k(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)u.endEmitted?k(e,new v):j(e,u,t,!0);else if(u.ended)k(e,new w);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?j(e,u,t,!1):O(e,u)):j(e,u,t,!1)}else n||(u.reading=!1,O(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function j(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),O(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=p.destroy,T.prototype._undestroy=p.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},T.prototype.unshift=function(e){return E(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var M=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=M?e=M:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(C,e))}function C(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,K(e)}function O(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function x(e){c("readable nexttick read 0"),e.read(0)}function N(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),K(e),t.flowing&&!t.reading&&e.read(0)}function K(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function $(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):P(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){k(this,new b("_read()"))},T.prototype.pipe=function(e,t){var n=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",a),n.removeListener("end",u),n.removeListener("end",g),n.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,K(e))}}(n);e.on("drain",l);var d=!1;function h(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==$(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),n.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&k(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",n),s.flowing||(c("pipe resume"),n.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=$(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?P(this):i.reading||r.nextTick(x,this))),n},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(I,this),n},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(I,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(N,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<_.length;s++)e.on(_[s],this.emit.bind(this,_[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=D,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(T,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/_stream_readable.js"}],[1289,{"../errors":1285,"./_stream_duplex":1286,inherits:3160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/_stream_transform.js"}],[129,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:38,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=38;const r=t.data;return t.data=function(e){const{ABTestController:t={}}=e,{abTests:r={}}=t;if(r.fullScreenVsPopup)return e;return{...e,ABTestController:{...t,abTests:{...r,fullScreenVsPopup:"control"}}}}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/038.js"}],[1290,{"../errors":1285,"./_stream_duplex":1286,"./internal/streams/destroy":1293,"./internal/streams/state":1297,"./internal/streams/stream":1298,_process:3560,buffer:2430,inherits:3160,"util-deprecate":3990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=T,T.WritableState=S;var s={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,w=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;function _(){}function S(t,s,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=s instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(C,e,t),e._writableState.errorEmitted=!0,k(e,i)):(s(i),e._writableState.errorEmitted=!0,k(e,i),C(e,t))}(e,n,i,t,s);else{var o=A(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),i?r.nextTick(j,e,n,o,s):j(e,n,o,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function T(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!u.call(T,this))return new T(t);this._writableState=new S(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function E(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function j(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),C(e,t)}function M(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,E(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(E(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),C(e,t)}))}function C(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(T,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===T&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},T.prototype.pipe=function(){k(this,new g)},T.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,u=!s.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=_),s.ending?function(e,t){var n=new b;k(e,n),r.nextTick(t,n)}(this,n):(u||function(e,t,n,i){var s;return null===n?s=new w:"string"==typeof n||t.objectMode||(s=new f("chunk",["string","Buffer"],n)),!s||(k(e,s),r.nextTick(i,s),!1)}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,c,n,i,s);return u}(this,s,u,e,t,n)),o},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,r){r(new p("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=l.destroy,T.prototype._undestroy=l.undestroy,T.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/_stream_writable.js"}],[1291,{"./end-of-stream":1294,_process:3560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[o]=null,e[a]=null,t(f(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(f(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(f(undefined,!0)):t[d](r,n)}),n)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(f(s,!1));n=new Promise(this[d])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(f(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[o]=null,r[a]=null,e(f(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[l]=null,r[o]=null,r[a]=null,n(f(undefined,!0))),r[u]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1292,{buffer:2430,util:2395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=e("buffer").Buffer,u=e("util").inspect,l=u&&u.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n,i=c.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=i,n=o,c.prototype.copy.call(t,r,n),o+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0==(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[1293,{_process:3560},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(n,o):(o._writableState.errorEmitted=!0,e.nextTick(r,o,t)):e.nextTick(r,o,t):s?(e.nextTick(n,o),s(t)):e.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[1294,{"../../../errors":1285},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,s){if("function"==typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,a||s.call(t)},f=function(e){s.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1295,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[1296,{"../../../errors":1285,"./end-of-stream":1294},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var l,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new s("streams");var h=r.map((function(t,i){var s=i<r.length-1;return function(t,r,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;t.on("close",(function(){a=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}(t,s,i>0,(function(e){l||(l=e),e&&h.forEach(c),s||(h.forEach(c),d(l))}))}));return r.reduce(u)}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1297,{"../../../errors":1285},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/state.js"}],[1298,{events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[1299,{"./lib/_stream_duplex.js":1286,"./lib/_stream_passthrough.js":1287,"./lib/_stream_readable.js":1288,"./lib/_stream_transform.js":1289,"./lib/_stream_writable.js":1290,"./lib/internal/streams/end-of-stream.js":1294,"./lib/internal/streams/pipeline.js":1296},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/keyring-controller>@metamask/eth-keyring-controller>@metamask/obs-store>readable-stream",file:"node_modules/@metamask/keyring-controller/node_modules/readable-stream/readable-browser.js"}],[13,{"../../../../shared/constants/network":4058,"@ethersproject/providers":465,"ethereum-ens-network-map":2774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("@ethersproject/providers"),s=(n=e("ethereum-ens-network-map"))&&n.__esModule?n:{default:n},o=e("../../../../shared/constants/network");r.default=class{static getChainEnsSupport(e){return Boolean(s.default[parseInt(e,16).toString()])}constructor({chainId:e,provider:t}={}){const r=o.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[e],n=parseInt(e,16),a=s.default[n.toString()],c=new i.Web3Provider(t,{chainId:n,name:r,ensAddress:a});this._ethProvider=c}lookup(e){return this._ethProvider.resolveName(e)}reverse(e){return this._ethProvider.lookupAddress(e)}}}}},{package:"$root$",file:"app/scripts/controllers/ens/ens.js"}],[130,{"../../../shared/modules/hexstring-utils":4089,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/modules/hexstring-utils");const s="0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",o="DAI",a="SAI";function c(e={}){return e&&"object"==typeof e&&e.symbol===o&&(0,i.toChecksumHexAddress)(e.address)===s}r.default={version:39,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=39;const r=t.data;return t.data=function(e){const{PreferencesController:t}=e;if(t){const e=t.tokens||[];if(Array.isArray(e))for(const t of e)c(t)&&(t.symbol=a);const r=t.accountTokens||{};if(r&&"object"==typeof r)for(const e of Object.keys(r)){const t=r[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=t[e];if(Array.isArray(r))for(const e of r)c(e)&&(e.symbol=a)}}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/039.js"}],[1300,{"@metamask/base-controller":1309,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.LoggingController=void 0;const o=e("@metamask/base-controller"),a=e("uuid"),c="LoggingController",u={logs:{persist:!0,anonymous:!1}},l={logs:{}};class d extends o.BaseControllerV2{constructor({messenger:e,state:t}){super({name:c,metadata:u,messenger:e,state:Object.assign(Object.assign({},l),t)}),n.add(this),this.messagingSystem.registerActionHandler(`${c}:add`,(e=>this.add(e)))}add(e){const t={id:s(this,n,"m",i).call(this),timestamp:Date.now(),log:e};this.update((e=>{e.logs[t.id]=t}))}clear(){this.update((e=>{e.logs={}}))}}r.LoggingController=d,n=new WeakSet,i=function(){let e=(0,a.v1)();for(;e in this.state.logs;)e=(0,a.v1)();return e}}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/LoggingController.js"}],[1301,{"./LoggingController":1300,"./logTypes":1305},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./LoggingController"),r),i(e("./logTypes"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/index.js"}],[1302,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.SigningStage=r.SigningMethod=void 0,function(e){e.EthSign="eth_sign",e.PersonalSign="personal_sign",e.EthSignTypedData="eth_signTypedData",e.EthSignTypedDataV3="eth_signTypedData_v3",e.EthSignTypedDataV4="eth_signTypedData_v4"}(r.SigningMethod||(r.SigningMethod={})),function(e){e.Proposed="proposed",e.Rejected="rejected",e.Signed="signed"}(r.SigningStage||(r.SigningStage={}))}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/EthSignLog.js"}],[1303,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/GenericLog.js"}],[1304,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.LogType=void 0,function(e){e.GenericLog="GenericLog",e.EthSignLog="EthSignLog"}(r.LogType||(r.LogType={}))}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/LogType.js"}],[1305,{"./EthSignLog":1302,"./GenericLog":1303,"./LogType":1304},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./EthSignLog"),r),i(e("./GenericLog"),r),i(e("./LogType"),r)}}},{package:"@metamask/logging-controller",file:"node_modules/@metamask/logging-controller/dist/logTypes/index.js"}],[1306,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1307,{immer:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1308,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1309,{"./BaseController":1306,"./BaseControllerV2":1307,"./ControllerMessenger":1308},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/logging-controller>@metamask/base-controller",file:"node_modules/@metamask/logging-controller/node_modules/@metamask/base-controller/dist/index.js"}],[131,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:40,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=40;const r=t.data;return t.data=function(e){return delete e.ProviderApprovalController,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/040.js"}],[1313,{"@metamask/base-controller":1058,events:2838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMessageManager=void 0;const s=e("@metamask/base-controller"),o=e("events");class a extends s.BaseControllerV1{constructor(e,t,r,n,i){super(e,t),this.hub=new o.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=null!=n?n:[],this.getCurrentChainId=i,this.initialize()}saveMessageList(e=!0){const t=this.getUnapprovedMessages(),r=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:t,unapprovedMessagesCount:r}),e&&this.hub.emit("updateBadge")}setMessageStatus(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.status=t,this.updateMessage(r),this.hub.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.hub.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const r=this.messages.findIndex((t=>e.id===t.id));-1!==r&&(this.messages[r]=e),this.saveMessageList(t)}securityCheck(e){return n(this,void 0,void 0,(function*(){if(this.securityProviderRequest){const t=yield this.securityProviderRequest(e,e.type);return Object.assign(Object.assign({},e),{securityProviderResponse:t})}return e}))}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){return n(this,void 0,void 0,(function*(){const t=yield this.securityCheck(e);this.messages.push(t),this.saveMessageList()}))}getMessage(e){return this.messages.find((t=>t.id===e))}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,r){this.setResult(e,t),this.setMessageStatus(e,r)}setResult(e,t){const r=this.getMessage(e);r&&(r.rawSig=t,this.updateMessage(r,!1))}setMetadata(e,t){const r=this.getMessage(e);if(!r)throw new Error(`${this.name}: Message not found for id: ${e}.`);r.metadata=t,this.updateMessage(r,!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}waitForFinishStatus(e,t){return n(this,void 0,void 0,(function*(){const{metamaskId:r}=e,n=i(e,["metamaskId"]);return new Promise(((e,i)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return e(r.rawSig);case"rejected":return i(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return i(new Error(`MetaMask ${t} Signature: ${r.error}`));default:return i(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}))}))}}r.AbstractMessageManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.js"}],[1314,{"./AbstractMessageManager":1313,"./utils":1320,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.DecryptMessageManager=void 0;const i=e("uuid"),s=e("./AbstractMessageManager"),o=e("./utils");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="DecryptMessageManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateDecryptedMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"decrypted":return t(r.rawSig);case"rejected":return n(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return n(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return n(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin),e.data=(0,o.normalizeMessageData)(e.data);const r=(0,i.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_decrypt"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}r.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.js"}],[1315,{"./AbstractMessageManager":1313,"./utils":1320,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptionPublicKeyManager=void 0;const i=e("uuid"),s=e("./AbstractMessageManager"),o=e("./utils");class a extends s.AbstractMessageManager{constructor(){super(...arguments),this.name="EncryptionPublicKeyManager"}addUnapprovedMessageAsync(e,t){return n(this,void 0,void 0,(function*(){(0,o.validateEncryptionPublicKeyMessageData)(e);const r=yield this.addUnapprovedMessage(e,t);return new Promise(((t,n)=>{this.hub.once(`${r}:finished`,(r=>{switch(r.status){case"received":return t(r.rawSig);case"rejected":return n(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return n(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}}))}))}))}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){t&&(e.origin=t.origin);const r=(0,i.v1)(),n={id:r,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_getEncryptionPublicKey"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}r.EncryptionPublicKeyManager=a,r.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.js"}],[1316,{"./AbstractMessageManager":1313,"./utils":1320,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.MessageManager=void 0;const s=e("uuid"),o=e("./AbstractMessageManager"),a=e("./utils");class c extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,a.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,a.normalizeMessageData)(e.data);const r=(0,s.v1)(),n={id:r,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_sign"};return yield this.addMessage(n),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:r})),r}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=i(e,["metamaskId"]);return Promise.resolve(r)}}r.MessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/MessageManager.js"}],[1317,{"./AbstractMessageManager":1313,"./utils":1320,"@metamask/controller-utils":1063,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.PersonalMessageManager=void 0;const s=e("@metamask/controller-utils"),o=e("uuid"),a=e("./AbstractMessageManager"),c=e("./utils");class u extends a.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessage(e,t){return n(this,void 0,void 0,(function*(){(0,c.validateSignMessageData)(e),t&&(e.origin=t.origin),e.data=(0,c.normalizeMessageData)(e.data);const r=(0,s.detectSIWE)(e),n=Object.assign(Object.assign({},e),{siwe:r}),i=(0,o.v1)(),a={id:i,messageParams:n,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"personal_sign"};return yield this.addMessage(a),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},n),{metamaskId:i})),i}))}prepMessageForSigning(e){const{metamaskId:t}=e,r=i(e,["metamaskId"]);return Promise.resolve(r)}}r.PersonalMessageManager=u,r.default=u}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/PersonalMessageManager.js"}],[1318,{"./AbstractMessageManager":1313,"./utils":1320,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(r,"__esModule",{value:!0}),r.TypedMessageManager=void 0;const s=e("uuid"),o=e("./AbstractMessageManager"),a=e("./utils");class c extends o.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessage(e,t,r){var i;return n(this,void 0,void 0,(function*(){if("V1"===r&&(0,a.validateTypedSignMessageDataV1)(e),"V3"===r||"V4"===r){const t=null===(i=this.getCurrentChainId)||void 0===i?void 0:i.call(this);(0,a.validateTypedSignMessageDataV3V4)(e,t)}"string"==typeof e.data||"V3"!==r&&"V4"!==r||(e.data=JSON.stringify(e.data));const n=(0,s.v1)(),o=Object.assign(Object.assign({},e),{metamaskId:n,version:r});t&&(e.origin=t.origin);const c={id:n,messageParams:e,securityAlertResponse:null==t?void 0:t.securityAlertResponse,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return yield this.addMessage(c),this.hub.emit("unapprovedMessage",o),n}))}setMessageStatusErrored(e,t){const r=this.getMessage(e);r&&(r.error=t,this.updateMessage(r),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){const{metamaskId:t,version:r}=e,n=i(e,["metamaskId","version"]);return Promise.resolve(n)}}r.TypedMessageManager=c,r.default=c}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/TypedMessageManager.js"}],[1319,{"./AbstractMessageManager":1313,"./DecryptMessageManager":1314,"./EncryptionPublicKeyManager":1315,"./MessageManager":1316,"./PersonalMessageManager":1317,"./TypedMessageManager":1318},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./AbstractMessageManager"),r),i(e("./MessageManager"),r),i(e("./PersonalMessageManager"),r),i(e("./TypedMessageManager"),r),i(e("./EncryptionPublicKeyManager"),r),i(e("./DecryptMessageManager"),r)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.js"}],[132,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:41,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=41;const r=t.data;return t.data=function(e){e.PreferencesController&&e.PreferencesController.preferences&&(e.PreferencesController.preferences.autoLockTimeLimit=e.PreferencesController.preferences.autoLogoutTimeLimit,delete e.PreferencesController.preferences.autoLogoutTimeLimit);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/041.js"}],[1320,{"@metamask/controller-utils":1063,"@metamask/eth-sig-util":1102,buffer:2430,"ethereumjs-util":2798,jsonschema:1323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.validateDecryptedMessageData=r.validateEncryptionPublicKeyMessageData=r.validateTypedSignMessageDataV3V4=r.validateTypedSignMessageDataV1=r.validateSignMessageData=r.normalizeMessageData=void 0;const n=e("@metamask/controller-utils"),i=e("@metamask/eth-sig-util"),s=e("ethereumjs-util"),o=e("jsonschema"),a=/^[0-9A-Fa-f]+$/gu;function c(e,t){if(!e||"string"!=typeof e||!(0,n.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}r.normalizeMessageData=function(e){try{const t=(0,s.stripHexPrefix)(e);if(t.match(a))return(0,s.addHexPrefix)(t)}catch(e){}return(0,s.bufferToHex)(t.from(e,"utf8"))},r.validateSignMessageData=function(e){const{from:t,data:r}=e;if(c(t,"from"),!r||"string"!=typeof r)throw new Error(`Invalid message "data": ${r} must be a valid string.`)},r.validateTypedSignMessageDataV1=function(e){if(c(e.from,"from"),!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{(0,i.typedSignatureHash)(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},r.validateTypedSignMessageDataV3V4=function(e,t){if(c(e.from,"from"),!e.data||Array.isArray(e.data)||"object"!=typeof e.data&&"string"!=typeof e.data)throw new Error('Invalid message "data": Must be a valid string or object.');let r;if("object"==typeof e.data)r=e.data;else try{r=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if((0,o.validate)(r,i.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.");if(!t)throw new Error("Current chainId cannot be null or undefined.");let{chainId:n}=r.domain;if(n){"string"==typeof n&&(n=parseInt(n,n.startsWith("0x")?16:10));const e=parseInt(t,16);if(Number.isNaN(e))throw new Error(`Cannot sign messages for chainId "${n}", because MetaMask is switching networks.`);if(n!==e)throw new Error(`Provided chainId "${n}" must match the active chainId "${e}"`)}},r.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;c(t,"from")},r.validateDecryptedMessageData=function(e){const{from:t}=e;c(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.js"}],[1321,{"./helpers":1322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("./helpers"),i=n.ValidatorResult,s=n.SchemaError,o={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0}},a=o.validators={};function c(e,t,r,n,i){var s=t.throwError;t.throwError=!1;var o=this.validateSchema(e,i,t,r);return t.throwError=s,!o.valid&&n instanceof Function&&n(o),o.valid}function u(e,t,r,n,i,s){if(this.types.object(e)&&(!t.properties||t.properties[i]===undefined))if(!1===t.additionalProperties)s.addError({name:"additionalProperties",argument:i,message:"additionalProperty "+JSON.stringify(i)+" exists in instance when not allowed"});else{var o=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,i,o,r,n);var a=this.validateSchema(e[i],o,r,n.makeChild(o,i));a.instance!==s.instance[i]&&(s.instance[i]=a.instance),s.importErrors(a)}}a.type=function(e,t,r,n){if(e===undefined)return null;var s=new i(e,t,r,n),o=Array.isArray(t.type)?t.type:[t.type];if(!o.some(this.testType.bind(this,e,t,r,n))){var a=o.map((function(e){return e.id&&"<"+e.id+">"||e+""}));s.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return s},a.anyOf=function(e,t,r,n){if(e===undefined)return null;var o=new i(e,t,r,n),a=new i(e,t,r,n);if(!Array.isArray(t.anyOf))throw new s("anyOf must be an array");if(!t.anyOf.some(c.bind(this,e,r,n,(function(e){a.importErrors(e)})))){var u=t.anyOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&o.importErrors(a),o.addError({name:"anyOf",argument:u,message:"is not any of "+u.join(",")})}return o},a.allOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.allOf))throw new s("allOf must be an array");var o=new i(e,t,r,n),a=this;return t.allOf.forEach((function(t,i){var s=a.validateSchema(e,t,r,n);if(!s.valid){var c=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+i+"]";o.addError({name:"allOf",argument:{id:c,length:s.errors.length,valid:s},message:"does not match allOf schema "+c+" with "+s.errors.length+" error[s]:"}),o.importErrors(s)}})),o},a.oneOf=function(e,t,r,n){if(e===undefined)return null;if(!Array.isArray(t.oneOf))throw new s("oneOf must be an array");var o=new i(e,t,r,n),a=new i(e,t,r,n),u=t.oneOf.filter(c.bind(this,e,r,n,(function(e){a.importErrors(e)}))).length,l=t.oneOf.map((function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==u&&(r.nestedErrors&&o.importErrors(a),o.addError({name:"oneOf",argument:l,message:"is not exactly one from "+l.join(",")})),o},a.properties=function(e,t,r,n){if(this.types.object(e)){var s=new i(e,t,r,n),o=t.properties||{};for(var a in o){"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[a],r,n);var c=Object.hasOwnProperty.call(e,a)?e[a]:undefined,u=this.validateSchema(c,o[a],r,n.makeChild(o[a],a));u.instance!==s.instance[a]&&(s.instance[a]=u.instance),s.importErrors(u)}return s}},a.patternProperties=function(e,t,r,n){if(this.types.object(e)){var s=new i(e,t,r,n),o=t.patternProperties||{};for(var a in e){var c=!0;for(var l in o){if(new RegExp(l).test(a)){c=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,o[l],r,n);var d=this.validateSchema(e[a],o[l],r,n.makeChild(o[l],a));d.instance!==s.instance[a]&&(s.instance[a]=d.instance),s.importErrors(d)}}c&&u.call(this,e,t,r,n,a,s)}return s}},a.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var s=new i(e,t,r,n);for(var o in e)u.call(this,e,t,r,n,o,s);return s}},a.minProperties=function(e,t,r,n){if(this.types.object(e)){var s=new i(e,t,r,n);return Object.keys(e).length>=t.minProperties||s.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),s}},a.maxProperties=function(e,t,r,n){if(this.types.object(e)){var s=new i(e,t,r,n);return Object.keys(e).length<=t.maxProperties||s.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),s}},a.items=function(e,t,r,n){var s=this;if(this.types.array(e)&&t.items){var o=new i(e,t,r,n);return e.every((function(e,i){var a=Array.isArray(t.items)?t.items[i]||t.additionalItems:t.items;if(a===undefined)return!0;if(!1===a)return o.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=s.validateSchema(e,a,r,n.makeChild(a,i));return c.instance!==o.instance[i]&&(o.instance[i]=c.instance),o.importErrors(c),!0})),o}},a.minimum=function(e,t,r,n){if(this.types.number(e)){var s=new i(e,t,r,n);return(t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum:e>=t.minimum)||s.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),s}},a.maximum=function(e,t,r,n){if(this.types.number(e)){var s=new i(e,t,r,n);return(t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum:e<=t.maximum)||s.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),s}};var l=function(e,t,r,o,a,c){if(this.types.number(e)){var u=t[a];if(0==u)throw new s(a+" cannot be zero");var l=new i(e,t,r,o),d=n.getDecimalPlaces(e),h=n.getDecimalPlaces(u),f=Math.max(d,h),p=Math.pow(10,f);return Math.round(e*p)%Math.round(u*p)!=0&&l.addError({name:a,argument:u,message:c+JSON.stringify(u)}),l}};function d(e,t,r){var i,s=r.length;for(i=t+1;i<s;i++)if(n.deepCompareStrict(e,r[i]))return!1;return!0}a.multipleOf=function(e,t,r,n){return l.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},a.divisibleBy=function(e,t,r,n){return l.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},a.required=function(e,t,r,n){var s=new i(e,t,r,n);return e===undefined&&!0===t.required?s.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){e[t]===undefined&&s.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),s},a.pattern=function(e,t,r,n){if(this.types.string(e)){var s=new i(e,t,r,n);return e.match(t.pattern)||s.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),s}},a.format=function(e,t,r,s){if(e!==undefined){var o=new i(e,t,r,s);return o.disableFormat||n.isFormat(e,t.format,this)||o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}},a.minLength=function(e,t,r,n){if(this.types.string(e)){var s=new i(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)>=t.minLength||s.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),s}},a.maxLength=function(e,t,r,n){if(this.types.string(e)){var s=new i(e,t,r,n),o=e.match(/[\uDC00-\uDFFF]/g);return e.length-(o?o.length:0)<=t.maxLength||s.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),s}},a.minItems=function(e,t,r,n){if(this.types.array(e)){var s=new i(e,t,r,n);return e.length>=t.minItems||s.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),s}},a.maxItems=function(e,t,r,n){if(this.types.array(e)){var s=new i(e,t,r,n);return e.length<=t.maxItems||s.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),s}},a.uniqueItems=function(e,t,r,s){if(this.types.array(e)){var o=new i(e,t,r,s);return e.every((function(e,t,r){for(var i=t+1;i<r.length;i++)if(n.deepCompareStrict(e,r[i]))return!1;return!0}))||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}},a.uniqueItems=function(e,t,r,n){if(this.types.array(e)){var s=new i(e,t,r,n);return e.every(d)||s.addError({name:"uniqueItems",message:"contains duplicate item"}),s}},a.dependencies=function(e,t,r,n){if(this.types.object(e)){var s=new i(e,t,r,n);for(var o in t.dependencies)if(e[o]!==undefined){var a=t.dependencies[o],c=n.makeChild(a,o);if("string"==typeof a&&(a=[a]),Array.isArray(a))a.forEach((function(t){e[t]===undefined&&s.addError({name:"dependencies",argument:c.propertyPath,message:"property "+t+" not found, required by "+c.propertyPath})}));else{var u=this.validateSchema(e,a,r,c);s.instance!==u.instance&&(s.instance=u.instance),u&&u.errors.length&&(s.addError({name:"dependencies",argument:c.propertyPath,message:"does not meet dependency required by "+c.propertyPath}),s.importErrors(u))}}return s}},a.enum=function(e,t,r,o){if(e===undefined)return null;if(!Array.isArray(t.enum))throw new s("enum expects an array",t);var a=new i(e,t,r,o);return t.enum.some(n.deepCompareStrict.bind(null,e))||a.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),a},a.const=function(e,t,r,s){if(e===undefined)return null;var o=new i(e,t,r,s);return n.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o},a.not=a.disallow=function(e,t,r,n){var s=this;if(e===undefined)return null;var o=new i(e,t,r,n),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach((function(i){if(s.testType(e,t,r,n,i)){var a=i&&i.id&&"<"+i.id+">"||i;o.addError({name:"not",argument:a,message:"is of prohibited type "+a})}})),o):null},t.exports=o}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/attribute.js"}],[1322,{url:3970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),i=r.ValidationError=function(e,t,r,n,i,s){n&&(this.property=n),e&&(this.message=e),r&&(r.id?this.schema=r.id:this.schema=r),t&&(this.instance=t),this.name=i,this.argument=s,this.stack=this.toString()};i.prototype.toString=function(){return this.property+" "+this.message};var s=r.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.disableFormat=r&&!0===r.disableFormat};function o(e,t){return t+": "+e.toString()+"\n"}s.prototype.addError=function(e){var t;if("string"==typeof e)t=new i(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new i(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},s.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)},s.prototype.toString=function(e){return this.errors.map(o).join("")},Object.defineProperty(s.prototype,"valid",{get:function(){return!this.errors.length}});var a=r.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};a.prototype=Object.create(Error.prototype,{constructor:{value:a,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var c=r.SchemaContext=function(e,t,r,n,i){this.schema=e,this.options=t,this.propertyPath=r,this.base=n,this.schemas=i};c.prototype.resolve=function(e){return n.resolve(this.base,e)},c.prototype.makeChild=function(e,t){var r=t===undefined?this.propertyPath:this.propertyPath+l(t),i=n.resolve(this.base,e.id||""),s=new c(e,this.options,r,i,Object.create(this.schemas));return e.id&&!s.schemas[i]&&(s.schemas[i]=e),s};var u=r.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],r.isFormat=function(e,t,r){if("string"==typeof e&&u[t]!==undefined){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var l=r.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};function d(e,t,r,n){"object"==typeof r?t[n]=p(e[n],r):-1===e.indexOf(r)&&t.push(r)}function h(e,t,r){t[r]=e[r]}function f(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=p(e[n],t[n]):r[n]=t[n]}function p(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(d.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(h.bind(null,e,n)),Object.keys(t).forEach(f.bind(null,e,t,n))),n}function m(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}r.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(t instanceof Array)return r instanceof Array&&(t.length===r.length&&t.every((function(n,i){return e(t[i],r[i])})));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),i=Object.keys(r);return n.length===i.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r},t.exports.deepMerge=p,r.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var i=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(i in e))return;e=e[i]}return e},r.encodePath=function(e){return e.map(m).join("")},r.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/helpers.js"}],[1323,{"./helpers":1322,"./scan":1324,"./validator":1325},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.SchemaScanResult=e("./scan").SchemaScanResult,t.exports.scan=e("./scan").scan,t.exports.validate=function(e,t,r){return(new n).validate(e,t,r)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/index.js"}],[1324,{"./helpers":1322,url:3970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),i=e("./helpers");function s(e,t){this.id=e,this.ref=t}t.exports.SchemaScanResult=s,t.exports.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var s=n.resolve(e,t.$ref);u[s]=u[s]?u[s]+1:0}else{var l=t.id?n.resolve(e,t.id):e;if(l){if(l.indexOf("#")<0&&(l+="#"),c[l]){if(!i.deepCompareStrict(c[l],t))throw new Error("Schema <"+t+"> already exists with different definition");return c[l]}c[l]=t,"#"==l[l.length-1]&&(c[l.substring(0,l.length-1)]=t)}o(l+"/items",t.items instanceof Array?t.items:[t.items]),o(l+"/extends",t.extends instanceof Array?t.extends:[t.extends]),r(l+"/additionalItems",t.additionalItems),a(l+"/properties",t.properties),r(l+"/additionalProperties",t.additionalProperties),a(l+"/definitions",t.definitions),a(l+"/patternProperties",t.patternProperties),a(l+"/dependencies",t.dependencies),o(l+"/disallow",t.disallow),o(l+"/allOf",t.allOf),o(l+"/anyOf",t.anyOf),o(l+"/oneOf",t.oneOf),r(l+"/not",t.not)}}function o(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function a(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var c={},u={};return r(e,t),new s(c,u)}}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/scan.js"}],[1325,{"./attribute":1321,"./helpers":1322,"./scan":1324,url:3970},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=e("url"),i=e("./attribute"),s=e("./helpers"),o=e("./scan").scan,a=s.ValidatorResult,c=s.SchemaError,u=s.SchemaContext,l=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(i.validators)};function d(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}l.prototype.customFormats={},l.prototype.schemas=null,l.prototype.types=null,l.prototype.attributes=null,l.prototype.unresolvedRefs=null,l.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=o(t||"/",e),i=t||e.id;for(var s in n.id)this.schemas[s]=n.id[s];for(var s in n.ref)this.unresolvedRefs.push(s);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[i]},l.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},l.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},l.prototype.setSchemas=function(e){this.schemas=e},l.prototype.getSchema=function(e){return this.schemas[e]},l.prototype.validate=function(e,t,r,i){r||(r={});var s=r.propertyName||"instance",a=n.resolve(r.base||"/",t.id||"");if(!i){(i=new u(t,r,s,a,Object.create(this.schemas))).schemas[a]||(i.schemas[a]=t);var l=o(a,t);for(var d in l.id){var h=l.id[d];i.schemas[d]=h}}if(t){var f=this.validateSchema(e,t,r,i);if(!f)throw new Error("Result undefined");return f}throw new c("no schema specified",t)},l.prototype.validateSchema=function(e,t,r,n){var o,l=new a(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(t.extends instanceof Array){var h={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,h)),t=h.schema,h.schema=null,h.ctx=null,h=null}else t=s.deepMerge(t,this.superResolve(t.extends,n));if(o=d(t)){var f=this.resolve(t,o,n),p=new u(f.subschema,r,n.propertyPath,f.switchSchema,n.schemas);return this.validateSchema(e,f.subschema,r,p)}var m=r&&r.skipAttributes||[];for(var g in t)if(!i.ignoreProperties[g]&&m.indexOf(g)<0){var y=null,w=this.attributes[g];if(w)y=w.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new c("Unsupported attribute: "+g,t);y&&l.importErrors(y)}if("function"==typeof r.rewrite){var b=r.rewrite.call(this,e,t,r,n);l.instance=b}return l},l.prototype.schemaTraverser=function(e,t){e.schema=s.deepMerge(e.schema,this.superResolve(t,e.ctx))},l.prototype.superResolve=function(e,t){var r;return(r=d(e))?this.resolve(e,r,t).subschema:e},l.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var i=n.parse(t),o=i&&i.hash,a=o&&o.length&&t.substr(0,t.length-o.length);if(!a||!r.schemas[a])throw new c("no such schema <"+t+">",e);var u=s.objectGetPath(r.schemas[a],o.substr(1));if(u===undefined)throw new c("no such schema "+o+" located in <"+a+">",e);return{subschema:u,switchSchema:t}},l.prototype.testType=function(e,t,r,n,i){if("function"==typeof this.types[i])return this.types[i].call(this,e);if(i&&"object"==typeof i){var s=this.validateSchema(e,i,r,n);return s===undefined||!(s&&s.errors.length)}return!0};var h=l.prototype.types={};h.string=function(e){return"string"==typeof e},h.number=function(e){return"number"==typeof e&&isFinite(e)},h.integer=function(e){return"number"==typeof e&&e%1==0},h.boolean=function(e){return"boolean"==typeof e},h.array=function(e){return Array.isArray(e)},h.null=function(e){return null===e},h.date=function(e){return e instanceof Date},h.any=function(e){return!0},h.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=l}}},{package:"@metamask/message-manager>jsonschema",file:"node_modules/@metamask/message-manager/node_modules/jsonschema/lib/validator.js"}],[133,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:42,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=42;const r=t.data;return t.data=function(e){e.AppStateController?e.AppStateController.connectedStatusPopoverHasBeenShown=!1:e.AppStateController={connectedStatusPopoverHasBeenShown:!1};return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/042.js"}],[134,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:43,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=43;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.PreferencesController)&&void 0!==t&&t.currentAccountTab&&delete e.PreferencesController.currentAccountTab;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/043.js"}],[1340,{"./constants":1341,"./create-auto-managed-network-client":1342,"./logger":1345,"./types":1346,"@metamask/base-controller":1058,"@metamask/controller-utils":1063,"@metamask/eth-query":1100,"@metamask/rpc-errors":1479,"@metamask/swappable-obj-proxy":1717,"@metamask/utils":1769,assert:2426,uuid:3994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p,m,g,y,w,b,v=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},k=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},_=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkController=r.defaultState=r.knownKeysOf=void 0;const T=e("@metamask/base-controller"),E=e("@metamask/controller-utils"),j=S(e("@metamask/eth-query")),M=e("@metamask/rpc-errors"),A=e("@metamask/swappable-obj-proxy"),P=e("@metamask/utils"),C=e("assert"),O=e("uuid"),R=e("./constants"),I=e("./create-auto-managed-network-client"),x=e("./logger"),N=e("./types"),K=(0,x.createModuleLogger)(x.projectLogger,"NetworkController");function D(e){return Object.keys(e)}function B(e,t){const r=t.reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{});var n,i,s;return n=r,i=()=>t.every((e=>e in r)),s="The reduce did not produce an object with all of the desired keys.",C.strict.ok(i(n),s),r}function U(e){return"object"==typeof e&&null!==e&&"code"in e}function $(e){return"string"==typeof e?e:e.type}function L(...e){if(1===e.length)return e[0];const[{id:t,rpcUrl:r},n]=e;if(t===undefined){const e=Object.values(n).find((e=>e.rpcUrl===r.toLowerCase()));return e?e.id:r.toLowerCase()}return t}function q(e){return(0,E.isInfuraNetworkType)(e.type)}function F(e){return e.type===E.NetworkType.rpc}function H(e){if(e.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(e.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints")}r.knownKeysOf=D;r.defaultState={selectedNetworkClientId:E.NetworkType.mainnet,providerConfig:{type:E.NetworkType.mainnet,chainId:E.ChainId.mainnet,ticker:E.NetworksTicker.mainnet},networksMetadata:{},networkConfigurations:{}};class V extends T.BaseController{constructor({messenger:e,state:t,infuraProjectId:d,trackMetaMetricsEvent:h}){if(super({name:"NetworkController",metadata:{selectedNetworkClientId:{persist:!0,anonymous:!1},networksMetadata:{persist:!0,anonymous:!1},providerConfig:{persist:!0,anonymous:!1},networkConfigurations:{persist:!0,anonymous:!1}},messenger:e,state:Object.assign(Object.assign({},r.defaultState),t)}),n.add(this),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),!d||"string"!=typeof d)throw new Error("Invalid Infura project ID");k(this,s,d,"f"),k(this,o,h,"f"),this.messagingSystem.registerActionHandler(`${this.name}:getProviderConfig`,(()=>this.state.providerConfig)),this.messagingSystem.registerActionHandler(`${this.name}:getEthQuery`,(()=>_(this,i,"f"))),this.messagingSystem.registerActionHandler(`${this.name}:getNetworkClientById`,this.getNetworkClientById.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:getEIP1559Compatibility`,this.getEIP1559Compatibility.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:setActiveNetwork`,this.setActiveNetwork.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:setProviderType`,this.setProviderType.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:findNetworkClientIdByChainId`,this.findNetworkClientIdByChainId.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:getNetworkConfigurationByNetworkClientId`,this.getNetworkConfigurationByNetworkClientId.bind(this)),k(this,a,this.state.providerConfig,"f")}getProviderAndBlockTracker(){return{provider:_(this,c,"f"),blockTracker:_(this,u,"f")}}getNetworkClientRegistry(){const e=_(this,n,"m",p).call(this);return Object.assign({},e[N.NetworkClientType.Infura],e[N.NetworkClientType.Custom])}getNetworkClientById(e){if(!e)throw new Error("No network client ID was provided.");const t=_(this,n,"m",p).call(this);if((0,E.isInfuraNetworkType)(e)){const r=t[N.NetworkClientType.Infura][e];if(!r)throw new Error(`No Infura network client was found with the ID "${e}".`);return r}const r=t[N.NetworkClientType.Custom][e];if(!r)throw new Error(`No custom network client was found with the ID "${e}".`);return r}initializeProvider(){return v(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),_(this,n,"m",b).call(this),yield this.lookupNetwork()}))}lookupNetworkByClientId(e){return v(this,void 0,void 0,(function*(){const t=(0,E.isInfuraNetworkType)(e);let r,i;try{i=yield _(this,n,"m",f).call(this,e),r=R.NetworkStatus.Available}catch(e){if(U(e)){let n;if(t&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message)try{n=JSON.parse(e.message)}catch(e){}r=(0,P.isPlainObject)(n)&&n.error===R.INFURA_BLOCKED_KEY?R.NetworkStatus.Blocked:e.code===M.errorCodes.rpc.internal?R.NetworkStatus.Unknown:R.NetworkStatus.Unavailable}else{if("undefined"!=typeof Error&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message&&e.message.includes("No custom network client was found with the ID"))throw e;K("NetworkController - could not determine network status",e),r=R.NetworkStatus.Unknown}}this.update((t=>{t.networksMetadata[e]===undefined&&(t.networksMetadata[e]={status:R.NetworkStatus.Unknown,EIPS:{}});const n=t.networksMetadata[e];n.status=r,i===undefined?delete n.EIPS[1559]:n.EIPS[1559]=i}))}))}lookupNetwork(e){return v(this,void 0,void 0,(function*(){if(e)return void(yield this.lookupNetworkByClientId(e));if(!_(this,i,"f"))return;const t=q(this.state.providerConfig);let r=!1;const s=()=>{r=!0,this.messagingSystem.unsubscribe("NetworkController:networkDidChange",s)};let o,a;this.messagingSystem.subscribe("NetworkController:networkDidChange",s);try{const e=yield _(this,n,"m",f).call(this,this.state.selectedNetworkClientId);o=R.NetworkStatus.Available,a=e}catch(e){if(U(e)){let r;if(t&&(0,P.hasProperty)(e,"message")&&"string"==typeof e.message)try{r=JSON.parse(e.message)}catch(e){}o=(0,P.isPlainObject)(r)&&r.error===R.INFURA_BLOCKED_KEY?R.NetworkStatus.Blocked:e.code===M.errorCodes.rpc.internal?R.NetworkStatus.Unknown:R.NetworkStatus.Unavailable}else K("NetworkController - could not determine network status",e),o=R.NetworkStatus.Unknown}r||(this.messagingSystem.unsubscribe("NetworkController:networkDidChange",s),this.update((e=>{const t=e.networksMetadata[e.selectedNetworkClientId];t.status=o,a===undefined?delete t.EIPS[1559]:t.EIPS[1559]=a})),t?o===R.NetworkStatus.Available?this.messagingSystem.publish("NetworkController:infuraIsUnblocked"):o===R.NetworkStatus.Blocked&&this.messagingSystem.publish("NetworkController:infuraIsBlocked"):this.messagingSystem.publish("NetworkController:infuraIsUnblocked"))}))}setProviderType(e){return v(this,void 0,void 0,(function*(){C.strict.notStrictEqual(e,E.NetworkType.rpc,`NetworkController - cannot call "setProviderType" with type "${E.NetworkType.rpc}". Use "setActiveNetwork"`),C.strict.ok((0,E.isInfuraNetworkType)(e),`Unknown Infura provider type "${e}".`),yield this.setActiveNetwork(e)}))}setActiveNetwork(e){return v(this,void 0,void 0,(function*(){let t;if(k(this,a,this.state.providerConfig,"f"),(0,E.isInfuraNetworkType)(e)){const r=E.NetworksTicker[e];t={chainId:E.ChainId[e],id:undefined,rpcPrefs:E.BUILT_IN_NETWORKS[e].rpcPrefs,rpcUrl:undefined,nickname:undefined,ticker:r,type:e}}else{if(!Object.keys(this.state.networkConfigurations).includes(e))throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration or built-in network type`);t=Object.assign(Object.assign({},this.state.networkConfigurations[e]),{type:E.NetworkType.rpc})}_(this,n,"m",p).call(this),this.update((e=>{e.providerConfig=t})),yield _(this,n,"m",d).call(this)}))}getEIP1559Compatibility(e){return v(this,void 0,void 0,(function*(){if(e)return this.get1559CompatibilityWithNetworkClientId(e);if(!_(this,i,"f"))return!1;const{EIPS:t}=this.state.networksMetadata[this.state.selectedNetworkClientId];if(t[1559]!==undefined)return t[1559];const r=yield _(this,n,"m",f).call(this,this.state.selectedNetworkClientId);return this.update((e=>{r!==undefined&&(e.networksMetadata[e.selectedNetworkClientId].EIPS[1559]=r)})),r}))}get1559CompatibilityWithNetworkClientId(e){return v(this,void 0,void 0,(function*(){let t=this.state.networksMetadata[e];t===undefined&&(yield this.lookupNetwork(e),t=this.state.networksMetadata[e]);const{EIPS:r}=t;return r[1559]}))}resetConnection(){return v(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),yield _(this,n,"m",d).call(this)}))}getNetworkConfigurationByNetworkClientId(e){if((0,E.isInfuraNetworkType)(e)){const t=`https://${e}.infura.io/v3/${_(this,s,"f")}`;return Object.assign({rpcUrl:t},E.BUILT_IN_NETWORKS[e])}return this.state.networkConfigurations[e]}upsertNetworkConfiguration(e,{referrer:t,source:r,setActive:i=!1}){return v(this,void 0,void 0,(function*(){const s=B(e,["rpcUrl","chainId","ticker","nickname","rpcPrefs"]),{rpcUrl:a,chainId:c,ticker:u}=s;if((0,P.assertIsStrictHexString)(c),!(0,E.isSafeChainId)(c))throw new Error(`Invalid chain ID "${c}": numerical value greater than max safe value.`);if(!a)throw new Error("An rpcUrl is required to add or update network configuration");if(!t||!r)throw new Error("referrer and source are required arguments for adding or updating a network configuration");try{new URL(a)}catch(e){if(e.message.includes("Invalid URL"))throw new Error("rpcUrl must be a valid URL")}if(!u)throw new Error("A ticker is required to add or update networkConfiguration");const l=_(this,n,"m",p).call(this),d=Object.values(this.state.networkConfigurations).find((e=>e.rpcUrl.toLowerCase()===a.toLowerCase())),h=d?d.id:(0,O.v4)(),f=L(h),m=l[N.NetworkClientType.Custom],g=m[f],y=g&&g.configuration.chainId!==c;return y&&g.destroy(),g&&!y||(m[f]=(0,I.createAutoManagedNetworkClient)({type:N.NetworkClientType.Custom,chainId:c,rpcUrl:a,ticker:u})),this.update((e=>{e.networkConfigurations[h]=Object.assign({id:h},s)})),d||_(this,o,"f").call(this,{event:"Custom Network Added",category:"Network",referrer:{url:t},properties:{chain_id:c,symbol:u,source:r}}),i&&(yield this.setActiveNetwork(h)),h}))}removeNetworkConfiguration(e){if(!this.state.networkConfigurations[e])throw new Error(`networkConfigurationId ${e} does not match a configured networkConfiguration`);const t=_(this,n,"m",p).call(this),r=L(e);this.update((t=>{delete t.networkConfigurations[e]}));const i=t[N.NetworkClientType.Custom];i[r].destroy(),delete i[r]}rollbackToPreviousProvider(){return v(this,void 0,void 0,(function*(){_(this,n,"m",p).call(this),this.update((e=>{e.providerConfig=_(this,a,"f")})),yield _(this,n,"m",d).call(this)}))}destroy(){var e;return v(this,void 0,void 0,(function*(){yield null===(e=_(this,u,"f"))||void 0===e?void 0:e.destroy()}))}loadBackup({networkConfigurations:e}){this.update((t=>{t.networkConfigurations=Object.assign(Object.assign({},t.networkConfigurations),e)}))}findNetworkClientIdByChainId(e){const t=this.getNetworkClientRegistry(),r=Object.entries(t).find((([t,r])=>r.configuration.chainId===e));if(r===undefined)throw new Error("Couldn't find networkClientId for chainId");return r[0]}}r.NetworkController=V,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,n=new WeakSet,d=function(){return v(this,void 0,void 0,(function*(){this.messagingSystem.publish("NetworkController:networkWillChange",this.state),_(this,n,"m",b).call(this),this.messagingSystem.publish("NetworkController:networkDidChange",this.state),yield this.lookupNetwork()}))},h=function(e){e===undefined&&(e=this.state.selectedNetworkClientId);const t=this.getNetworkClientById(e),r=new j.default(t.provider);return new Promise(((e,t)=>{r.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,n)=>{r?t(r):e(n)}))}))},f=function(e){return v(this,void 0,void 0,(function*(){const t=yield _(this,n,"m",h).call(this,e);return t?t.baseFeePerGas!==undefined:undefined}))},p=function(){var e;const t=null!==(e=_(this,l,"f"))&&void 0!==e?e:_(this,n,"m",m).call(this);return k(this,l,t,"f"),t},m=function(){return[..._(this,n,"m",g).call(this),..._(this,n,"m",y).call(this),..._(this,n,"m",w).call(this)].reduce(((e,[t,r,n])=>{const i=(0,I.createAutoManagedNetworkClient)(n);return r in e[t]?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{[r]:i})})}),{[N.NetworkClientType.Infura]:{},[N.NetworkClientType.Custom]:{}})},g=function(){return D(E.InfuraNetworkType).map((e=>{const t=$(e),r={type:N.NetworkClientType.Infura,network:e,infuraProjectId:_(this,s,"f"),chainId:E.BUILT_IN_NETWORKS[e].chainId,ticker:E.BUILT_IN_NETWORKS[e].ticker};return[N.NetworkClientType.Infura,t,r]}))},y=function(){return Object.entries(this.state.networkConfigurations).map((([e,t])=>{if(t.chainId===undefined)throw new Error("chainId must be provided for custom RPC endpoints");if(t.rpcUrl===undefined)throw new Error("rpcUrl must be provided for custom RPC endpoints");const r=L(e),n={type:N.NetworkClientType.Custom,chainId:t.chainId,rpcUrl:t.rpcUrl,ticker:t.ticker};return[N.NetworkClientType.Custom,r,n]}))},w=function(){const{providerConfig:e}=this.state;if(F(e)){H(e);const t=L(e,this.state.networkConfigurations),r={chainId:e.chainId,rpcUrl:e.rpcUrl,type:N.NetworkClientType.Custom,ticker:e.ticker};return[[N.NetworkClientType.Custom,t,r]]}if(q(e))return[];throw new Error(`Unrecognized network type: '${e.type}'`)},b=function(){if(!_(this,l,"f"))throw new Error("initializeProvider must be called first in order to switch the network");const{providerConfig:e}=this.state;let t,r;if(q(e)){const n=N.NetworkClientType.Infura;r=$(e);if(t=_(this,l,"f")[n][r],!t)throw new Error(`Could not find custom network matching ${r}`)}else{if(!F(e))throw new Error("Could not determine type of provider config");{H(e);const n=N.NetworkClientType.Custom;r=L(e,this.state.networkConfigurations);if(t=_(this,l,"f")[n][r],!t)throw new Error(`Could not find built-in network matching ${r}`)}}this.update((e=>{e.selectedNetworkClientId=r,e.networksMetadata[r]===undefined&&(e.networksMetadata[r]={status:R.NetworkStatus.Unknown,EIPS:{}})}));const{provider:n,blockTracker:s}=t;_(this,c,"f")?_(this,c,"f").setTarget(n):k(this,c,(0,A.createEventEmitterProxy)(n),"f"),_(this,u,"f")?_(this,u,"f").setTarget(s):k(this,u,(0,A.createEventEmitterProxy)(s,{eventFilter:"skipInternal"}),"f"),k(this,i,new j.default(_(this,c,"f")),"f")}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/NetworkController.js"}],[1341,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.INFURA_BLOCKED_KEY=r.NetworkStatus=void 0,function(e){e.Unknown="unknown",e.Available="available",e.Unavailable="unavailable",e.Blocked="blocked"}(r.NetworkStatus||(r.NetworkStatus={})),r.INFURA_BLOCKED_KEY="countryBlocked"}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/constants.js"}],[1342,{"./create-network-client":1343},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createAutoManagedNetworkClient=void 0;const n=e("./create-network-client"),i="__target__",s={__UNINITIALIZED__:!0};r.createAutoManagedNetworkClient=function(e){let t;const r=new Proxy(s,{get(r,s,o){if(s===i)return null==t?void 0:t.provider;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like `createNetworkClient` didn't return anything. Perhaps it's being mocked?");const{provider:a}=t;if(s in a){const e=a[s];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,s){if(s===i)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{provider:o}=t;return s in o}}),o=new Proxy(s,{get(r,s,o){if(s===i)return null==t?void 0:t.blockTracker;if(null!=t||(t=(0,n.createNetworkClient)(e)),t===undefined)throw new Error("It looks like createNetworkClient returned undefined. Perhaps it's mocked?");const{blockTracker:a}=t;if(s in a){const e=a[s];return"function"==typeof e?function(...t){return e.apply(this===o?a:this,t)}:e}return undefined},has(r,s){if(s===i)return!0;null!=t||(t=(0,n.createNetworkClient)(e));const{blockTracker:o}=t;return s in o}});return{configuration:e,provider:r,blockTracker:o,destroy:()=>{null==t||t.destroy()}}}}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-auto-managed-network-client.js"}],[1343,{"./types":1346,"@metamask/controller-utils":1063,"@metamask/eth-json-rpc-infura":1072,"@metamask/eth-json-rpc-middleware":1079,"@metamask/eth-json-rpc-provider":1088,"@metamask/json-rpc-engine":1197,"eth-block-tracker":2704},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){this&&this.__awaiter;Object.defineProperty(r,"__esModule",{value:!0}),r.createNetworkClient=void 0;const n=e("@metamask/controller-utils"),i=e("@metamask/eth-json-rpc-infura"),s=e("@metamask/eth-json-rpc-middleware"),o=e("@metamask/eth-json-rpc-provider"),a=e("@metamask/json-rpc-engine"),c=e("eth-block-tracker"),u=e("./types");function l({network:e}){return(0,a.createScaffoldMiddleware)({eth_chainId:n.ChainId[e]})}r.createNetworkClient=function(e){const t=e.type===u.NetworkClientType.Infura?(0,i.createInfuraMiddleware)({network:e.network,projectId:e.infuraProjectId,maxAttempts:5,source:"metamask"}):(0,s.createFetchMiddleware)({btoa:global.btoa,fetch:global.fetch,rpcUrl:e.rpcUrl}),r=(0,o.providerFromMiddleware)(t),n={},h=new c.PollingBlockTracker(Object.assign(Object.assign({},n),{provider:r})),f=e.type===u.NetworkClientType.Infura?function({blockTracker:e,network:t,rpcProvider:r,rpcApiMiddleware:n}){return(0,a.mergeMiddleware)([l({network:t}),(0,s.createBlockCacheMiddleware)({blockTracker:e}),(0,s.createInflightCacheMiddleware)(),(0,s.createBlockRefMiddleware)({blockTracker:e,provider:r}),(0,s.createRetryOnEmptyMiddleware)({blockTracker:e,provider:r}),(0,s.createBlockTrackerInspectorMiddleware)({blockTracker:e}),n])}({blockTracker:h,network:e.network,rpcProvider:r,rpcApiMiddleware:t}):function({blockTracker:e,chainId:t,rpcApiMiddleware:r}){const n=[];return(0,a.mergeMiddleware)([...n,d(t),(0,s.createBlockRefRewriteMiddleware)({blockTracker:e}),(0,s.createBlockCacheMiddleware)({blockTracker:e}),(0,s.createInflightCacheMiddleware)(),(0,s.createBlockTrackerInspectorMiddleware)({blockTracker:e}),r])}({blockTracker:h,chainId:e.chainId,rpcApiMiddleware:t}),p=new a.JsonRpcEngine;return p.push(f),{configuration:e,provider:(0,o.providerFromEngine)(p),blockTracker:h,destroy:()=>{h.destroy()}}};const d=e=>(t,r,n,i)=>"eth_chainId"===t.method?(r.result=e,i()):n()}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/create-network-client.js"}],[1344,{"./NetworkController":1340,"./constants":1341,"./types":1346},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkClientType=void 0,i(e("./NetworkController"),r),i(e("./constants"),r);var s=e("./types");Object.defineProperty(r,"NetworkClientType",{enumerable:!0,get:function(){return s.NetworkClientType}})}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/index.js"}],[1345,{"@metamask/utils":1769},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.projectLogger=void 0;const n=e("@metamask/utils");Object.defineProperty(r,"createModuleLogger",{enumerable:!0,get:function(){return n.createModuleLogger}}),r.projectLogger=(0,n.createProjectLogger)("network-controller")}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/logger.js"}],[1346,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkClientType=void 0,function(e){e.Custom="custom",e.Infura="infura"}(r.NetworkClientType||(r.NetworkClientType={}))}}},{package:"@metamask/network-controller",file:"node_modules/@metamask/network-controller/dist/types.js"}],[1347,{"@metamask/base-controller":1352,"@metamask/utils":1361,nanoid:1371},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationController=void 0;const n=e("nanoid"),i=e("@metamask/utils"),s=e("@metamask/base-controller"),o="NotificationController",a={notifications:{persist:!0,anonymous:!1}},c={notifications:{}};class u extends s.BaseControllerV2{constructor({messenger:e,state:t}){super({name:o,metadata:a,messenger:e,state:Object.assign(Object.assign({},c),t)}),this.messagingSystem.registerActionHandler(`${o}:show`,((e,t)=>this.show(e,t))),this.messagingSystem.registerActionHandler(`${o}:dismiss`,(e=>this.dismiss(e))),this.messagingSystem.registerActionHandler(`${o}:markRead`,(e=>this.markRead(e))),this.messagingSystem.registerActionHandler(`${o}:clear`,(()=>this.clear()))}show(e,t){const r=(0,n.nanoid)(),i={id:r,origin:e,createdDate:Date.now(),readDate:null,message:t};this.update((e=>{e.notifications[r]=i}))}dismiss(e){this.update((t=>{for(const r of e)(0,i.hasProperty)(t.notifications,r)&&delete t.notifications[r]}))}markRead(e){this.update((t=>{for(const r of e)(0,i.hasProperty)(t.notifications,r)&&(t.notifications[r].readDate=Date.now())}))}clear(){this.update((()=>Object.assign({},c)))}}r.NotificationController=u}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/NotificationController.js"}],[1348,{"./NotificationController":1347},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./NotificationController"),r)}}},{package:"@metamask/notification-controller",file:"node_modules/@metamask/notification-controller/dist/index.js"}],[1349,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[135,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:44,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=44;const r=t.data;return t.data=function(e){var t;void 0!==(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.mkrMigrationReminderTimestamp)&&delete e.AppStateController.mkrMigrationReminderTimestamp;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/044.js"}],[1350,{immer:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1351,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1352,{"./BaseController":1349,"./BaseControllerV2":1350,"./ControllerMessenger":1351},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/notification-controller>@metamask/base-controller",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/base-controller/dist/index.js"}],[1353,{superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.assertExhaustive=r.assertStruct=r.assert=r.AssertionError=void 0;const n=e("superstruct");function i(e,t){return r=e,Boolean("string"==typeof(null===(i=null===(n=null==r?void 0:r.prototype)||void 0===n?void 0:n.constructor)||void 0===i?void 0:i.name))?new e({message:t}):e({message:t});var r,n,i}class s extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}r.AssertionError=s,r.assert=function(e,t="Assertion failed.",r=s){if(!e){if(t instanceof Error)throw t;throw i(r,t)}},r.assertStruct=function(e,t,r="Assertion failed",o=s){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${r}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},r.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/assert.js"}],[1354,{"./assert":1353,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.base64=void 0;const n=e("superstruct"),i=e("./assert");r.base64=(e,t={})=>{var r,s;const o=null!==(r=t.paddingRequired)&&void 0!==r&&r,a=null!==(s=t.characterSet)&&void 0!==s?s:"base64";let c,u;return"base64"===a?c=String.raw`[A-Za-z0-9+\/]`:((0,i.assert)("base64url"===a),c=String.raw`[-_A-Za-z0-9]`),u=o?new RegExp(`^(?:${c}{4})*(?:${c}{3}=|${c}{2}==)?$`,"u"):new RegExp(`^(?:${c}{4})*(?:${c}{2,3}|${c}{3}=|${c}{2}==)?$`,"u"),(0,n.pattern)(e,u)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/base64.js"}],[1355,{"./assert":1353,"./hex":1360,buffer:2430},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.createDataView=r.concatBytes=r.valueToBytes=r.stringToBytes=r.numberToBytes=r.signedBigIntToBytes=r.bigIntToBytes=r.hexToBytes=r.bytesToString=r.bytesToNumber=r.bytesToSignedBigInt=r.bytesToBigInt=r.bytesToHex=r.assertIsBytes=r.isBytes=void 0;const n=e("./assert"),i=e("./hex"),s=48,o=58,a=87;const c=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function l(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function d(e){if(l(e),0===e.length)return"0x";const t=c(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,i.add0x)(r.join(""))}function h(e){l(e);const t=d(e);return BigInt(t)}function f(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,i.assertIsHexString)(e);const r=(0,i.remove0x)(e).toLowerCase(),n=r.length%2==0?r:`0${r}`,c=new Uint8Array(n.length/2);for(let e=0;e<c.length;e++){const t=n.charCodeAt(2*e),r=n.charCodeAt(2*e+1),i=t-(t<o?s:a),u=r-(r<o?s:a);c[e]=16*i+u}return c}function p(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function m(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function y(e){if("bigint"==typeof e)return p(e);if("number"==typeof e)return m(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}r.isBytes=u,r.assertIsBytes=l,r.bytesToHex=d,r.bytesToBigInt=h,r.bytesToSignedBigInt=function(e){l(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},r.bytesToNumber=function(e){l(e);const t=h(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},r.bytesToString=function(e){return l(e),(new TextDecoder).decode(e)},r.hexToBytes=f,r.bigIntToBytes=p,r.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let e=0;e<i.length;e++)i[e]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()},r.numberToBytes=m,r.stringToBytes=g,r.valueToBytes=y,r.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let n=0;n<e.length;n++){const i=y(e[n]);t[n]=i,r+=i.length}const n=new Uint8Array(r);for(let e=0,r=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n},r.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/bytes.js"}],[1356,{"./base64":1354,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ChecksumStruct=void 0;const n=e("superstruct"),i=e("./base64");r.ChecksumStruct=(0,n.size)((0,i.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/checksum.js"}],[1357,{"./assert":1353,"./bytes":1355,"./hex":1360,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createHex=r.createBytes=r.createBigInt=r.createNumber=void 0;const n=e("superstruct"),i=e("./assert"),s=e("./bytes"),o=e("./hex"),a=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),o.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),a,Number),u=(0,n.coerce)((0,n.bigint)(),a,BigInt),l=((0,n.union)([o.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([o.StrictHexStruct]),s.hexToBytes)),d=(0,n.coerce)(o.StrictHexStruct,(0,n.instance)(Uint8Array),s.bytesToHex);r.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,i.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},r.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},r.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},r.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,d)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/coercers.js"}],[1358,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.FrozenSet=r.FrozenMap=void 0;class a{constructor(e){n.set(this,void 0),s(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return o(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return o(this,n,"f")[Symbol.iterator]()}entries(){return o(this,n,"f").entries()}forEach(e,t){return o(this,n,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}get(e){return o(this,n,"f").get(e)}has(e){return o(this,n,"f").has(e)}keys(){return o(this,n,"f").keys()}values(){return o(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}r.FrozenMap=a;class c{constructor(e){i.set(this,void 0),s(this,i,new Set(e),"f"),Object.freeze(this)}get size(){return o(this,i,"f").size}[(i=new WeakMap,Symbol.iterator)](){return o(this,i,"f")[Symbol.iterator]()}entries(){return o(this,i,"f").entries()}forEach(e,t){return o(this,i,"f").forEach(((r,n,i)=>e.call(t,r,n,this)))}has(e){return o(this,i,"f").has(e)}keys(){return o(this,i,"f").keys()}values(){return o(this,i,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}r.FrozenSet=c,Object.freeze(a),Object.freeze(a.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/collections.js"}],[1359,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/encryption-types.js"}],[136,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:45,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=45;const r=t.data;return t.data=function(e){var t;i.includes(null==e||null===(t=e.PreferencesController)||void 0===t?void 0:t.ipfsGateway)&&(e.PreferencesController.ipfsGateway="dweb.link");return e}(r),t}};const i=["ipfs.io","ipfs.dweb.link"]}}},{package:"$root$",file:"app/scripts/migrations/045.js"}],[1360,{"./assert":1353,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.remove0x=r.add0x=r.assertIsStrictHexString=r.assertIsHexString=r.isStrictHexString=r.isHexString=r.StrictHexStruct=r.HexStruct=void 0;const n=e("superstruct"),i=e("./assert");function s(e){return(0,n.is)(e,r.HexStruct)}function o(e){return(0,n.is)(e,r.StrictHexStruct)}r.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),r.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),r.isHexString=s,r.isStrictHexString=o,r.assertIsHexString=function(e){(0,i.assert)(s(e),"Value must be a hexadecimal string.")},r.assertIsStrictHexString=function(e){(0,i.assert)(o(e),'Value must be a hexadecimal string, starting with "0x".')},r.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},r.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/hex.js"}],[1361,{"./assert":1353,"./base64":1354,"./bytes":1355,"./checksum":1356,"./coercers":1357,"./collections":1358,"./encryption-types":1359,"./hex":1360,"./json":1362,"./keyring":1363,"./logging":1364,"./misc":1365,"./number":1366,"./opaque":1367,"./time":1368,"./transaction-types":1369,"./versions":1370},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./assert"),r),i(e("./base64"),r),i(e("./bytes"),r),i(e("./checksum"),r),i(e("./coercers"),r),i(e("./collections"),r),i(e("./encryption-types"),r),i(e("./hex"),r),i(e("./json"),r),i(e("./keyring"),r),i(e("./logging"),r),i(e("./misc"),r),i(e("./number"),r),i(e("./opaque"),r),i(e("./time"),r),i(e("./transaction-types"),r),i(e("./versions"),r)}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/index.js"}],[1362,{"./assert":1353,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getJsonRpcIdValidator=r.assertIsJsonRpcError=r.isJsonRpcError=r.assertIsJsonRpcFailure=r.isJsonRpcFailure=r.assertIsJsonRpcSuccess=r.isJsonRpcSuccess=r.assertIsJsonRpcResponse=r.isJsonRpcResponse=r.assertIsPendingJsonRpcResponse=r.isPendingJsonRpcResponse=r.JsonRpcResponseStruct=r.JsonRpcFailureStruct=r.JsonRpcSuccessStruct=r.PendingJsonRpcResponseStruct=r.assertIsJsonRpcRequest=r.isJsonRpcRequest=r.assertIsJsonRpcNotification=r.isJsonRpcNotification=r.JsonRpcNotificationStruct=r.JsonRpcRequestStruct=r.JsonRpcParamsStruct=r.JsonRpcErrorStruct=r.JsonRpcIdStruct=r.JsonRpcVersionStruct=r.jsonrpc2=r.getJsonSize=r.isValidJson=r.JsonStruct=r.UnsafeJsonStruct=void 0;const n=e("superstruct"),i=e("./assert");r.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>r.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>r.UnsafeJsonStruct)))]),r.JsonStruct=(0,n.define)("Json",((e,t)=>{function n(e,r){const n=[...r.validator(e,t)];return!(n.length>0)||n}try{const t=n(e,r.UnsafeJsonStruct);return!0!==t?t:n(JSON.parse(JSON.stringify(e)),r.UnsafeJsonStruct)}catch(e){return e instanceof RangeError&&"Circular reference detected"}})),r.isValidJson=function(e){return(0,n.is)(e,r.JsonStruct)},r.getJsonSize=function(e){(0,i.assertStruct)(e,r.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},r.jsonrpc2="2.0",r.JsonRpcVersionStruct=(0,n.literal)(r.jsonrpc2),r.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),r.JsonRpcErrorStruct=(0,n.object)({code:(0,n.integer)(),message:(0,n.string)(),data:(0,n.optional)(r.JsonStruct),stack:(0,n.optional)((0,n.string)())}),r.JsonRpcParamsStruct=(0,n.optional)((0,n.union)([(0,n.record)((0,n.string)(),r.JsonStruct),(0,n.array)(r.JsonStruct)])),r.JsonRpcRequestStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,method:(0,n.string)(),params:r.JsonRpcParamsStruct}),r.JsonRpcNotificationStruct=(0,n.omit)(r.JsonRpcRequestStruct,["id"]),r.isJsonRpcNotification=function(e){return(0,n.is)(e,r.JsonRpcNotificationStruct)},r.assertIsJsonRpcNotification=function(e,t){(0,i.assertStruct)(e,r.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},r.isJsonRpcRequest=function(e){return(0,n.is)(e,r.JsonRpcRequestStruct)},r.assertIsJsonRpcRequest=function(e,t){(0,i.assertStruct)(e,r.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},r.PendingJsonRpcResponseStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(r.JsonRpcErrorStruct)}),r.JsonRpcSuccessStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,result:r.JsonStruct}),r.JsonRpcFailureStruct=(0,n.object)({id:r.JsonRpcIdStruct,jsonrpc:r.JsonRpcVersionStruct,error:r.JsonRpcErrorStruct}),r.JsonRpcResponseStruct=(0,n.union)([r.JsonRpcSuccessStruct,r.JsonRpcFailureStruct]),r.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,r.PendingJsonRpcResponseStruct)},r.assertIsPendingJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},r.isJsonRpcResponse=function(e){return(0,n.is)(e,r.JsonRpcResponseStruct)},r.assertIsJsonRpcResponse=function(e,t){(0,i.assertStruct)(e,r.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},r.isJsonRpcSuccess=function(e){return(0,n.is)(e,r.JsonRpcSuccessStruct)},r.assertIsJsonRpcSuccess=function(e,t){(0,i.assertStruct)(e,r.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},r.isJsonRpcFailure=function(e){return(0,n.is)(e,r.JsonRpcFailureStruct)},r.assertIsJsonRpcFailure=function(e,t){(0,i.assertStruct)(e,r.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},r.isJsonRpcError=function(e){return(0,n.is)(e,r.JsonRpcErrorStruct)},r.assertIsJsonRpcError=function(e,t){(0,i.assertStruct)(e,r.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},r.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(r||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/json.js"}],[1363,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/keyring.js"}],[1364,{debug:2654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createModuleLogger=r.createProjectLogger=void 0;const i=(0,n(e("debug")).default)("metamask");r.createProjectLogger=function(e){return i.extend(e)},r.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/logging.js"}],[1365,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.calculateNumberSize=r.calculateStringSize=r.isASCII=r.isPlainObject=r.ESCAPE_CHARACTERS_REGEXP=r.JsonSize=r.hasProperty=r.isObject=r.isNullOrUndefined=r.isNonEmptyArray=void 0,r.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},r.isNullOrUndefined=function(e){return null===e||e===undefined},r.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}r.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(r.JsonSize||(r.JsonSize={})),r.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,r.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},r.isASCII=n,r.calculateStringSize=function(e){var t;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(t=e.match(r.ESCAPE_CHARACTERS_REGEXP))&&void 0!==t?t:[]).length},r.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/misc.js"}],[1366,{"./assert":1353,"./hex":1360},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.hexToBigInt=r.hexToNumber=r.bigIntToHex=r.numberToHex=void 0;const n=e("./assert"),i=e("./hex");r.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,i.add0x)(e.toString(16)));r.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,i.add0x)(e.toString(16)));r.hexToNumber=e=>{(0,i.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};r.hexToBigInt=e=>((0,i.assertIsHexString)(e),BigInt((0,i.add0x)(e)))}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/number.js"}],[1367,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/opaque.js"}],[1368,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.timeSince=r.inMilliseconds=r.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(r.Duration||(r.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};r.inMilliseconds=function(e,t){return n(e,"count"),e*t},r.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/time.js"}],[1369,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/transaction-types.js"}],[137,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:46,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=46;const r=t.data;return t.data=function(e){void 0!==(null==e?void 0:e.ABTestController)&&delete e.ABTestController;return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/046.js"}],[1370,{"./assert":1353,semver:3863,superstruct:3935},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.satisfiesVersionRange=r.gtRange=r.gtVersion=r.assertIsSemVerRange=r.assertIsSemVerVersion=r.isValidSemVerRange=r.isValidSemVerVersion=r.VersionRangeStruct=r.VersionStruct=void 0;const n=e("semver"),i=e("superstruct"),s=e("./assert");r.VersionStruct=(0,i.refine)((0,i.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),r.VersionRangeStruct=(0,i.refine)((0,i.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),r.isValidSemVerVersion=function(e){return(0,i.is)(e,r.VersionStruct)},r.isValidSemVerRange=function(e){return(0,i.is)(e,r.VersionRangeStruct)},r.assertIsSemVerVersion=function(e){(0,s.assertStruct)(e,r.VersionStruct)},r.assertIsSemVerRange=function(e){(0,s.assertStruct)(e,r.VersionRangeStruct)},r.gtVersion=function(e,t){return(0,n.gt)(e,t)},r.gtRange=function(e,t){return(0,n.gtr)(e,t)},r.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/notification-controller>@metamask/utils",file:"node_modules/@metamask/notification-controller/node_modules/@metamask/utils/dist/versions.js"}],[1371,{"./url-alphabet/index.cjs":1372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(s=t)=>{let o="";for(;;){let t=r(i),a=i;for(;a--;)if(o+=e[t[a]&n]||"",o.length===s)return o}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>s(e,t,i),customRandom:s,urlAlphabet:n,random:i}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/index.browser.cjs"}],[1372,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/notification-controller>nanoid",file:"node_modules/@metamask/notification-controller/node_modules/nanoid/url-alphabet/index.cjs"}],[138,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:47,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=47;const r=t.data;return t.data=function(e){var t;const r=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions;Array.isArray(r)&&r.forEach((e=>{"number"==typeof e.metamaskNetworkId&&(e.metamaskNetworkId=e.metamaskNetworkId.toString())}));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/047.js"}],[139,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:48,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=48;const r=t.data;return t.data=function(e={}){var t,r,n,o,a,c,u,l;null===(t=e.NetworkController)||void 0===t||delete t.settings;const d=(null===(r=e.NetworkController)||void 0===r?void 0:r.provider)||{};if(("rpc"!==d.type||"string"==typeof d.chainId&&s.test(d.chainId))&&"localhost"!==d.type){if(null!==(n=e.NetworkController)&&void 0!==n&&n.provider){var h;if("rpcTarget"in e.NetworkController.provider){const t=e.NetworkController.provider.rpcTarget;e.NetworkController.provider.rpcUrl=t}null===(h=e.NetworkController)||void 0===h||null===(h=h.provider)||void 0===h||delete h.rpcTarget}}else e.NetworkController.provider={type:"rinkeby",rpcUrl:"",chainId:"0x4",nickname:"",rpcPrefs:{},ticker:"ETH"};e.PreferencesController||(e.PreferencesController={});e.PreferencesController.frequentRpcListDetail||(e.PreferencesController.frequentRpcListDetail=[]);e.PreferencesController.frequentRpcListDetail.unshift({rpcUrl:"http://localhost:8545",chainId:"0x539",ticker:"ETH",nickname:"Localhost 8545",rpcPrefs:{}}),null===(o=e.CachedBalancesController)||void 0===o||delete o.cachedBalances;const f=null===(a=e.TransactionController)||void 0===a?void 0:a.transactions;Array.isArray(f)&&f.forEach((e=>{const t=null==e?void 0:e.metamaskNetworkId;"string"==typeof t&&i.test(t)&&(e.metamaskNetworkId=parseInt(t,16).toString(10))}));const p=(null===(c=e.AddressBookController)||void 0===c?void 0:c.addressBook)||{};Object.keys(p).forEach((e=>{if(/^\d+$/iu.test(e)){const t=`0x${parseInt(e,10).toString(16)}`;!function(e,t){Object.values(e).forEach((e=>{e&&"object"==typeof e&&(e.chainId=t)}))}(p[e],t),p[t]?function(e,t,r){const n=e[t]||{},i={...e[r]};Object.keys(n).forEach((e=>{if(i[e]&&"object"==typeof i[e]){const t={};new Set([...Object.keys(i[e]),...Object.keys(n[e]||{})]).forEach((r=>{var s;t[r]=i[e][r]||(null===(s=n[e])||void 0===s?void 0:s[r])||""})),i[e]=t}else n[e]&&"object"==typeof n[e]&&(i[e]=n[e])})),e[r]=i}(p,e,t):p[t]=p[e],delete p[e]}})),null===(u=e.IncomingTransactionsController)||void 0===u||null===(u=u.incomingTxLastFetchedBlocksByNetwork)||void 0===u||delete u.localhost;const m=null===(l=e.PreferencesController)||void 0===l?void 0:l.accountTokens;m&&Object.keys(m).forEach((e=>{var t,r;const n=(null===(t=m[e])||void 0===t?void 0:t.localhost)||[];if(n.length>0){const t=m[e].rpc||[];t.length>0?m[e].rpc=function(e,t){const r=s(e),n=s(t),i=[];return new Set([...Object.keys(r),...Object.keys(n)]).forEach((e=>{i.push({...r[e],...n[e]})})),i;function s(e){return e.reduce(((e,t)=>(null!=t&&t.address&&"string"==typeof(null==t?void 0:t.address)&&(e[t.address]=t),e)),{})}}(n,t):m[e].rpc=n}null===(r=m[e])||void 0===r||delete r.localhost}));return e}(r),t}};const i=/^0x[0-9a-f]+$/iu,s=/^0x[1-9a-f]+[0-9a-f]*$/iu}}},{package:"$root$",file:"app/scripts/migrations/048.js"}],[1391,{"./ObservableStore":1393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ComposedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const r=t=>{const r=this.getState();r[e]=t,this.putState(r)};t.subscribe(r),r(t.getState())}}r.ComposedStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[1392,{"./ObservableStore":1393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MergedStore=void 0;const n=e("./ObservableStore");class i extends n.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}r.MergedStore=i}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/MergedStore.js"}],[1393,{"@metamask/safe-event-emitter":1481},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ObservableStore=void 0;const i=n(e("@metamask/safe-event-emitter"));class s extends i.default{constructor(e){super(),e===undefined?this._state={}:this._state=e}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}r.ObservableStore=s}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[1394,{stream:3896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeAsStream=void 0;const n=e("stream");class i extends n.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const r=super.pipe(e,t);return e.write(this.obsStore.getState()),r}_write(e,t,r){this.obsStore.putState(e),r()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}r.storeAsStream=function(e){return new i(e)}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/asStream.js"}],[1395,{"./ComposedStore":1391,"./MergedStore":1392,"./ObservableStore":1393,"./asStream":1394,"./transform":1396},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./asStream"),r),i(e("./ComposedStore"),r),i(e("./MergedStore"),r),i(e("./ObservableStore"),r),i(e("./transform"),r)}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/index.js"}],[1396,{through2:1397},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.storeTransformStream=void 0;const n=e("through2");r.storeTransformStream=function(e){return n.obj(((t,r,n)=>{try{return n(null,e(t)),undefined}catch(e){return n(e),undefined}}))}}}},{package:"@metamask/obs-store",file:"node_modules/@metamask/obs-store/dist/transform.js"}],[1397,{_process:3560,"readable-stream":3790,util:3993,xtend:4035},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function o(e){n.call(this,e),this._destroyed=!1}function a(e,t,r){r(null,e)}function c(e){return function(t,r,n){return"function"==typeof t&&(n=r,r=t,t={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),e(t,r,n)}}i(o,n),o.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;r.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,r){var n=new o(e);return n._transform=t,r&&(n._flush=r),n})),t.exports.ctor=c((function(e,t,r){function n(t){if(!(this instanceof n))return new n(t);this.options=s(e,t),o.call(this,this.options)}return i(n,o),n.prototype._transform=t,r&&(n.prototype._flush=r),n})),t.exports.obj=c((function(e,t,r){var n=new o(s({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n}))}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/obs-store>through2",file:"node_modules/@metamask/obs-store/node_modules/through2/through2.js"}],[14,{"../../../../shared/modules/hexstring-utils":4089,"./ens":13,"@metamask/obs-store":1395,loglevel:3416,"punycode/punycode":3594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(e("punycode/punycode")),i=e("@metamask/obs-store"),s=c(e("loglevel")),o=e("../../../../shared/modules/hexstring-utils"),a=c(e("./ens"));function c(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor({ens:e,provider:t,onNetworkDidChange:r,getCurrentChainId:n}={}){const s={ensResolutionsByAddress:{}};if(this._ens=e,!this._ens){const e=n();a.default.getChainEnsSupport(e)&&(this._ens=new a.default({chainId:e,provider:t}))}this.store=new i.ObservableStore(s),this.resetState=()=>{this.store.updateState(s)},r((()=>{this.store.putState(s);const e=n();a.default.getChainEnsSupport(e)?this._ens=new a.default({chainId:e,provider:t}):delete this._ens}))}reverseResolveAddress(e){return this._reverseResolveAddress((0,o.toChecksumHexAddress)(e))}async _reverseResolveAddress(e){if(!this._ens)return undefined;const t=this.store.getState();if(t.ensResolutionsByAddress[e])return t.ensResolutionsByAddress[e];let r,i;try{r=await this._ens.reverse(e)}catch(e){return s.default.debug(e),undefined}try{i=await this._ens.lookup(r)}catch(e){return s.default.debug(e),undefined}return"0x0000000000000000000000000000000000000000"===i||"0x"===i||(0,o.toChecksumHexAddress)(i)!==e?undefined:(this._updateResolutionsByAddress(e,n.default.toASCII(r)),r)}_updateResolutionsByAddress(e,t){const r=this.store.getState();this.store.putState({ensResolutionsByAddress:{...r.ensResolutionsByAddress,[e]:t}})}}}}},{package:"$root$",file:"app/scripts/controllers/ens/index.js"}],[140,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:49,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=49;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{metaMetricsId:t,participateInMetaMetrics:r,metaMetricsSendCount:n}=e.PreferencesController;e.MetaMetricsController=e.MetaMetricsController??{},t!==undefined&&(e.MetaMetricsController.metaMetricsId=t,delete e.PreferencesController.metaMetricsId),r!==undefined&&(e.MetaMetricsController.participateInMetaMetrics=r,delete e.PreferencesController.participateInMetaMetrics),n!==undefined&&(e.MetaMetricsController.metaMetricsSendCount=n,delete e.PreferencesController.metaMetricsSendCount)}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/049.js"}],[141,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");const i=["METASWAP_GAS_PRICE_ESTIMATES_LAST_RETRIEVED","METASWAP_GAS_PRICE_ESTIMATES","cachedFetch","BASIC_PRICE_ESTIMATES_LAST_RETRIEVED","BASIC_PRICE_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES","BASIC_GAS_AND_TIME_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES_LAST_RETRIEVED","GAS_API_ESTIMATES"];r.default={version:50,async migrate(e){const t=(0,n.cloneDeep)(e);return t.meta.version=50,i.forEach((e=>{var t;return null===(t=window.localStorage)||void 0===t?void 0:t.removeItem(e)})),t}}}}},{package:"$root$",file:"app/scripts/migrations/050.js"}],[1412,{"./utils":1414,"@metamask/base-controller":1058,"@metamask/controller-utils":1063,"eth-phishing-detect/src/detector":2749,"punycode/":3594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},p=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},m=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},g=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},y=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.PhishingController=r.phishingListKeyNameMap=r.ListNames=r.ListKeys=r.METAMASK_HOTLIST_DIFF_URL=r.METAMASK_STALELIST_URL=r.STALELIST_REFRESH_INTERVAL=r.HOTLIST_REFRESH_INTERVAL=r.METAMASK_HOTLIST_DIFF_FILE=r.METAMASK_STALELIST_FILE=r.PHISHING_CONFIG_BASE_URL=void 0;const w=e("@metamask/base-controller"),b=e("@metamask/controller-utils"),v=y(e("eth-phishing-detect/src/detector")),k=e("punycode/"),_=e("./utils");var S,T;r.PHISHING_CONFIG_BASE_URL="https://phishing-detection.metafi.codefi.network",r.METAMASK_STALELIST_FILE="/v1/stalelist",r.METAMASK_HOTLIST_DIFF_FILE="/v1/diffsSince",r.HOTLIST_REFRESH_INTERVAL=1800,r.STALELIST_REFRESH_INTERVAL=345600,r.METAMASK_STALELIST_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_STALELIST_FILE}`,r.METAMASK_HOTLIST_DIFF_URL=`${r.PHISHING_CONFIG_BASE_URL}${r.METAMASK_HOTLIST_DIFF_FILE}`,function(e){e.PhishfortHotlist="phishfort_hotlist",e.EthPhishingDetectConfig="eth_phishing_detect_config"}(S=r.ListKeys||(r.ListKeys={})),function(e){e.MetaMask="MetaMask",e.Phishfort="Phishfort"}(T=r.ListNames||(r.ListNames={}));const E={[T.Phishfort]:S.PhishfortHotlist,[T.MetaMask]:S.EthPhishingDetectConfig};r.phishingListKeyNameMap={[S.EthPhishingDetectConfig]:T.MetaMask,[S.PhishfortHotlist]:T.Phishfort};const j="PhishingController",M={phishingLists:{persist:!0,anonymous:!1},whitelist:{persist:!0,anonymous:!1},hotlistLastFetched:{persist:!0,anonymous:!1},stalelistLastFetched:{persist:!0,anonymous:!1}};class A extends w.BaseController{constructor({stalelistRefreshInterval:e=r.STALELIST_REFRESH_INTERVAL,hotlistRefreshInterval:t=r.HOTLIST_REFRESH_INTERVAL,messenger:l,state:d={}}){super({name:j,metadata:M,messenger:l,state:Object.assign(Object.assign({},{phishingLists:[],whitelist:[],hotlistLastFetched:0,stalelistLastFetched:0}),d)}),n.add(this),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),p(this,s,e,"f"),p(this,o,t,"f"),m(this,n,"m",u).call(this),this.updatePhishingDetector()}updatePhishingDetector(){p(this,i,new v.default(this.state.phishingLists),"f")}setStalelistRefreshInterval(e){p(this,s,e,"f")}setHotlistRefreshInterval(e){p(this,o,e,"f")}isStalelistOutOfDate(){return(0,_.fetchTimeNow)()-this.state.stalelistLastFetched>=m(this,s,"f")}isHotlistOutOfDate(){return(0,_.fetchTimeNow)()-this.state.hotlistLastFetched>=m(this,o,"f")}maybeUpdateState(){return f(this,void 0,void 0,(function*(){if(this.isStalelistOutOfDate())return void(yield this.updateStalelist());this.isHotlistOutOfDate()&&(yield this.updateHotlist())}))}test(e){const t=(0,k.toASCII)(e);return this.state.whitelist.includes(t)?{result:!1,type:"all"}:m(this,i,"f").check(t)}bypass(e){const t=(0,k.toASCII)(e),{whitelist:r}=this.state;r.includes(t)||this.update((e=>{e.whitelist.push(t)}))}updateHotlist(){return f(this,void 0,void 0,(function*(){if(m(this,a,"f"))yield m(this,a,"f");else try{p(this,a,m(this,n,"m",d).call(this),"f"),yield m(this,a,"f")}finally{p(this,a,undefined,"f")}}))}updateStalelist(){return f(this,void 0,void 0,(function*(){if(m(this,c,"f"))yield m(this,c,"f");else try{p(this,c,m(this,n,"m",l).call(this),"f"),yield m(this,c,"f")}finally{p(this,c,undefined,"f")}}))}}r.PhishingController=A,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,n=new WeakSet,u=function(){this.messagingSystem.registerActionHandler(`${j}:maybeUpdateState`,this.maybeUpdateState.bind(this)),this.messagingSystem.registerActionHandler(`${j}:testOrigin`,this.test.bind(this))},l=function(){return f(this,void 0,void 0,(function*(){let e,t;try{e=yield m(this,n,"m",h).call(this,r.METAMASK_STALELIST_URL).then((e=>e)),(null==e?void 0:e.data)&&e.data.lastUpdated>0&&(t=yield m(this,n,"m",h).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e.data.lastUpdated}`))}finally{const e=(0,_.fetchTimeNow)();this.update((t=>{t.stalelistLastFetched=e,t.hotlistLastFetched=e}))}if(!e||!t)return;const i=e.data,{phishfort_hotlist:s,eth_phishing_detect_config:o}=i,a=g(i,["phishfort_hotlist","eth_phishing_detect_config"]),c=Object.assign(Object.assign(Object.assign({},s),a),{fuzzylist:[],allowlist:[],name:r.phishingListKeyNameMap.phishfort_hotlist}),u=Object.assign(Object.assign(Object.assign({},o),a),{name:r.phishingListKeyNameMap.eth_phishing_detect_config}),l=(0,_.applyDiffs)(c,t.data,S.PhishfortHotlist),d=(0,_.applyDiffs)(u,t.data,S.EthPhishingDetectConfig);this.update((e=>{e.phishingLists=[d,l]})),this.updatePhishingDetector()}))},d=function(){return f(this,void 0,void 0,(function*(){const e=Math.max(...this.state.phishingLists.map((({lastUpdated:e})=>e)));let t;try{t=yield m(this,n,"m",h).call(this,`${r.METAMASK_HOTLIST_DIFF_URL}/${e}`)}finally{this.update((e=>{e.hotlistLastFetched=(0,_.fetchTimeNow)()}))}if(!(null==t?void 0:t.data))return;const i=t.data,s=this.state.phishingLists.map((e=>(0,_.applyDiffs)(e,i,E[e.name])));this.update((e=>{e.phishingLists=s})),this.updatePhishingDetector()}))},h=function(e){return f(this,void 0,void 0,(function*(){const t=yield(0,b.safelyExecute)((()=>fetch(e,{cache:"no-cache"})),!0);return 200===(null==t?void 0:t.status)?yield t.json():null}))},r.default=A}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/PhishingController.js"}],[1413,{"./PhishingController":1412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./PhishingController"),r)}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/index.js"}],[1414,{"./PhishingController":1412},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.applyDiffs=r.fetchTimeNow=void 0;const n=e("./PhishingController");r.fetchTimeNow=()=>Math.round(Date.now()/1e3);const i=e=>{const t=e.indexOf(".");return[e.slice(0,t),e.slice(t+1)]};r.applyDiffs=(e,t,r)=>{const s=t.filter((({timestamp:t,targetList:n})=>t>e.lastUpdated&&i(n)[0]===r));let o=e.lastUpdated;const a={allowlist:new Set(e.allowlist),blocklist:new Set(e.blocklist),fuzzylist:new Set(e.fuzzylist)};for(const{isRemoval:e,targetList:t,url:r,timestamp:n}of s){const s=i(t)[1];n>o&&(o=n),e?a[s].delete(r):a[s].add(r)}return{allowlist:Array.from(a.allowlist),blocklist:Array.from(a.blocklist),fuzzylist:Array.from(a.fuzzylist),version:e.version,name:n.phishingListKeyNameMap[r],tolerance:e.tolerance,lastUpdated:o}}}}},{package:"@metamask/phishing-controller",file:"node_modules/@metamask/phishing-controller/dist/utils.js"}],[142,{"../../../shared/constants/network":4058,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");r.default={version:51,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=51;const r=t.data;return t.data=function(e){var t,r;const{chainId:n,type:s}=(null==e||null===(t=e.NetworkController)||void 0===t?void 0:t.provider)||{},o=null===(r=i.BUILT_IN_NETWORKS[s])||void 0===r?void 0:r.chainId;o&&n!==o&&(e.NetworkController.provider.chainId=o);return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/051.js"}],[143,{"../../../shared/constants/network":4058,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");r.default={version:52,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=52;const r=t.data;return t.data=function(e={}){if(e.PreferencesController){const{accountTokens:t,accountHiddenTokens:r,frequentRpcListDetail:n}=e.PreferencesController,s={},o={};if(t&&Object.keys(t).length>0){for(const e of Object.keys(t)){s[e]={},t[e][i.NETWORK_TYPES.RPC]&&n.forEach((r=>{s[e][r.chainId]=t[e][i.NETWORK_TYPES.RPC]}));for(const r of Object.keys(t[e]))switch(r){case i.NETWORK_TYPES.MAINNET:s[e][i.CHAIN_IDS.MAINNET]=t[e][i.NETWORK_TYPES.MAINNET];break;case"ropsten":s[e]["0x3"]=t[e].ropsten;break;case"rinkeby":s[e]["0x4"]=t[e].rinkeby;break;case i.NETWORK_TYPES.GOERLI:s[e][i.CHAIN_IDS.GOERLI]=t[e][i.NETWORK_TYPES.GOERLI];break;case"kovan":s[e]["0x2a"]=t[e].kovan}}e.PreferencesController.accountTokens=s}if(r&&Object.keys(r).length>0){for(const e of Object.keys(r)){o[e]={},r[e][i.NETWORK_TYPES.RPC]&&n.forEach((t=>{o[e][t.chainId]=r[e][i.NETWORK_TYPES.RPC]}));for(const t of Object.keys(r[e]))switch(t){case i.NETWORK_TYPES.MAINNET:o[e][i.CHAIN_IDS.MAINNET]=r[e][i.NETWORK_TYPES.MAINNET];break;case"ropsten":o[e]["0x3"]=r[e].ropsten;break;case"rinkeby":o[e]["0x4"]=r[e].rinkeby;break;case i.NETWORK_TYPES.GOERLI:o[e][i.CHAIN_IDS.GOERLI]=r[e][i.NETWORK_TYPES.GOERLI];break;case"kovan":o[e]["0x2a"]=r[e].kovan}}e.PreferencesController.accountHiddenTokens=o}}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/052.js"}],[144,{"@metamask/transaction-controller":1724,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("@metamask/transaction-controller");r.default={version:53,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=53;const r=t.data;return t.data=function(e){var t,r;const n=null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions,s=null==e||null===(r=e.IncomingTransactionsController)||void 0===r?void 0:r.incomingTransactions;Array.isArray(n)&&n.forEach((e=>{e&&(e.type!==i.TransactionType.retry&&e.type!==i.TransactionType.cancel&&(e.type=e.transactionCategory),delete e.transactionCategory)}));if(s){Object.entries(s).forEach((([t,r])=>{r&&(delete r.transactionCategory,e.IncomingTransactionsController.incomingTransactions[t]={...r,type:i.TransactionType.incoming})}))}return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/053.js"}],[145,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");function i(e){return"number"==typeof e||"string"==typeof e&&e.match(/^(0x)?\d+$/u)}r.default={version:54,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=54;const r=function(e){const t=e;if(!t.PreferencesController)return t;const r=t.PreferencesController.tokens||[],n=r.filter((({decimals:e})=>i(e)));for(const e of n)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t.PreferencesController.tokens=n;const{accountTokens:s}=t.PreferencesController;if(s&&"object"==typeof s)for(const e of Object.keys(s)){const t=s[e];if(t&&"object"==typeof t)for(const e of Object.keys(t)){const r=(t[e]||[]).filter((({decimals:e})=>i(e)));for(const e of r)"string"==typeof e.decimals&&(e.decimals=parseInt(e.decimals));t[e]=r}}return t.PreferencesController.accountTokens=s,t}(t.data);return t.data=r,t}}}}},{package:"$root$",file:"app/scripts/migrations/054.js"}],[1459,{"./ppom-controller":1460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./ppom-controller"),r)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/index.js"}],[146,{"../../../shared/constants/network":4058,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash"),i=e("../../../shared/constants/network");r.default={version:55,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=55;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.IncomingTransactionsController)&&void 0!==t&&t.incomingTxLastFetchedBlocksByNetwork&&(e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId=(0,n.mapKeys)(e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork,((e,t)=>{var r;return(null===(r=i.BUILT_IN_NETWORKS[t])||void 0===r?void 0:r.chainId)??s})),delete e.IncomingTransactionsController.incomingTxLastFetchedBlockByChainId[s],delete e.IncomingTransactionsController.incomingTxLastFetchedBlocksByNetwork);return e}(r),t}};const s="UNKNOWN";i.BUILT_IN_NETWORKS.rinkeby={networkId:"4",chainId:"0x4",ticker:"ETH"},i.BUILT_IN_NETWORKS.ropsten={networkId:"3",chainId:"0x3",ticker:"ETH"},i.BUILT_IN_NETWORKS.kovan={networkId:"42",chainId:"0x2a",ticker:"ETH"}}}},{package:"$root$",file:"app/scripts/migrations/055.js"}],[1460,{"./ppom-storage":1461,"./util":1462,"@metamask/base-controller":1466,"@metamask/controller-utils":1063,"await-semaphore":2318},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a,c,u,l,d,h,f,p,m,g,y,w,b,v,k,_,S,T,E,j,M,A,P,C,O,R,I,x,N,K,D,B,U,$,L,q,F,H,V,J,W,z,G,Q,Y,Z=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},X=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMController=r.PPOMInitialisationStatus=r.NETWORK_CACHE_DURATION=r.REFRESH_TIME_INTERVAL=void 0;const ee=e("@metamask/base-controller"),te=e("@metamask/controller-utils"),re=e("await-semaphore"),ne=e("./ppom-storage"),ie=e("./util");r.REFRESH_TIME_INTERVAL=72e5;r.NETWORK_CACHE_DURATION=6048e5;const se=5,oe=2,ae=["eth_call","eth_blockNumber","eth_createAccessList","eth_getLogs","eth_getFilterLogs","eth_getTransactionByHash","eth_chainId","eth_getBlockByHash","eth_getBlockByNumber","eth_getCode","eth_getStorageAt","eth_getBalance","eth_getTransactionCount","trace_call","trace_callMany","debug_traceCall","trace_filter"],ce={versionInfo:{persist:!0,anonymous:!1},chainStatus:{persist:!0,anonymous:!1},storageMetadata:{persist:!0,anonymous:!1},versionFileETag:{persist:!0,anonymous:!1}},ue="PPOMController",le={headers:{"Content-Type":"application/json"}};r.PPOMInitialisationStatus={INPROGRESS:"INPROGRESS",SUCCESS:"SUCCESS",FAIL:"FAIL"};class de extends ee.BaseControllerV2{constructor({chainId:e,messenger:t,provider:_,storageBackend:S,securityAlertsEnabled:T,onPreferencesChange:j,ppomProvider:M,cdnBaseUrl:O,providerRequestLimit:R,dataUpdateDuration:I,fileFetchScheduleDuration:x,state:N,blockaidPublicKey:K,nativeCrypto:D}){const B=(0,ie.addHexPrefix)(e),U={versionInfo:N?.versionInfo??[],storageMetadata:N?.storageMetadata??[],chainStatus:N?.chainStatus??{[B]:{chainId:B,lastVisited:(new Date).getTime(),versionInfo:[]}},versionFileETag:N?.versionFileETag??""};super({name:ue,metadata:ce,messenger:t,state:U}),n.add(this),i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),h.set(this,void 0),f.set(this,0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),y.set(this,void 0),w.set(this,{}),b.set(this,void 0),v.set(this,!1),k.set(this,undefined),Z(this,p,B,"f"),Z(this,s,_,"f"),Z(this,l,M,"f"),Z(this,o,new ne.PPOMStorage({storageBackend:S,readMetadata:()=>JSON.parse(JSON.stringify(this.state.storageMetadata)),writeMetadata:e=>{this.update((t=>{t.storageMetadata=e}))}}),"f"),Z(this,u,new re.Mutex,"f"),Z(this,d,O,"f"),Z(this,h,R??300,"f"),Z(this,m,I??r.REFRESH_TIME_INTERVAL,"f"),Z(this,g,x===undefined?3e5:x,"f"),Z(this,y,T,"f"),Z(this,b,K,"f"),Z(this,k,D,"f"),j(X(this,n,"m",A).bind(this)),X(this,n,"m",P).call(this),X(this,n,"m",C).call(this),T&&X(this,n,"m",E).call(this)}async updatePPOM(){if(!X(this,y,"f"))throw Error("User has securityAlertsEnabled set to false");X(this,n,"m",q).call(this),await X(this,n,"m",I).call(this)}async usePPOM(e){if(!X(this,y,"f"))throw Error("User has securityAlertsEnabled set to false");if(!(0,ie.blockaidValidationSupportedForNetwork)(X(this,p,"f")))throw Error(`Blockaid validation not available on network with chainId: ${X(this,p,"f")}`);return await X(this,n,"m",$).call(this),Z(this,f,0,"f"),Z(this,w,{},"f"),await X(this,u,"f").use((async()=>({...await e(X(this,i,"f")),providerRequestsCount:{...X(this,w,"f")}})))}}r.PPOMController=de,i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakMap,w=new WeakMap,b=new WeakMap,v=new WeakMap,k=new WeakMap,n=new WeakSet,_=async function(){X(this,y,"f")&&!X(this,v,"f")&&await X(this,u,"f").use((async()=>{const{ppomInit:e}=X(this,l,"f");await e("./ppom_bg.wasm"),Z(this,v,!0,"f")})).catch((e=>{throw console.error("Error in trying to initialize PPOM",e),e}))},S=function(){clearInterval(X(this,a,"f")),clearInterval(X(this,c,"f")),Z(this,a,undefined,"f"),Z(this,c,undefined,"f")},T=function(){this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.INPROGRESS),X(this,n,"m",R).call(this).then((async()=>{this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.SUCCESS),X(this,n,"m",Y).call(this)})).catch((e=>{this.messagingSystem.publish("PPOMController:initialisationStateChangeEvent",r.PPOMInitialisationStatus.FAIL),console.error(`Error in initialising ppom: ${e.message}`)}))},E=function(){X(this,n,"m",x).call(this).then((()=>{X(this,n,"m",T).call(this)})).catch((e=>console.error(`Error in fetching version info: ${e.message}`)))},j=function(){X(this,n,"m",O).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)})),X(this,n,"m",S).call(this),this.update((e=>{e.versionInfo=[];const t={...this.state.chainStatus};Object.keys(t).forEach((e=>{if(t[e]){const r={...t[e],versionInfo:[]};t[e]=r}})),e.chainStatus=t,e.storageMetadata=[],e.versionFileETag=""}))},M=function(e){const t=(0,ie.addHexPrefix)(e.providerConfig.chainId);if(t===X(this,p,"f"))return;if(Z(this,p,t,"f"),!(0,ie.blockaidValidationSupportedForNetwork)(t))return void X(this,n,"m",O).call(this).catch((e=>{console.error(`Error in resetting ppom: ${e.message}`)}));let r={...this.state.chainStatus};const i=r[t];r={...r,[t]:{chainId:t,lastVisited:(new Date).getTime(),versionInfo:i?.versionInfo??[]}},this.update((e=>{e.chainStatus=r})),X(this,n,"m",q).call(this),X(this,y,"f")&&X(this,n,"m",T).call(this)},A=function(e){const t=e.securityAlertsEnabled;t!==X(this,y,"f")&&(Z(this,y,t,"f"),t?X(this,n,"m",E).call(this):X(this,n,"m",j).call(this))},P=function(){this.messagingSystem.registerActionHandler(`${ue}:usePPOM`,this.usePPOM.bind(this)),this.messagingSystem.registerActionHandler(`${ue}:updatePPOM`,this.updatePPOM.bind(this))},C=function(){const e=X(this,n,"m",M).bind(this);this.messagingSystem.subscribe("NetworkController:stateChange",e)},O=async function(){await X(this,u,"f").use((async()=>{X(this,i,"f")&&(X(this,i,"f").free(),Z(this,i,undefined,"f"))}))},R=async function(){(0,ie.blockaidValidationSupportedForNetwork)(X(this,p,"f"))&&(X(this,n,"m",B).call(this,X(this,p,"f")),Z(this,i,await X(this,n,"m",G).call(this,X(this,p,"f")),"f"))},I=async function(){await X(this,n,"m",x).call(this),await X(this,n,"m",F).call(this)},x=async function(){const e=await X(this,n,"m",J).call(this);return!!e&&(this.update((t=>{t.versionInfo=e})),!0)},N=function(e,t){return e.find((e=>e.name===t.name&&e.chainId===t.chainId&&e.version===t.version&&e.checksum===t.checksum))},K=async function(e){const t=await Promise.all(e.map((async e=>{let t;try{t=await X(this,n,"m",D).call(this,e)}catch(t){console.error(`Error in getting file ${e.filePath}: ${t.message}`)}return t?[e.name,new Uint8Array(t)]:undefined})));return t?.filter((e=>e?.[1]!==undefined))},D=async function(e){const{storageMetadata:t}=this.state;if(X(this,n,"m",N).call(this,t,e))try{return await X(this,o,"f").readFile(e.name,e.chainId)}catch(e){console.error(`Error in reading file: ${e.message}`)}(0,ie.checkFilePath)(e.filePath);const r=(0,ie.constructURLHref)(X(this,d,"f"),e.filePath),i=await X(this,n,"m",W).call(this,r);await(0,ie.validateSignature)(i,e.hashSignature,X(this,b,"f"),e.filePath,X(this,k,"f"));try{await X(this,o,"f").writeFile({data:i,...e})}catch(e){console.error(`Error in writing file: ${e.message}`)}return i},B=function(e){const t=this.state.versionInfo.filter((({chainId:t})=>t===e));this.update((r=>{const n=r.chainStatus[e];n&&(r.chainStatus={...r.chainStatus,[e]:{...n,versionInfo:t}})}))},U=async function(){const{chainStatus:e}=this.state;if(!e[X(this,p,"f")]?.versionInfo?.length){this.state.versionInfo.filter((({chainId:e})=>e===X(this,p,"f"))).length||await X(this,n,"m",x).call(this)}},$=async function(){X(this,i,"f")===undefined&&(await X(this,n,"m",U).call(this),await X(this,n,"m",R).call(this))},L=async function(){const{chainStatus:e,storageMetadata:t,versionInfo:r}=this.state,i=Object.keys(e).filter(ie.blockaidValidationSupportedForNetwork).map((e=>({chainId:e,versionInfo:r.filter((r=>r.chainId===e&&!X(this,n,"m",N).call(this,t,r)))}))),s=[];return i.forEach((e=>{const{versionInfo:t}=e;t.forEach(((e,r)=>{s.push({fileVersionInfo:e,isLastFileOfNetwork:r===t.length-1})}))})),s},q=function(){if(Object.keys(this.state.chainStatus)?.length<=oe)return;const e=(new Date).getTime(),t=Object.keys(this.state.chainStatus),n=t.filter((t=>this.state.chainStatus[t].lastVisited<e-r.NETWORK_CACHE_DURATION&&t!==X(this,p,"f")));if(t.length>se){const e=t.sort(((e,t)=>Number(this.state.chainStatus[t]?.lastVisited)-Number(this.state.chainStatus[e]?.lastVisited)))[se];n.push(e)}const i={...this.state.chainStatus};n.forEach((e=>{delete i[e]})),this.update((e=>{e.chainStatus=i}))},F=async function(){X(this,c,"f")&&clearInterval(X(this,c,"f"));const e=await X(this,n,"m",L).call(this);let t=X(this,g,"f");X(this,m,"f")/(e.length+1)<X(this,g,"f")&&(t=X(this,m,"f")/(e.length+1)),Z(this,c,setInterval((()=>{const t=e.pop();if(t){const{chainStatus:e}=this.state,{fileVersionInfo:r,isLastFileOfNetwork:i}=t;e[r.chainId]&&X(this,n,"m",D).call(this,r).then((async()=>{i&&(X(this,n,"m",B).call(this,X(this,p,"f")),X(this,p,"f")===r.chainId&&await X(this,n,"m",R).call(this))})).catch((e=>console.error(`Error in getting file ${r.filePath}: ${e.message}`)))}e.length||(clearInterval(X(this,c,"f")),X(this,o,"f").syncMetadata(this.state.versionInfo))}),t),"f")},H=async function(e,t={},r="GET"){const n=await(0,te.safelyExecute)((async()=>(0,te.timeoutFetch)(e,{method:r,cache:"no-cache",redirect:"error",...t},1e4)),!0);if(200!==n?.status)throw new Error(`Failed to fetch file with url: ${e}`);return n},V=async function(e){const t=await X(this,n,"m",H).call(this,e,{headers:le},"HEAD"),{versionFileETag:r}=this.state;return t.headers.get("ETag")!==r&&(this.update((e=>{e.versionFileETag=t.headers.get("ETag")})),!0)},J=async function(){const e=(0,ie.constructURLHref)(X(this,d,"f"),"ppom_version.json");if(!await X(this,n,"m",V).call(this,e)&&this.state.versionInfo?.length)return undefined;return(await X(this,n,"m",H).call(this,e,{headers:le})).json()},W=async function(e){const t=await X(this,n,"m",H).call(this,e);return await t.arrayBuffer()},z=async function(e,t){return new Promise((r=>{X(this,f,"f")>X(this,h,"f")?r(ie.PROVIDER_ERRORS.limitExceeded()):(Z(this,f,X(this,f,"f")+1,"f"),ae.includes(e)?(X(this,w,"f")[e]=X(this,w,"f")[e]?Number(X(this,w,"f")[e])+1:1,X(this,s,"f").sendAsync((0,ie.createPayload)(e,t),((e,t)=>{r(e?{jsonrpc:"2.0",id:(0,ie.IdGenerator)(),error:e}:t)}))):r(ie.PROVIDER_ERRORS.methodNotSupported()))}))},G=async function(e){await X(this,n,"m",_).call(this);const{chainStatus:t}=this.state,r=t[e]?.versionInfo;if(r?.length===undefined||0===r?.length)throw new Error(`Aborting initialising PPOM as no files are found for the network with chainId: ${e}`);const s=await X(this,n,"m",K).call(this,r);if(s?.length!==r?.length)throw new Error(`Aborting initialising PPOM as not all files could not be downloaded for the network with chainId: ${e}`);return await X(this,u,"f").use((async()=>{X(this,i,"f")&&X(this,i,"f").free();const{PPOM:e}=X(this,l,"f");return e.new(X(this,n,"m",z).bind(this),s)}))},Q=function(){this.updatePPOM().catch((e=>{console.error(`Error while trying to update PPOM: ${e.message}`)}))},Y=function(){X(this,y,"f")&&(X(this,a,"f")||(X(this,n,"m",Q).call(this),Z(this,a,setInterval(X(this,n,"m",Q).bind(this),X(this,m,"f")),"f")))}}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-controller.js"}],[1461,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.PPOMStorage=void 0;r.PPOMStorage=class{constructor({storageBackend:e,readMetadata:t,writeMetadata:r}){n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),o(this,n,e,"f"),o(this,i,t,"f"),o(this,s,r,"f")}async syncMetadata(e){const t=a(this,i,"f").call(this),r=[];for(const n of t){try{await this.readFile(n.name,n.chainId)}catch(e){console.error("Error: ",e);continue}e.find((e=>e.name===n.name&&e.chainId===n.chainId&&e.version===n.version&&e.checksum===n.checksum))&&r.push(n)}const o=await a(this,n,"f").dir();for(const{name:e,chainId:t}of o)r.find((r=>r.name===e&&r.chainId===t))||await a(this,n,"f").delete({name:e,chainId:t});return a(this,s,"f").call(this,r),r}async readFile(e,t){const r=a(this,i,"f").call(this).find((r=>r.name===e&&r.chainId===t));if(!r)throw new Error(`File metadata (${e}, ${t}) not found`);const s=await a(this,n,"f").read({name:e,chainId:t},r.checksum);if(!s)throw new Error(`Storage File (${e}, ${t}) not found`);return s}async writeFile({data:e,name:t,chainId:r,version:o,checksum:c}){await a(this,n,"f").write({name:t,chainId:r},e,c);const u=a(this,i,"f").call(this),l=u.find((e=>e.name===t&&e.chainId===r));l?(l.version=o,l.checksum=c):u.push({name:t,chainId:r,version:o,checksum:c}),a(this,s,"f").call(this,u)}},n=new WeakMap,i=new WeakMap,s=new WeakMap}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/ppom-storage.js"}],[1462,{buffer:2430,"crypto-js":2619,elliptic:2675,"json-rpc-random-id":3221},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.checkFilePath=r.addHexPrefix=r.constructURLHref=r.validateSignature=r.PROVIDER_ERRORS=r.createPayload=r.IdGenerator=r.blockaidValidationSupportedForNetwork=r.SUPPORTED_NETWORK_CHAINIDS=void 0;const a=s(e("crypto-js")),c=o(e("elliptic")),u=o(e("json-rpc-random-id")),l=c.default.eddsa;r.SUPPORTED_NETWORK_CHAINIDS={MAINNET:"0x1",BSC:"0x38",OPTIMISM:"0xa",POLYGON:"0x89",AVALANCHE:"0xa86a",ARBITRUM:"0xa4b1",LINEA_MAINNET:"0xe708"};r.blockaidValidationSupportedForNetwork=e=>Object.values(r.SUPPORTED_NETWORK_CHAINIDS).some((t=>t===e)),r.IdGenerator=(0,u.default)();r.createPayload=(e,t)=>({id:(0,r.IdGenerator)(),jsonrpc:"2.0",method:e,params:t||[]}),r.PROVIDER_ERRORS={limitExceeded:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32005,message:"Limit exceeded"}}),methodNotSupported:()=>({jsonrpc:"2.0",id:(0,r.IdGenerator)(),error:{code:-32601,message:"Method not supported"}})};r.validateSignature=async(e,r,n,i,s,o)=>{const c=await(async(e,t,r=!0)=>{if(t)return t.createHash("sha256").update(e).digest("hex");if("crypto"in globalThis&&"object"==typeof globalThis.crypto&&globalThis.crypto.subtle?.digest&&r){const t=await globalThis.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}return(0,a.SHA256)(a.default.lib.WordArray.create(e)).toString()})(e,s,o);if(!new l("ed25519").keyFromPublic(n).verify(t.from(c),r))throw Error(`Signature verification failed for file path: ${i}`)};r.constructURLHref=(e,t)=>new URL(`https://${e}/${t}`.replace(/https:\/\/https:\/\//gu,"https://").replace(/\/\//gu,"/")).href;r.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):`0x${parseInt(e,10).toString(16)}`;r.checkFilePath=e=>{if(!e.match(/^[\w./]+$/u))throw new Error(`Invalid file path for data file: ${e}`)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/ppom-validator",file:"node_modules/@metamask/ppom-validator/dist/util.js"}],[1463,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1464,{immer:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1465,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1466,{"./BaseController":1463,"./BaseControllerV2":1464,"./ControllerMessenger":1465},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/ppom-validator>@metamask/base-controller",file:"node_modules/@metamask/ppom-validator/node_modules/@metamask/base-controller/dist/index.js"}],[1467,{"@metamask/base-controller":1058},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o,a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=r.controllerName=void 0;const l=e("@metamask/base-controller");r.controllerName="QueuedRequestController",r.QueuedRequestControllerActionTypes={enqueueRequest:`${r.controllerName}:enqueueRequest`},r.QueuedRequestControllerEventTypes={countChanged:`${r.controllerName}:countChanged`};class d extends l.BaseController{constructor({messenger:e}){super({name:r.controllerName,metadata:{},messenger:e,state:{}}),n.add(this),this.currentRequest=Promise.resolve(),i.set(this,0),c(this,n,"m",s).call(this)}length(){return c(this,i,"f")}enqueueRequest(e){return a(this,void 0,void 0,(function*(){c(this,n,"m",o).call(this,1),c(this,i,"f")>1&&(yield this.currentRequest),this.currentRequest=e().then((()=>{c(this,n,"m",o).call(this,-1)})).catch((e=>{throw c(this,n,"m",o).call(this,-1),e})),yield this.currentRequest}))}}r.QueuedRequestController=d,i=new WeakMap,n=new WeakSet,s=function(){this.messagingSystem.registerActionHandler(r.QueuedRequestControllerActionTypes.enqueueRequest,this.enqueueRequest.bind(this))},o=function(e){u(this,i,c(this,i,"f")+e,"f"),this.messagingSystem.publish("QueuedRequestController:countChanged",c(this,i,"f"))}}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestController.js"}],[1468,{"./QueuedRequestController":1467,"@metamask/controller-utils":1063,"@metamask/json-rpc-engine":1197,"@metamask/rpc-errors":1479,"@metamask/selected-network-controller":1495},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=void 0;const i=e("@metamask/controller-utils"),s=e("@metamask/json-rpc-engine"),o=e("@metamask/rpc-errors"),a=e("@metamask/selected-network-controller"),c=e("./QueuedRequestController");r.createQueuedRequestMiddleware=({messenger:e,useRequestQueue:t})=>(0,s.createAsyncMiddleware)(((r,s,u)=>n(void 0,void 0,void 0,(function*(){const{origin:l,networkClientId:d}=r;if(!l)throw new Error("Request object is lacking an 'origin'");if(!d)throw new Error("Request object is lacking a 'networkClientId'");var h;t()&&(h=r.method,["eth_sendTransaction","wallet_watchAsset","wallet_switchEthereumChain","eth_signTypedData_v4","wallet_addEthereumChain","wallet_requestPermissions","wallet_requestSnaps","personal_sign","eth_sign","eth_requestAccounts"].includes(h))?yield e.call(c.QueuedRequestControllerActionTypes.enqueueRequest,(()=>n(void 0,void 0,void 0,(function*(){if("wallet_switchEthereumChain"===r.method||"wallet_addEthereumChain"===r.method)return u();const t=e.call("NetworkController:getNetworkClientById",d).configuration,n=e.call("NetworkController:getState"),c=(0,i.isNetworkType)(d);let h;h=c?t:n.networkConfigurations[d];const f=n.providerConfig;if(f.chainId===h.chainId)return u();const p={toNetworkConfiguration:h,fromNetworkConfiguration:f};try{yield e.call("ApprovalController:addRequest",{origin:l,type:i.ApprovalType.SwitchEthereumChain,requestData:p},!0);const t=c?"setProviderType":"setActiveNetwork";yield e.call(`NetworkController:${t}`,d),e.call(a.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,l,d)}catch(e){return s.error=(0,o.serializeError)(e),e}return u()})))):u()}))))}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/QueuedRequestMiddleware.js"}],[1469,{"./QueuedRequestController":1467,"./QueuedRequestMiddleware":1468},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createQueuedRequestMiddleware=r.QueuedRequestController=r.QueuedRequestControllerEventTypes=r.QueuedRequestControllerActionTypes=void 0;var n=e("./QueuedRequestController");Object.defineProperty(r,"QueuedRequestControllerActionTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerActionTypes}}),Object.defineProperty(r,"QueuedRequestControllerEventTypes",{enumerable:!0,get:function(){return n.QueuedRequestControllerEventTypes}}),Object.defineProperty(r,"QueuedRequestController",{enumerable:!0,get:function(){return n.QueuedRequestController}});var i=e("./QueuedRequestMiddleware");Object.defineProperty(r,"createQueuedRequestMiddleware",{enumerable:!0,get:function(){return i.createQueuedRequestMiddleware}})}}},{package:"@metamask/queued-request-controller",file:"node_modules/@metamask/queued-request-controller/dist/index.js"}],[147,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:56,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=56;const{PreferencesController:r}=t.data;return Array.isArray(null==r?void 0:r.tokens)&&(r.tokens=r.tokens.filter((({address:e})=>e))),null!=r&&r.accountTokens&&"object"==typeof r.accountTokens&&Object.keys(r.accountTokens).forEach((e=>{Object.keys(r.accountTokens[e]).forEach((t=>{r.accountTokens[e][t]=r.accountTokens[e][t].filter((({address:e})=>e))}))})),null!=r&&r.assetImages&&"undefined"in r.assetImages&&delete r.assetImages.undefined,t}}}}},{package:"$root$",file:"app/scripts/migrations/056.js"}],[1470,{"@metamask/base-controller":1475,"eth-rpc-errors":2754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitController=void 0;const i=e("eth-rpc-errors"),s=e("@metamask/base-controller"),o="RateLimitController",a={requests:{persist:!1,anonymous:!1}};class c extends s.BaseControllerV2{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:r,state:n,implementations:i}){const s={requests:Object.keys(i).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:o,metadata:a,messenger:r,state:Object.assign(Object.assign({},s),n)}),this.implementations=i,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${o}:call`,((e,t,...r)=>this.call(e,t,...r)))}call(e,t,...r){return n(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw i.ethErrors.rpc.limitExceeded({message:`"${t.toString()}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const n=this.implementations[t].method;if(!n)throw new Error("Invalid api type");return n(...r)}))}isRateLimited(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitCount)&&void 0!==r?r:this.rateLimitCount;return this.state.requests[e][t]>=n}recordRequest(e,t){var r;const n=null!==(r=this.implementations[e].rateLimitTimeout)&&void 0!==r?r:this.rateLimitTimeout;this.update((r=>{var i;const s=null!==(i=r.requests[e][t])&&void 0!==i?i:0;r.requests[e][t]=s+1,0===s&&setTimeout((()=>this.resetRequestCount(e,t)),n)}))}resetRequestCount(e,t){this.update((r=>{r.requests[e][t]=0}))}}r.RateLimitController=c}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/RateLimitController.js"}],[1471,{"./RateLimitController":1470},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),i(e("./RateLimitController"),r)}}},{package:"@metamask/rate-limit-controller",file:"node_modules/@metamask/rate-limit-controller/dist/index.js"}],[1472,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.BaseController=void 0;class n{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,r=!0){if(r){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}r.BaseController=n,r.default=n}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseController.js"}],[1473,{immer:3159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseController=void 0;const n=e("immer");(0,n.enablePatches)();function i(e,t,r){return Object.keys(e).reduce(((n,i)=>{try{const s=t[i];if(!s)throw new Error(`No metadata found for '${i}'`);const o=s[r],a=e[i];return"function"==typeof o?n[i]=o(a):o&&(n[i]=a),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}r.BaseController=class{constructor({messenger:e,metadata:t,name:r,state:n}){this.messagingSystem=e,this.name=r,this.internalState=n,this.metadata=t,this.messagingSystem.registerActionHandler(`${r}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,r,i]=n.produceWithPatches(this.internalState,e);return this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,r),{nextState:t,patches:r,inversePatches:i}}applyPatches(e){const t=(0,n.applyPatches)(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},r.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},r.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/BaseControllerV2.js"}],[1474,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerMessenger=r.RestrictedControllerMessenger=void 0;class n{constructor({controllerMessenger:e,name:t,allowedActions:r,allowedEvents:n}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=r||null,this.allowedEvents=n||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,r){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return r?this.controllerMessenger.subscribe(e,t,r):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}r.RestrictedControllerMessenger=n;r.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const r=this.actions.get(e);if(!r)throw new Error(`A handler for ${e} has not been registered`);return r(...t)}publish(e,...t){const r=this.events.get(e);if(r)for(const[e,n]of r.entries())try{if(n){const r=this.eventPayloadCache.get(e),i=n(...t);i!==r&&(this.eventPayloadCache.set(e,i),e(i,r))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,r){let n=this.events.get(e);n||(n=new Map,this.events.set(e,n)),n.set(t,r)}unsubscribe(e,t){const r=this.events.get(e);if(!r||!r.has(t))throw new Error(`Subscription not found for event: ${e}`);r.get(t)&&this.eventPayloadCache.delete(t),r.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:r}){return new n({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:r})}}}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/ControllerMessenger.js"}],[1475,{"./BaseController":1472,"./BaseControllerV2":1473,"./ControllerMessenger":1474},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.getPersistentState=r.getAnonymizedState=r.BaseControllerV2=r.BaseController=void 0;var s=e("./BaseController");Object.defineProperty(r,"BaseController",{enumerable:!0,get:function(){return s.BaseController}});var o=e("./BaseControllerV2");Object.defineProperty(r,"BaseControllerV2",{enumerable:!0,get:function(){return o.BaseController}}),Object.defineProperty(r,"getAnonymizedState",{enumerable:!0,get:function(){return o.getAnonymizedState}}),Object.defineProperty(r,"getPersistentState",{enumerable:!0,get:function(){return o.getPersistentState}}),i(e("./ControllerMessenger"),r)}}},{package:"@metamask/rate-limit-controller>@metamask/base-controller",file:"node_modules/@metamask/rate-limit-controller/node_modules/@metamask/base-controller/dist/index.js"}],[148,{"../../../shared/modules/random-id":4094,lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=e("lodash"),s=(n=e("../../../shared/modules/random-id"))&&n.__esModule?n:{default:n};r.default={version:57,async migrate(e){const t=(0,i.cloneDeep)(e);t.meta.version=57;const r=t.data;return t.data=function(e){var t;null!=e&&null!==(t=e.TransactionController)&&void 0!==t&&t.transactions&&Array.isArray(e.TransactionController.transactions)&&!e.TransactionController.transactions.some((e=>"object"!=typeof e||void 0===e.txParams))&&(e.TransactionController.transactions=(0,i.keyBy)(e.TransactionController.transactions,(e=>(void 0!==e.id&&null!==e.id||(e.id=(0,s.default)()),e.id))));return e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/057.js"}],[149,{lodash:3406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("lodash");r.default={version:58,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=58;const r=t.data;return t.data=function(e){var t;return null===(t=e.AppStateController)||void 0===t||delete t.swapsWelcomeMessageHasBeenShown,e}(r),t}}}}},{package:"$root$",file:"app/scripts/migrations/058.js"}],[1493,{"@metamask/base-controller":1058,"@metamask/swappable-obj-proxy":1717},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n,i,s,o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=r.controllerName=void 0;const a=e("@metamask/base-controller"),c=e("@metamask/swappable-obj-proxy");r.controllerName="SelectedNetworkController";const u={domains:{persist:!0,anonymous:!1},perDomainNetwork:{persist:!0,anonymous:!1}},l="metamask";r.SelectedNetworkControllerActionTypes={getState:`${r.controllerName}:getState`,getNetworkClientIdForDomain:`${r.controllerName}:getNetworkClientIdForDomain`,setNetworkClientIdForDomain:`${r.controllerName}:setNetworkClientIdForDomain`},r.SelectedNetworkControllerEventTypes={stateChange:`${r.controllerName}:stateChange`};class d extends a.BaseController{constructor({messenger:e,state:t={domains:{},perDomainNetwork:!1}}){super({name:r.controllerName,metadata:u,messenger:e,state:t}),n.add(this),i.set(this,new Map),o(this,n,"m",s).call(this)}setNetworkClientIdForMetamask(e){this.setNetworkClientIdForDomain(l,e)}setNetworkClientIdForDomain(e,t){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",t),n=o(this,i,"f").get(e);n===undefined?o(this,i,"f").set(e,{provider:(0,c.createEventEmitterProxy)(r.provider),blockTracker:(0,c.createEventEmitterProxy)(r.blockTracker,{eventFilter:"skipInternal"})}):(n.provider.setTarget(r.provider),n.blockTracker.setTarget(r.blockTracker)),this.update((r=>{r.domains[e]=t,r.perDomainNetwork||(r.domains[l]=t)}))}getNetworkClientIdForDomain(e){return this.state.perDomainNetwork?this.state.domains[e]:this.state.domains[l]}getProviderAndBlockTracker(e){let t=o(this,i,"f").get(e);if(t===undefined){const r=this.messagingSystem.call("NetworkController:getNetworkClientById",this.getNetworkClientIdForDomain(e));t={provider:(0,c.createEventEmitterProxy)(r.provider),blockTracker:(0,c.createEventEmitterProxy)(r.blockTracker,{eventFilter:"skipInternal"})},o(this,i,"f").set(e,t)}return t}setPerDomainNetwork(e){this.update((t=>(t.perDomainNetwork=e,t))),Object.keys(this.state.domains).forEach((e=>{this.setNetworkClientIdForDomain(e,this.getNetworkClientIdForDomain(e))}))}}r.SelectedNetworkController=d,i=new WeakMap,n=new WeakSet,s=function(){this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,this.getNetworkClientIdForDomain.bind(this)),this.messagingSystem.registerActionHandler(r.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,this.setNetworkClientIdForDomain.bind(this))}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkController.js"}],[1494,{"./SelectedNetworkController":1493},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=void 0;const n=e("./SelectedNetworkController");r.createSelectedNetworkMiddleware=e=>{const t=t=>e.call(n.SelectedNetworkControllerActionTypes.getNetworkClientIdForDomain,t);return(r,i,s)=>{if(!r.origin)throw new Error("Request object is lacking an 'origin'");var o,a;return t(r.origin)===undefined&&(o=r.origin,a=e.call("NetworkController:getState").selectedNetworkClientId,e.call(n.SelectedNetworkControllerActionTypes.setNetworkClientIdForDomain,o,a)),r.networkClientId=t(r.origin),s()}}}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/SelectedNetworkMiddleware.js"}],[1495,{"./SelectedNetworkController":1493,"./SelectedNetworkMiddleware":1494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectedNetworkMiddleware=r.SelectedNetworkController=r.SelectedNetworkControllerEventTypes=r.SelectedNetworkControllerActionTypes=void 0;var n=e("./SelectedNetworkController");Object.defineProperty(r,"SelectedNetworkControllerActionTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerActionTypes}}),Object.defineProperty(r,"SelectedNetworkControllerEventTypes",{enumerable:!0,get:function(){return n.SelectedNetworkControllerEventTypes}}),Object.defineProperty(r,"SelectedNetworkController",{enumerable:!0,get:function(){return n.SelectedNetworkController}});var i=e("./SelectedNetworkMiddleware");Object.defineProperty(r,"createSelectedNetworkMiddleware",{enumerable:!0,get:function(){return i.createSelectedNetworkMiddleware}})}}},{package:"@metamask/selected-network-controller",file:"node_modules/@metamask/selected-network-controller/dist/index.js"}]],[],{});